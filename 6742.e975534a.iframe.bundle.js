"use strict";(self.webpackChunk_midspace_frontend=self.webpackChunk_midspace_frontend||[]).push([[6742],{"./src/aspects/Conference/Attend/Content/Element/Element.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>Element});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.ends-with.js");var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),_chakra_ui_react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("../node_modules/.pnpm/@chakra-ui+image@1.1.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/image/dist/chakra-ui-image.esm.js"),_midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../packages/shared/shared-types/build/esm/content.js"),amazon_s3_uri__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../node_modules/.pnpm/amazon-s3-uri@0.1.1/node_modules/amazon-s3-uri/lib/amazon-s3-uri.js"),amazon_s3_uri__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(amazon_s3_uri__WEBPACK_IMPORTED_MODULE_3__),ramda__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../node_modules/.pnpm/ramda@0.28.0/node_modules/ramda/es/index.js"),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),react_player__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../node_modules/.pnpm/react-player@2.9.0_react@17.0.2/node_modules/react-player/lib/index.js"),_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/aspects/Chakra/FAIcon.tsx"),_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/aspects/Chakra/LinkButton.tsx"),_Chakra_Markdown__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/aspects/Chakra/Markdown.tsx"),_GQL_AuthParameters__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/aspects/GQL/AuthParameters.tsx"),_Menu_LeftSidebar_LiveNow__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/aspects/Menu/LeftSidebar/LiveNow.tsx"),_Rooms_ActiveSocialRooms__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/aspects/Conference/Attend/Rooms/ActiveSocialRooms.tsx"),_Rooms_SponsorBooths__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/aspects/Conference/Attend/Rooms/SponsorBooths.tsx"),_VideoElement__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("./src/aspects/Conference/Attend/Content/Element/VideoElement.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function Element(_ref){var element=_ref.element;if(element.data&&(0,_midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.Cp)(element.data)){var blob=element.data;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(ElementInner,{name:element.name,blob,type:element.typeName,elementId:element.id})}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{})}function ElementInner(_ref2){var blob=_ref2.blob,type=_ref2.type,name=_ref2.name,elementId=_ref2.elementId,conferencePath=(0,_GQL_AuthParameters__WEBPACK_IMPORTED_MODULE_10__.h)().conferencePath;return(0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)((function(){var _latestVersion$data$t,latestVersion=ramda__WEBPACK_IMPORTED_MODULE_4__.Z$Q(blob);switch(type){case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.LiveProgramRooms:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Menu_LeftSidebar_LiveNow__WEBPACK_IMPORTED_MODULE_11__.Z,{});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.ActiveSocialRooms:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Rooms_ActiveSocialRooms__WEBPACK_IMPORTED_MODULE_12__.Z,{});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.Divider:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_16__.iz,{});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.SponsorBooths:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Rooms_SponsorBooths__WEBPACK_IMPORTED_MODULE_13__.default,{});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.ContentGroupList:case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.ExploreProgramButton:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_8__.Qj,{colorScheme:"PrimaryActionButton",to:conferencePath+"/content",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_7__.Z,{iconStyle:"s",icon:"calendar",mr:2}),"Browse content"]});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.WholeSchedule:case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.ExploreScheduleButton:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_8__.Qj,{colorScheme:"PrimaryActionButton",to:conferencePath+"/schedule",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_7__.Z,{iconStyle:"s",icon:"calendar",mr:2}),"Full schedule"]})}if(!latestVersion)return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{});switch(latestVersion.data.type){case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.Abstract:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_16__.W2,{width:"100%",maxW:"50em",mx:0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Chakra_Markdown__WEBPACK_IMPORTED_MODULE_9__.U,{children:latestVersion.data.text})});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.ExternalEventLink:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_8__.bd,{to:latestVersion.data.url,isExternal:!0,colorScheme:"PrimaryActionButton",children:["Go to ",name]});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.Text:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_16__.W2,{width:"100%",maxW:"50em",mx:0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Chakra_Markdown__WEBPACK_IMPORTED_MODULE_9__.U,{children:latestVersion.data.text})});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.VideoUrl:case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.AudioUrl:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_16__.oM,{ratio:16/9,w:"min(100%, 90vh * (16 / 9))",maxW:"800px",m:2,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_player__WEBPACK_IMPORTED_MODULE_6__.Z,{url:latestVersion.data.url,style:{maxWidth:"100%",position:"absolute",top:0,left:0},width:"100%",height:"100%",controls:!0})});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.AudioFile:return latestVersion.data.s3Url.endsWith(".mp3")||latestVersion.data.s3Url.endsWith(".wav")||latestVersion.data.s3Url.endsWith(".ogg")?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_VideoElement__WEBPACK_IMPORTED_MODULE_14__.q,{elementId,elementData:latestVersion.data}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_8__.bd,{to:latestVersion.data.s3Url,isExternal:!0,colorScheme:"PrimaryActionButton",children:name});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.ImageUrl:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_16__.xu,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_17__.Ee,{src:latestVersion.data.url,style:{maxWidth:"100%"},alt:null!==(_latestVersion$data$t=latestVersion.data.title)&&void 0!==_latestVersion$data$t&&_latestVersion$data$t.length?latestVersion.data.title:"Off-site image - no caption provided"})});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.ImageFile:try{var _latestVersion$data$a,_AmazonS3URI=new(amazon_s3_uri__WEBPACK_IMPORTED_MODULE_3___default())(latestVersion.data.s3Url),bucket=_AmazonS3URI.bucket,key=_AmazonS3URI.key;if(!bucket||!key)throw new Error("Missing S3 URI component");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_16__.xu,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_17__.Ee,{src:"https://"+bucket+".s3-"+(void 0).VITE_AWS_REGION+".amazonaws.com/"+key,alt:null!==(_latestVersion$data$a=latestVersion.data.altText)&&void 0!==_latestVersion$data$a&&_latestVersion$data$a.length?latestVersion.data.altText:"No caption provided"})})}catch(e){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:"Invalid image URL."})}case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.Link:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_16__.rU,{href:latestVersion.data.url,children:latestVersion.data.text});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.LinkButton:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_16__.Ug,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_8__.bd,{colorScheme:"PrimaryActionButton",to:latestVersion.data.url,linkProps:{mx:"auto"},whiteSpace:"normal",h:"auto",py:2,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_7__.Z,{iconStyle:"s",icon:"link",mr:2}),latestVersion.data.text]})});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.VideoFile:case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.VideoBroadcast:case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.VideoCountdown:case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.VideoFiller:case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.VideoPrepublish:case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.VideoSponsorsFiller:case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.VideoTitles:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_VideoElement__WEBPACK_IMPORTED_MODULE_14__.q,{elementId,elementData:latestVersion.data,aspectRatio:!0});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.PaperUrl:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_8__.bd,{to:latestVersion.data.url,isExternal:!0,colorScheme:"PrimaryActionButton",children:["Open ",name]});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.PaperLink:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_8__.bd,{to:latestVersion.data.url,isExternal:!0,colorScheme:"PrimaryActionButton",whiteSpace:"normal",h:"auto",py:2,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_7__.Z,{iconStyle:"s",icon:"link",mr:2}),latestVersion.data.text]});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.PaperFile:try{var _AmazonS3URI2=new(amazon_s3_uri__WEBPACK_IMPORTED_MODULE_3___default())(latestVersion.data.s3Url),_bucket=_AmazonS3URI2.bucket,_key=_AmazonS3URI2.key;if(!_bucket||!_key)throw new Error("Missing S3 URI component");var url="https://s3."+(void 0).VITE_AWS_REGION+".amazonaws.com/"+_bucket+"/"+_key;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_8__.bd,{to:url,isExternal:!0,colorScheme:"PrimaryActionButton",children:["Open ",name]})}catch(e){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:"Invalid file URL."})}case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.PosterUrl:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_8__.bd,{to:latestVersion.data.url,isExternal:!0,colorScheme:"PrimaryActionButton",children:["Open ",name]});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.PosterFile:try{var _AmazonS3URI3=new(amazon_s3_uri__WEBPACK_IMPORTED_MODULE_3___default())(latestVersion.data.s3Url),_bucket2=_AmazonS3URI3.bucket,_key2=_AmazonS3URI3.key;if(!_bucket2||!_key2)throw new Error("Missing S3 URI component");var _latestVersion$data$a2,_url="https://s3."+(void 0).VITE_AWS_REGION+".amazonaws.com/"+_bucket2+"/"+_key2;return _key2.endsWith(".jpg")||_key2.endsWith(".gif")||_key2.endsWith(".png")||_key2.endsWith(".jpeg")||_key2.endsWith(".webp")?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_16__.xu,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_17__.Ee,{src:_url,alt:null!==(_latestVersion$data$a2=latestVersion.data.altText)&&void 0!==_latestVersion$data$a2&&_latestVersion$data$a2.length?latestVersion.data.altText:"No caption provided"})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_8__.bd,{to:_url,isExternal:!0,colorScheme:"PrimaryActionButton",children:["Open ",name]})}catch(e){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.Fragment,{children:"Invalid file URL."})}case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.VideoLink:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_8__.bd,{to:latestVersion.data.url,isExternal:!0,colorScheme:"PrimaryActionButton",whiteSpace:"normal",h:"auto",py:2,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_7__.Z,{iconStyle:"s",icon:"video",mr:2}),latestVersion.data.text]});case _midspace_shared_types_content__WEBPACK_IMPORTED_MODULE_2__.bK.AudioLink:return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Chakra_LinkButton__WEBPACK_IMPORTED_MODULE_8__.bd,{to:latestVersion.data.url,isExternal:!0,colorScheme:"PrimaryActionButton",whiteSpace:"normal",h:"auto",py:2,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Chakra_FAIcon__WEBPACK_IMPORTED_MODULE_7__.Z,{iconStyle:"s",icon:"volume-up",mr:2}),latestVersion.data.text]})}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_16__.xu,{children:["Cannot ",name," content."]})}),[blob,type,name,conferencePath,elementId])}try{Element.displayName="Element",Element.__docgenInfo={description:"",displayName:"Element",props:{element:{defaultValue:null,description:"",name:"element",required:!0,type:{name:"ElementDataFragment"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Attend/Content/Element/Element.tsx#Element"]={docgenInfo:Element.__docgenInfo,name:"Element",path:"src/aspects/Conference/Attend/Content/Element/Element.tsx#Element"})}catch(__react_docgen_typescript_loader_error){}},"./src/aspects/Conference/Manage/Content/ManageContent.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>ManageContentV2});__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.from.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.split.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.trim-start.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.reduce.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.function.name.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.includes.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.includes.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.find.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.some.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.pad-start.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.url.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.promise.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.set.js");var chakra_ui_icons_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+icons@1.1.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/icons/dist/chakra-ui-icons.esm.js"),chakra_ui_form_control_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+form-control@1.5.6_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/form-control/dist/chakra-ui-form-control.esm.js"),chakra_ui_button_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+button@1.5.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/button/dist/chakra-ui-button.esm.js"),chakra_ui_input_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+input@1.4.1_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/input/dist/chakra-ui-input.esm.js"),chakra_ui_select_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+select@1.2.6_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/select/dist/chakra-ui-select.esm.js"),chakra_ui_layout_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+layout@1.7.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/layout/dist/chakra-ui-layout.esm.js"),chakra_ui_hooks_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+hooks@1.8.2_react@17.0.2/node_modules/@chakra-ui/hooks/dist/chakra-ui-hooks.esm.js"),chakra_ui_menu_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+menu@1.8.6_381b254eb05ba0b21fa13fc526cde82c/node_modules/@chakra-ui/menu/dist/chakra-ui-menu.esm.js"),chakra_ui_tooltip_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+tooltip@1.4.6_3467197ee0b52af28e4f3b42a3c78b88/node_modules/@chakra-ui/tooltip/dist/chakra-ui-tooltip.esm.js"),auth=__webpack_require__("../packages/shared/shared-types/build/esm/auth.js"),urql_core=__webpack_require__("../node_modules/.pnpm/@urql+core@2.4.1_graphql@15.7.2/node_modules/@urql/core/dist/urql-core.mjs"),papaparse_min=__webpack_require__("../node_modules/.pnpm/papaparse@5.3.1/node_modules/papaparse/papaparse.min.js"),papaparse_min_default=__webpack_require__.n(papaparse_min),es=__webpack_require__("../node_modules/.pnpm/ramda@0.28.0/node_modules/ramda/es/index.js"),react=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),urql_es=__webpack_require__("../node_modules/.pnpm/urql@2.1.3_graphql@15.7.2+react@17.0.2/node_modules/urql/dist/urql.es.js"),v4=__webpack_require__("../node_modules/.pnpm/uuid@8.3.2/node_modules/uuid/dist/esm-browser/v4.js"),graphql=__webpack_require__("./src/generated/graphql.tsx"),LinkButton=__webpack_require__("./src/aspects/Chakra/LinkButton.tsx"),MultiSelect=__webpack_require__("./src/aspects/Chakra/MultiSelect.tsx"),CRUDComponents=__webpack_require__("./src/aspects/CRUDTable2/CRUDComponents.tsx"),CRUDTable2=__webpack_require__("./src/aspects/CRUDTable2/CRUDTable2.tsx"),AuthParameters=__webpack_require__("./src/aspects/GQL/AuthParameters.tsx"),ExtractActualError=__webpack_require__("./src/aspects/GQL/ExtractActualError.ts"),make_context=__webpack_require__("./src/aspects/GQL/make-context.ts"),useQueryErrorToast=__webpack_require__("./src/aspects/GQL/useQueryErrorToast.tsx"),maybeCompare=__webpack_require__("./src/aspects/Utils/maybeCompare.tsx"),useConference=__webpack_require__("./src/aspects/Conference/useConference.tsx"),DashboardPage=__webpack_require__("./src/aspects/Conference/Manage/DashboardPage.tsx"),chakra_ui_toast_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+toast@1.5.4_3467197ee0b52af28e4f3b42a3c78b88/node_modules/@chakra-ui/toast/dist/chakra-ui-toast.esm.js"),chakra_ui_modal_esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.trim.js"),__webpack_require__("../node_modules/.pnpm/@chakra-ui+modal@1.10.7_d24435ba52f1f88b08cc54a1f1d4e56f/node_modules/@chakra-ui/modal/dist/chakra-ui-modal.esm.js")),chakra_ui_number_input_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+number-input@1.4.2_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/number-input/dist/chakra-ui-number-input.esm.js"),chakra_ui_checkbox_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+checkbox@1.6.5_381b254eb05ba0b21fa13fc526cde82c/node_modules/@chakra-ui/checkbox/dist/chakra-ui-checkbox.esm.js"),chakra_ui_alert_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+alert@1.3.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/alert/dist/chakra-ui-alert.esm.js"),content=__webpack_require__("../packages/shared/shared-types/build/esm/content.js"),esm=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.to-iso-string.js"),__webpack_require__("../packages/shared/assert/build/esm/index.js")),amazon_s3_uri=__webpack_require__("../node_modules/.pnpm/amazon-s3-uri@0.1.1/node_modules/amazon-s3-uri/lib/amazon-s3-uri.js"),amazon_s3_uri_default=__webpack_require__.n(amazon_s3_uri),VideoElement=__webpack_require__("./src/aspects/Conference/Attend/Content/Element/VideoElement.tsx"),jsx_runtime=(__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.date.now.js"),__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js"));function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function RefreshSubtitles(_ref){var item=_ref.item,onElementChange=_ref.onElementChange;return(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{my:4,size:"sm",onClick:function onClick(){var latestVersion=es.Z$Q(item.data);(null==latestVersion?void 0:latestVersion.data.baseType)===content.bN.Video&&onElementChange(Object.assign({},item,{data:[].concat(_toConsumableArray(item.data),[{createdAt:Date.now(),createdBy:"user",data:{baseType:latestVersion.data.baseType,s3Url:latestVersion.data.s3Url,type:latestVersion.data.type,broadcastTranscode:void 0,sourceHasEmbeddedSubtitles:void 0,transcode:void 0,subtitles:{}}}])}))},children:"Regenerate subtitles"})}RefreshSubtitles.displayName="RefreshSubtitles";try{RefreshSubtitles.displayName="RefreshSubtitles",RefreshSubtitles.__docgenInfo={description:"",displayName:"RefreshSubtitles",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"ElementDescriptor"}},onElementChange:{defaultValue:null,description:"",name:"onElementChange",required:!0,type:{name:"(_newItem: ElementDescriptor) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Element/Kinds/RefreshSubtitles.tsx#RefreshSubtitles"]={docgenInfo:RefreshSubtitles.__docgenInfo,name:"RefreshSubtitles",path:"src/aspects/Conference/Manage/Content/v2/Element/Kinds/RefreshSubtitles.tsx#RefreshSubtitles"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.join.js");var chakra_ui_spinner_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+spinner@1.2.4_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/spinner/dist/chakra-ui-spinner.esm.js"),lib=__webpack_require__("../node_modules/.pnpm/@uppy+aws-s3-multipart@2.2.0_@uppy+core@2.1.4/node_modules/@uppy/aws-s3-multipart/lib/index.js"),lib_default=__webpack_require__.n(lib),core_lib=__webpack_require__("../node_modules/.pnpm/@uppy+core@2.1.4/node_modules/@uppy/core/lib/index.js"),core_lib_default=__webpack_require__.n(core_lib),formik_esm=(__webpack_require__("../node_modules/.pnpm/@uppy+core@2.1.4/node_modules/@uppy/core/dist/style.css"),__webpack_require__("../node_modules/.pnpm/@uppy+drag-drop@2.0.6_@uppy+core@2.1.4/node_modules/@uppy/drag-drop/dist/style.css"),__webpack_require__("../node_modules/.pnpm/@uppy+status-bar@2.1.2_@uppy+core@2.1.4/node_modules/@uppy/status-bar/dist/style.css"),__webpack_require__("../node_modules/.pnpm/formik@2.2.9_react@17.0.2/node_modules/formik/dist/formik.esm.js")),FAIcon=__webpack_require__("./src/aspects/Chakra/FAIcon.tsx"),UnsavedChangesWarning=__webpack_require__("./src/aspects/LeavingPageWarnings/UnsavedChangesWarning.tsx");function UploadFileForm_Element_toConsumableArray(arr){return function UploadFileForm_Element_arrayWithoutHoles(arr){if(Array.isArray(arr))return UploadFileForm_Element_arrayLikeToArray(arr)}(arr)||function UploadFileForm_Element_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||UploadFileForm_Element_unsupportedIterableToArray(arr)||function UploadFileForm_Element_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||UploadFileForm_Element_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UploadFileForm_Element_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return UploadFileForm_Element_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?UploadFileForm_Element_arrayLikeToArray(o,minLen):void 0}}function UploadFileForm_Element_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var DragDrop=react.lazy((function(){return __webpack_require__.e(6256).then(__webpack_require__.bind(__webpack_require__,"../node_modules/.pnpm/@uppy+react@2.1.2_@uppy+core@2.1.4+react@17.0.2/node_modules/@uppy/react/index.mjs")).then((function(x){return{default:x.DragDrop}}))})),StatusBar=react.lazy((function(){return __webpack_require__.e(6256).then(__webpack_require__.bind(__webpack_require__,"../node_modules/.pnpm/@uppy+react@2.1.2_@uppy+core@2.1.4+react@17.0.2/node_modules/@uppy/react/index.mjs")).then((function(x){return{default:x.StatusBar}}))}));function UploadFileForm_Element(_ref){var item=_ref.item,allowedFileTypes=_ref.allowedFileTypes,onElementChange=_ref.onElementChange,contentBaseType=_ref.contentBaseType,toast=(0,chakra_ui_toast_esm.pm)(),_useState2=_slicedToArray((0,react.useState)([]),2),files=_useState2[0],setFiles=_useState2[1],uppy=(0,react.useMemo)((function(){var uppy=new(core_lib_default())({id:"content-item-upload",meta:{elementId:item.id},allowMultipleUploads:!1,restrictions:{allowedFileTypes,maxNumberOfFiles:1,minNumberOfFiles:1},autoProceed:!1});return uppy.use(lib_default(),{limit:4,companionUrl:"string"==typeof(void 0).VITE_COMPANION_BASE_URL?(void 0).VITE_COMPANION_BASE_URL:""}),uppy}),[allowedFileTypes,item.id]);(0,react.useEffect)((function(){var onUpdateFiles=function onUpdateFiles(){var _step,validNameRegex=/^[a-zA-Z0-9.!*'()\-_ ]+$/,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=UploadFileForm_Element_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(null==uppy?void 0:uppy.getFiles().filter((function(file){return!validNameRegex.test(file.name)})));try{for(_iterator.s();!(_step=_iterator.n()).done;){var invalidFile=_step.value;toast({status:"error",description:"Invalid file name. File names must only contain letters, numbers, spaces and the following special characters: !*'()-_"}),uppy.removeFile(invalidFile.id)}}catch(err){_iterator.e(err)}finally{_iterator.f()}setFiles(uppy.getFiles())};uppy.on("file-added",onUpdateFiles),uppy.on("file-removed",onUpdateFiles);var onError=function onError(err){console.error("Error while uploading file",{err}),toast({status:"error",title:"Error while uploading file",description:err.name+": "+err.message})};uppy.on("error",onError);var onUploadError=function onUploadError(_file,err){console.error("Error while uploading file",{err}),toast({status:"error",title:"Error while uploading file",description:err.name+": "+err.message})};return uppy.on("upload-error",onUploadError),function(){uppy.off("file-added",onUpdateFiles),uppy.off("file-removed",onUpdateFiles),uppy.off("error",onError),uppy.off("upload-error",onUploadError)}}),[toast,uppy]);var latestVersion=(0,react.useMemo)((function(){var _item$data;return null!==(_item$data=item.data)&&void 0!==_item$data&&_item$data.length?item.data[item.data.length-1]:void 0}),[item.data]);return(0,jsx_runtime.jsx)(react.Suspense,{fallback:(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{}),children:(0,jsx_runtime.jsx)(formik_esm.J9,{initialValues:{agree:!1,altText:(null==latestVersion?void 0:latestVersion.data.baseType)===content.bN.File?latestVersion.data.altText:""},onSubmit:function(){var _ref2=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(values){var result,_AmazonS3URI,bucket,key,_values$altText,_e$message;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(uppy){_context.next=2;break}throw new Error("No Uppy instance");case 2:return _context.prev=2,_context.next=5,uppy.upload();case 5:result=_context.sent,_context.next=14;break;case 8:return _context.prev=8,_context.t0=_context.catch(2),console.error("Failed to upload file",_context.t0),toast({status:"error",description:"Failed to upload file. Please try again."}),uppy.reset(),_context.abrupt("return");case 14:if(!(result.failed.length>0||result.successful.length<1)){_context.next=19;break}return console.error("Failed to upload file",result.failed),toast({status:"error",description:"Failed to upload file. Please try again later."}),uppy.reset(),_context.abrupt("return");case 19:_context.prev=19,_AmazonS3URI=new(amazon_s3_uri_default())(result.successful[0].uploadURL),bucket=_AmazonS3URI.bucket,key=_AmazonS3URI.key,esm.h.truthy(bucket),esm.h.truthy(key),toast({status:"success",description:"Uploaded item successfully."}),uppy.reset(),onElementChange&&(contentBaseType===content.bN.Video&&onElementChange(Object.assign({},item,{data:[].concat(UploadFileForm_Element_toConsumableArray(item.data),[{createdAt:Date.now(),createdBy:"user",data:{baseType:content.bN.Video,s3Url:"s3://"+bucket+"/"+key,type:item.typeName,subtitles:{}}}])})),contentBaseType===content.bN.Audio?onElementChange(Object.assign({},item,{data:[].concat(UploadFileForm_Element_toConsumableArray(item.data),[{createdAt:Date.now(),createdBy:"user",data:{baseType:content.bN.Audio,s3Url:"s3://"+bucket+"/"+key,type:item.typeName,subtitles:{}}}])})):contentBaseType===content.bN.File&&onElementChange(Object.assign({},item,{data:[].concat(UploadFileForm_Element_toConsumableArray(item.data),[{createdAt:Date.now(),createdBy:"user",data:{baseType:content.bN.File,s3Url:"s3://"+bucket+"/"+key,type:item.typeName,altText:null!==(_values$altText=values.altText)&&void 0!==_values$altText&&_values$altText.length?values.altText:void 0}}])}))),_context.next=34;break;case 28:return _context.prev=28,_context.t1=_context.catch(19),console.error("Failed to submit item",_context.t1),toast({status:"error",title:"Failed to submit item.",description:null!==(_e$message=null===_context.t1||void 0===_context.t1?void 0:_context.t1.message)&&void 0!==_e$message?_e$message:"Please try again later."}),uppy.reset(),_context.abrupt("return");case 34:case"end":return _context.stop()}}),_callee,null,[[2,8],[19,28]])})));return function(_x){return _ref2.apply(this,arguments)}}(),children:function children(_ref3){var dirty=_ref3.dirty,isSubmitting=_ref3.isSubmitting,isValid=_ref3.isValid;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(UnsavedChangesWarning.Z,{hasUnsavedChanges:dirty}),(0,jsx_runtime.jsxs)(formik_esm.l0,{style:{width:"100%"},children:[(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:!files,isRequired:!0,children:[(0,jsx_runtime.jsx)(DragDrop,{uppy,allowMultipleFiles:!1}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.Q6,{children:["File types: ",allowedFileTypes.join(", ")]})]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.QI,{mb:4,children:files.map((function(file){return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[file.name," ",(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:function onClick(){return null==uppy?void 0:uppy.removeFile(file.id)},children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"times",color:"red.400"})})]},file.id)}))}),(0,jsx_runtime.jsx)(StatusBar,{uppy,hideAfterFinish:!0,hideUploadButton:!0}),contentBaseType===content.bN.File?(0,jsx_runtime.jsx)(formik_esm.gN,{name:"altText",validate:function validate(inValue){var error;return null!=inValue&&inValue.length||(error="Please provide alternative text."),error},children:function children(_ref4){var form=_ref4.form,field=_ref4.field;return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{mb:2,isInvalid:!!form.errors.altText&&!!form.touched.altText,isRequired:!0,mt:5,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Alternative text (for accessibility)"}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,Object.assign({type:"text"},field)),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.J1,{children:form.errors.altText})]})}}):void 0,(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"purple",isLoading:isSubmitting,type:"submit",isDisabled:!isValid||1!==files.length,children:"Upload"})]})]})}})})}UploadFileForm_Element.displayName="UploadFileForm_Element";try{UploadFileFormElement.displayName="UploadFileFormElement",UploadFileFormElement.__docgenInfo={description:"",displayName:"UploadFileFormElement",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"ElementDescriptor"}},allowedFileTypes:{defaultValue:null,description:"",name:"allowedFileTypes",required:!0,type:{name:"string[]"}},onElementChange:{defaultValue:null,description:"",name:"onElementChange",required:!1,type:{name:"((newItem: ElementDescriptor) => void)"}},contentBaseType:{defaultValue:null,description:"",name:"contentBaseType",required:!0,type:{name:"enum",value:[{value:'"file"'},{value:'"video"'},{value:'"audio"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Element/Kinds/UploadFileForm_Element.tsx#UploadFileFormElement"]={docgenInfo:UploadFileFormElement.__docgenInfo,name:"UploadFileFormElement",path:"src/aspects/Conference/Manage/Content/v2/Element/Kinds/UploadFileForm_Element.tsx#UploadFileFormElement"})}catch(__react_docgen_typescript_loader_error){}var srtValidator=__webpack_require__("../node_modules/.pnpm/srt-validator@3.2.4/node_modules/srt-validator/dist/srtValidator.js"),srtValidator_default=__webpack_require__.n(srtValidator);function UploadFileForm_Subtitles_toConsumableArray(arr){return function UploadFileForm_Subtitles_arrayWithoutHoles(arr){if(Array.isArray(arr))return UploadFileForm_Subtitles_arrayLikeToArray(arr)}(arr)||function UploadFileForm_Subtitles_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||UploadFileForm_Subtitles_unsupportedIterableToArray(arr)||function UploadFileForm_Subtitles_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UploadFileForm_Subtitles_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function UploadFileForm_Subtitles_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){UploadFileForm_Subtitles_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){UploadFileForm_Subtitles_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function UploadFileForm_Subtitles_slicedToArray(arr,i){return function UploadFileForm_Subtitles_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function UploadFileForm_Subtitles_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||UploadFileForm_Subtitles_unsupportedIterableToArray(arr,i)||function UploadFileForm_Subtitles_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UploadFileForm_Subtitles_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return UploadFileForm_Subtitles_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?UploadFileForm_Subtitles_arrayLikeToArray(o,minLen):void 0}}function UploadFileForm_Subtitles_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var UploadFileForm_Subtitles_DragDrop=react.lazy((function(){return __webpack_require__.e(6256).then(__webpack_require__.bind(__webpack_require__,"../node_modules/.pnpm/@uppy+react@2.1.2_@uppy+core@2.1.4+react@17.0.2/node_modules/@uppy/react/index.mjs")).then((function(x){return{default:x.DragDrop}}))})),UploadFileForm_Subtitles_StatusBar=react.lazy((function(){return __webpack_require__.e(6256).then(__webpack_require__.bind(__webpack_require__,"../node_modules/.pnpm/@uppy+react@2.1.2_@uppy+core@2.1.4+react@17.0.2/node_modules/@uppy/react/index.mjs")).then((function(x){return{default:x.StatusBar}}))}));function UploadFileForm_Subtitles(_ref){var item=_ref.item,onElementChange=_ref.onElementChange,contentBaseType=_ref.contentBaseType,toast=(0,chakra_ui_toast_esm.pm)(),_useState2=UploadFileForm_Subtitles_slicedToArray((0,react.useState)([]),2),files=_useState2[0],setFiles=_useState2[1],_useState4=UploadFileForm_Subtitles_slicedToArray((0,react.useState)([]),2),srtProblems=_useState4[0],setSrtProblems=_useState4[1];(0,react.useEffect)((function(){function _fn(){return(_fn=UploadFileForm_Subtitles_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var srtString,errors;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(0!==files.length){_context.next=3;break}return setSrtProblems([]),_context.abrupt("return");case 3:return _context.next=5,files[0].data.text();case 5:srtString=_context.sent,errors=srtValidator_default()(srtString),setSrtProblems(errors);case 8:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}!function fn(){return _fn.apply(this,arguments)}()}),[files]);var uppy=(0,react.useMemo)((function(){var uppy=new(core_lib_default())({id:"subtitles-upload",meta:{elementId:item.id},allowMultipleUploads:!1,restrictions:{allowedFileTypes:[".srt"],maxNumberOfFiles:1,minNumberOfFiles:1},autoProceed:!1});return null==uppy||uppy.use(lib_default(),{limit:4,companionUrl:"string"==typeof(void 0).VITE_COMPANION_BASE_URL?(void 0).VITE_COMPANION_BASE_URL:""}),uppy}),[item.id]),updateFiles=(0,react.useCallback)((function(){var validNameRegex=/^[a-zA-Z0-9.!*'()\-_ ]+$/;if(uppy){var _step,_iterator=function UploadFileForm_Subtitles_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=UploadFileForm_Subtitles_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(null==uppy?void 0:uppy.getFiles().filter((function(file){return!validNameRegex.test(file.name)})));try{for(_iterator.s();!(_step=_iterator.n()).done;){var invalidFile=_step.value;toast({status:"error",description:"Invalid file name. File names must only contain letters, numbers, spaces and the following special characters: !*'()-_"}),uppy.removeFile(invalidFile.id)}}catch(err){_iterator.e(err)}finally{_iterator.f()}setFiles(uppy.getFiles())}}),[toast,uppy]);(0,react.useEffect)((function(){null==uppy||uppy.on("file-added",updateFiles),null==uppy||uppy.on("file-removed",updateFiles)}),[toast,updateFiles,uppy]);var latestVersionData=(0,react.useMemo)((function(){var _latest$data$subtitle,_latest$data$subtitle2,latest=es.Z$Q(item.data);return!latest||latest.data.baseType!==content.bN.Video&&latest.data.baseType!==content.bN.Audio?null:latest.data.subtitles.en_US&&null!==(_latest$data$subtitle=latest.data.subtitles.en_US)&&void 0!==_latest$data$subtitle&&null!==(_latest$data$subtitle2=_latest$data$subtitle.s3Url)&&void 0!==_latest$data$subtitle2&&_latest$data$subtitle2.length&&latest.data.subtitles.en_US.status===content.RR.Completed?latest.data:null}),[item.data]);return latestVersionData?(0,jsx_runtime.jsx)(react.Suspense,{fallback:(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{}),children:(0,jsx_runtime.jsx)(formik_esm.J9,{initialValues:{},onSubmit:function(){var _ref2=UploadFileForm_Subtitles_asyncToGenerator(regeneratorRuntime.mark((function _callee2(_values){var result,_AmazonS3URI,bucket,key,_e$message;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(uppy){_context2.next=2;break}throw new Error("No Uppy instance");case 2:return _context2.prev=2,_context2.next=5,uppy.upload();case 5:result=_context2.sent,_context2.next=14;break;case 8:return _context2.prev=8,_context2.t0=_context2.catch(2),console.error("Failed to upload subtitles",_context2.t0),toast({status:"error",description:"Failed to upload subtitles. Please try again."}),uppy.reset(),_context2.abrupt("return");case 14:if(!(result.failed.length>0||result.successful.length<1)){_context2.next=19;break}return console.error("Failed to upload subtitles",result.failed),toast({status:"error",description:"Failed to upload subtitles. Please try again later."}),uppy.reset(),_context2.abrupt("return");case 19:if(_context2.prev=19,_AmazonS3URI=new(amazon_s3_uri_default())(result.successful[0].uploadURL),bucket=_AmazonS3URI.bucket,key=_AmazonS3URI.key,esm.h.truthy(bucket),esm.h.truthy(key),toast({status:"success",description:"Uploaded subtitles successfully."}),uppy.reset(),!onElementChange){_context2.next=31;break}if(contentBaseType===content.bN.Video||contentBaseType===content.bN.Audio){_context2.next=28;break}throw new Error("Content has wrong base type "+contentBaseType);case 28:if(latestVersionData){_context2.next=30;break}throw new Error("Content does not have a valid existing version");case 30:onElementChange(Object.assign({},item,{data:[].concat(UploadFileForm_Subtitles_toConsumableArray(item.data),[{createdAt:Date.now(),createdBy:"user",data:Object.assign({},latestVersionData,{subtitles:{en_US:{s3Url:"s3://"+bucket+"/"+key,status:content.RR.Completed}}})}])}));case 31:_context2.next=39;break;case 33:return _context2.prev=33,_context2.t1=_context2.catch(19),console.error("Failed to submit item",_context2.t1),toast({status:"error",title:"Failed to submit item.",description:null!==(_e$message=null===_context2.t1||void 0===_context2.t1?void 0:_context2.t1.message)&&void 0!==_e$message?_e$message:"Please try again later."}),uppy.reset(),_context2.abrupt("return");case 39:case"end":return _context2.stop()}}),_callee2,null,[[2,8],[19,33]])})));return function(_x){return _ref2.apply(this,arguments)}}(),children:function children(_ref3){var dirty=_ref3.dirty,isSubmitting=_ref3.isSubmitting,isValid=_ref3.isValid;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h3",fontSize:"lg",pt:4,mb:4,children:"Upload new subtitles"}),(0,jsx_runtime.jsx)(UnsavedChangesWarning.Z,{hasUnsavedChanges:dirty}),(0,jsx_runtime.jsxs)(formik_esm.l0,{style:{width:"100%"},children:[(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{isInvalid:!files,isRequired:!0,children:[(0,jsx_runtime.jsx)(UploadFileForm_Subtitles_DragDrop,{uppy,allowMultipleFiles:!1}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{children:"Subtitles must be in SRT format."})]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.QI,{mb:2,children:files.map((function(file){return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[file.name," ",(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:function onClick(){return null==uppy?void 0:uppy.removeFile(file.id)},children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"times",color:"red.400"})})]},file.id)}))}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.aV,{mb:2,children:srtProblems.map((function(problem,idx){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{children:["Error (",problem.errorCode,") on line ",problem.lineNumber,": ",problem.message]})},idx)}))}),(0,jsx_runtime.jsx)(UploadFileForm_Subtitles_StatusBar,{uppy,hideAfterFinish:!0,hideUploadButton:!0}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{mt:2,colorScheme:"purple",isLoading:isSubmitting,type:"submit",isDisabled:!isValid||1!==files.length||srtProblems.length>0,children:"Upload"})]})]})}})}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})}try{UploadFileFormSubtitles.displayName="UploadFileFormSubtitles",UploadFileFormSubtitles.__docgenInfo={description:"",displayName:"UploadFileFormSubtitles",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"ElementDescriptor"}},onElementChange:{defaultValue:null,description:"",name:"onElementChange",required:!1,type:{name:"((newItem: ElementDescriptor) => void)"}},contentBaseType:{defaultValue:null,description:"",name:"contentBaseType",required:!0,type:{name:"enum",value:[{value:'"video"'},{value:'"audio"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Element/Kinds/UploadFileForm_Subtitles.tsx#UploadFileFormSubtitles"]={docgenInfo:UploadFileFormSubtitles.__docgenInfo,name:"UploadFileFormSubtitles",path:"src/aspects/Conference/Manage/Content/v2/Element/Kinds/UploadFileForm_Subtitles.tsx#UploadFileFormSubtitles"})}catch(__react_docgen_typescript_loader_error){}var AudioElementTemplate={supported:!0,allowCreate:[graphql.bK7.AudioFile],createDefault:function createDefault(type,conferenceId,subconferenceId,itemId){esm.h.truthy(type===graphql.bK7.AudioFile,"Audio Element Template mistakenly used for type "+type+".");return{__typename:"content_Element",updatedAt:(new Date).toISOString(),conferenceId,subconferenceId,itemId,id:(0,v4.Z)(),name:"Audio",typeName:type,isHidden:!1,data:[],layoutData:null,uploadsRemaining:3}},renderEditor:function AudioElementEditor(_ref){var _latestVersion$data$s,data=_ref.data,update=_ref.update;if(data.typeName!==graphql.bK7.AudioFile)return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Audio Element Template mistakenly used for type ",data.typeName,"."]});var s3Url,_AmazonS3Uri,latestVersion=data.data[data.data.length-1];return latestVersion&&latestVersion.data.baseType!==content.bN.Audio?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Audio Element Template mistakenly used for base type ",latestVersion.data.baseType,"."]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(null==latestVersion?void 0:latestVersion.data.baseType)===content.bN.Audio?(0,jsx_runtime.jsx)(VideoElement.q,{elementId:data.id,elementData:latestVersion.data}):void 0,(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h3",fontSize:"lg",pt:8,mb:4,children:"Upload new audio"}),(0,jsx_runtime.jsx)(UploadFileForm_Element,{allowedFileTypes:["audio/mp3","audio/ogg","audio/flac","audio/wav"],item:data,onElementChange:function onElementChange(newElement){var newData=Object.assign({},data,newElement);update(newData)},contentBaseType:content.bN.Audio}),(0,jsx_runtime.jsx)(UploadFileForm_Subtitles,{item:data,onElementChange:function onElementChange(newElement){var newData=Object.assign({},data,newElement);update(newData)},contentBaseType:content.bN.Audio}),(0,jsx_runtime.jsx)(RefreshSubtitles,{item:data,onElementChange:function onElementChange(newElement){var newData=Object.assign({},data,newElement);update(newData)}}),(null==latestVersion?void 0:latestVersion.data.baseType)===content.bN.Audio&&null!==(_latestVersion$data$s=latestVersion.data.subtitles.en_US)&&void 0!==_latestVersion$data$s&&_latestVersion$data$s.s3Url?(0,jsx_runtime.jsx)(LinkButton.o6,{to:(s3Url=latestVersion.data.subtitles.en_US.s3Url,_AmazonS3Uri=amazon_s3_uri_default()(s3Url),"https://"+_AmazonS3Uri.bucket+".s3.eu-west-1.amazonaws.com/"+_AmazonS3Uri.key),size:"sm",ml:2,children:"Download .SRT file"}):void 0]})},renderEditorHeading:function AudioElementEditorHeading(data){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:data.name})}},ComponentElementTemplate={supported:!0,allowCreate:[graphql.bK7.ContentGroupList,graphql.bK7.WholeSchedule,graphql.bK7.ExploreProgramButton,graphql.bK7.ExploreScheduleButton,graphql.bK7.LiveProgramRooms,graphql.bK7.ActiveSocialRooms,graphql.bK7.Divider,graphql.bK7.SponsorBooths],createDefault:function createDefault(type,conferenceId,subconferenceId,itemId){esm.h.truthy(type===graphql.bK7.ContentGroupList||type===graphql.bK7.WholeSchedule||type===graphql.bK7.LiveProgramRooms||type===graphql.bK7.ActiveSocialRooms||type===graphql.bK7.Divider||type===graphql.bK7.SponsorBooths||type===graphql.bK7.ExploreProgramButton||type===graphql.bK7.ExploreScheduleButton,"Component Element Template mistakenly used for type "+type+".");var nameStr=type.toLowerCase().split("_").reduce((function(acc,x){return acc+" "+x}));return{__typename:"content_Element",conferenceId,subconferenceId,itemId,updatedAt:(new Date).toISOString(),id:(0,v4.Z)(),name:nameStr[0].toUpperCase()+nameStr.substr(1),typeName:type,isHidden:!1,data:[],layoutData:null,uploadsRemaining:null}},renderEditor:function LinkElementEditor(_ref){var data=_ref.data;return data.typeName!==graphql.bK7.ContentGroupList&&data.typeName!==graphql.bK7.WholeSchedule&&data.typeName!==graphql.bK7.LiveProgramRooms&&data.typeName!==graphql.bK7.ActiveSocialRooms&&data.typeName!==graphql.bK7.Divider&&data.typeName!==graphql.bK7.SponsorBooths&&data.typeName!==graphql.bK7.ExploreProgramButton&&data.typeName!==graphql.bK7.ExploreScheduleButton?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Component Element Template mistakenly used for type ",data.typeName,"."]}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})},renderEditorHeading:function LinkElementEditorHeading(data){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:data.name})}},chakra_ui_image_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+image@1.1.5_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/image/dist/chakra-ui-image.esm.js"),FileElementTemplate={supported:!0,allowCreate:[graphql.bK7.ImageFile,graphql.bK7.PaperFile,graphql.bK7.PosterFile],createDefault:function createDefault(type,conferenceId,subconferenceId,itemId){esm.h.truthy(type===graphql.bK7.ImageFile||type===graphql.bK7.PaperFile||type===graphql.bK7.PosterFile,"File Element Template mistakenly used for type "+type+".");var name=type===graphql.bK7.ImageFile?"Image":type===graphql.bK7.PaperFile?"Document":type===graphql.bK7.PosterFile?"Poster":"File";return{__typename:"content_Element",updatedAt:(new Date).toISOString(),id:(0,v4.Z)(),name,typeName:type,isHidden:!1,data:[],layoutData:null,conferenceId,subconferenceId,itemId,uploadsRemaining:3}},renderEditor:function FileElementEditor(_ref){var _altText,data=_ref.data,update=_ref.update;if(data.typeName!==graphql.bK7.ImageFile&&data.typeName!==graphql.bK7.PosterFile&&data.typeName!==graphql.bK7.PaperFile)return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["File Element Template mistakenly used for type ",data.typeName,"."]});var latestVersion=data.data[data.data.length-1];if(latestVersion&&latestVersion.data.baseType!==content.bN.File)return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["File Element Template mistakenly used for base type ",latestVersion.data.baseType,"."]});var fileSrc=void 0,altText=void 0;if(latestVersion&&latestVersion.data.baseType===content.bN.File&&""!==latestVersion.data.s3Url){altText=latestVersion.data.altText;try{var _AmazonS3URI=new(amazon_s3_uri_default())(latestVersion.data.s3Url),bucket=_AmazonS3URI.bucket,key=_AmazonS3URI.key;fileSrc="https://s3."+(void 0).VITE_AWS_REGION+".amazonaws.com/"+bucket+"/"+key}catch(_unused){}}return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[fileSrc?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{pb:4,children:data.typeName===graphql.bK7.ImageFile||data.typeName===graphql.bK7.PosterFile?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h3",fontSize:"lg",mt:4,mb:4,children:"Current file"}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.M5,{children:(0,jsx_runtime.jsx)(chakra_ui_image_esm.Ee,{src:fileSrc,maxH:200,alt:null!==(_altText=altText)&&void 0!==_altText?_altText:"No caption provided."})})]}):(0,jsx_runtime.jsx)(LinkButton.bd,{to:fileSrc,isExternal:!0,children:"Current file"})})}):void 0,(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h3",fontSize:"lg",my:4,textAlign:"left",alignSelf:"flex-start",children:"Upload new file"}),(0,jsx_runtime.jsx)(UploadFileForm_Element,{allowedFileTypes:data.typeName===graphql.bK7.ImageFile||data.typeName===graphql.bK7.PosterFile?["image/png","image/jpeg","image/gif","image/webp"]:[".pdf"],item:data,onElementChange:function onElementChange(newElement){var newData=Object.assign({},data,newElement);update(newData)},contentBaseType:content.bN.File})]})},renderEditorHeading:function FileElementEditorHeading(data){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:data.name})}};__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.index-of.js");function LinkElement_toConsumableArray(arr){return function LinkElement_arrayWithoutHoles(arr){if(Array.isArray(arr))return LinkElement_arrayLikeToArray(arr)}(arr)||function LinkElement_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||LinkElement_unsupportedIterableToArray(arr)||function LinkElement_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LinkElement_slicedToArray(arr,i){return function LinkElement_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function LinkElement_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||LinkElement_unsupportedIterableToArray(arr,i)||function LinkElement_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LinkElement_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return LinkElement_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?LinkElement_arrayLikeToArray(o,minLen):void 0}}function LinkElement_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var LinkElementTemplate={supported:!0,allowCreate:[graphql.bK7.LinkButton,graphql.bK7.PaperLink,graphql.bK7.VideoLink],createDefault:function createDefault(type,conferenceId,subconferenceId,itemId){esm.h.truthy(type===graphql.bK7.Link||type===graphql.bK7.LinkButton||type===graphql.bK7.PaperLink||type===graphql.bK7.VideoLink,"Link Element Template mistakenly used for type "+type+".");var name=type===graphql.bK7.LinkButton?"Link Button":type===graphql.bK7.PaperLink?"Link to paper":type===graphql.bK7.VideoLink?"Link to video":"Link";return{__typename:"content_Element",updatedAt:(new Date).toISOString(),conferenceId,subconferenceId,itemId,id:(0,v4.Z)(),name,typeName:type,isHidden:!1,data:[],layoutData:null,uploadsRemaining:3}},renderEditor:function LinkElementEditor(_ref){var _ref2,_ref3,data=_ref.data,update=_ref.update,toast=(0,chakra_ui_toast_esm.pm)(),_useState2=LinkElement_slicedToArray((0,react.useState)(null),2),text=_useState2[0],setText=_useState2[1],_useState4=LinkElement_slicedToArray((0,react.useState)(null),2),url=_useState4[0],setUrl=_useState4[1];if(data.typeName!==graphql.bK7.Link&&data.typeName!==graphql.bK7.LinkButton&&data.typeName!==graphql.bK7.PaperLink&&data.typeName!==graphql.bK7.VideoLink)return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Link Element Template mistakenly used for type ",data.typeName,"."]});var textPlaceholder=data.typeName===graphql.bK7.LinkButton?"Button text":data.typeName===graphql.bK7.PaperLink?"Paper title":data.typeName===graphql.bK7.VideoLink?"Video title":"Link title",textLabel=textPlaceholder,urlPlaceholder=data.typeName===graphql.bK7.LinkButton?"https://www.example.org":data.typeName===graphql.bK7.PaperLink?"https://archive.org/...":data.typeName===graphql.bK7.VideoLink?"https://youtube.com/...":"https://www.example.org",latestVersion=data.data[data.data.length-1];return latestVersion&&latestVersion.data.baseType!==content.bN.Link?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Link Element Template mistakenly used for base type ",latestVersion.data.baseType,"."]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:textLabel}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,{type:"text",placeholder:textPlaceholder,value:null!==(_ref2=null!=text?text:null==latestVersion?void 0:latestVersion.data.text)&&void 0!==_ref2?_ref2:"",onChange:function onChange(ev){setText(ev.target.value)},onBlur:function onBlur(ev){try{if(ev.target.value===(null==latestVersion?void 0:latestVersion.data.text))return;var oldElementIdx=data.data.indexOf(latestVersion),newData=Object.assign({},data,{data:-1===oldElementIdx?[].concat(LinkElement_toConsumableArray(data.data),[{createdAt:Date.now(),createdBy:"user",data:{baseType:content.bN.Link,type:data.typeName,text:ev.target.value,url:""}}]):data.data.map((function(version,idx){return idx===oldElementIdx?Object.assign({},version,{data:Object.assign({},version.data,{text:ev.target.value})}):version}))});update(newData),setText(null)}catch(e){console.error("Error saving link text",e),toast({status:"error",title:"Error saving link text",description:e.message})}}})]}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"URL"}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,{type:"url",placeholder:urlPlaceholder,value:null!==(_ref3=null!=url?url:null==latestVersion?void 0:latestVersion.data.url)&&void 0!==_ref3?_ref3:"",onChange:function onChange(ev){setUrl(ev.target.value)},onBlur:function onBlur(ev){try{if(ev.target.value===(null==latestVersion?void 0:latestVersion.data.url))return;var oldElementIdx=data.data.indexOf(latestVersion),newData=Object.assign({},data,{data:-1===oldElementIdx?[].concat(LinkElement_toConsumableArray(data.data),[{createdAt:Date.now(),createdBy:"user",data:{baseType:content.bN.Link,type:data.typeName,text:ev.target.value,url:ev.target.value}}]):data.data.map((function(version,idx){return idx===oldElementIdx?Object.assign({},version,{data:Object.assign({},version.data,{url:ev.target.value})}):version}))});update(newData),setUrl(null)}catch(e){console.error("Error saving link URL",e),toast({status:"error",title:"Error saving link URL",description:e.message})}}})]})]})},renderEditorHeading:function LinkElementEditorHeading(data){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:data.name})}},chakra_ui_textarea_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+textarea@1.2.6_d5de66fc214059f645050e36d066c00a/node_modules/@chakra-ui/textarea/dist/chakra-ui-textarea.esm.js");function TextElement_toConsumableArray(arr){return function TextElement_arrayWithoutHoles(arr){if(Array.isArray(arr))return TextElement_arrayLikeToArray(arr)}(arr)||function TextElement_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||TextElement_unsupportedIterableToArray(arr)||function TextElement_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TextElement_slicedToArray(arr,i){return function TextElement_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function TextElement_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||TextElement_unsupportedIterableToArray(arr,i)||function TextElement_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TextElement_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return TextElement_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?TextElement_arrayLikeToArray(o,minLen):void 0}}function TextElement_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var TextElementTemplate={supported:!0,allowCreate:[graphql.bK7.Abstract,graphql.bK7.Text],createDefault:function createDefault(type,conferenceId,subconferenceId,itemId){esm.h.truthy(type===graphql.bK7.Abstract||type===graphql.bK7.Text,"Text Element Template mistakenly used for type "+type+".");var name=type[0]+type.toLowerCase().substr(1);return{__typename:"content_Element",updatedAt:(new Date).toISOString(),conferenceId,subconferenceId,itemId,id:(0,v4.Z)(),name,typeName:type,isHidden:!1,data:[],layoutData:null,uploadsRemaining:3}},renderEditor:function TextElementEditor(_ref){var _ref2,data=_ref.data,update=_ref.update,toast=(0,chakra_ui_toast_esm.pm)(),_useState2=TextElement_slicedToArray((0,react.useState)(null),2),text=_useState2[0],setText=_useState2[1];if(data.typeName!==graphql.bK7.Abstract&&data.typeName!==graphql.bK7.Text)return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Text Element Template mistakenly used for type ",data.typeName,"."]});var placeholder=data.typeName===graphql.bK7.Abstract?"Abstract":"Text",latestVersion=data.data[data.data.length-1];return latestVersion&&latestVersion.data.baseType!==content.bN.Text?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Text Element Template mistakenly used for base type ",latestVersion.data.baseType,"."]}):(0,jsx_runtime.jsx)(chakra_ui_textarea_esm.g,{transition:"none",placeholder,value:null!==(_ref2=null!=text?text:null==latestVersion?void 0:latestVersion.data.text)&&void 0!==_ref2?_ref2:"",onChange:function onChange(ev){setText(ev.target.value)},onBlur:function onBlur(ev){try{if(ev.target.value===(null==latestVersion?void 0:latestVersion.data.text))return;var oldElementIdx=data.data.indexOf(latestVersion),newData=Object.assign({},data,{data:-1===oldElementIdx?[].concat(TextElement_toConsumableArray(data.data),[{createdAt:Date.now(),createdBy:"user",data:{baseType:content.bN.Text,type:data.typeName,text:ev.target.value}}]):data.data.map((function(version,idx){return idx===oldElementIdx?Object.assign({},version,{data:Object.assign({},version.data,{text:ev.target.value})}):version}))});update(newData),setText(null)}catch(e){console.error("Error saving text",e),toast({status:"error",title:"Error saving text",description:e.message})}}})},renderEditorHeading:function TextElementEditorHeading(data){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:data.name})}};function URLElement_toConsumableArray(arr){return function URLElement_arrayWithoutHoles(arr){if(Array.isArray(arr))return URLElement_arrayLikeToArray(arr)}(arr)||function URLElement_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||URLElement_unsupportedIterableToArray(arr)||function URLElement_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function URLElement_slicedToArray(arr,i){return function URLElement_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function URLElement_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||URLElement_unsupportedIterableToArray(arr,i)||function URLElement_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function URLElement_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return URLElement_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?URLElement_arrayLikeToArray(o,minLen):void 0}}function URLElement_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var URLElementTemplate={supported:!0,allowCreate:[graphql.bK7.ImageUrl,graphql.bK7.PaperUrl,graphql.bK7.VideoUrl,graphql.bK7.PosterUrl,graphql.bK7.ExternalEventLink],createDefault:function createDefault(type,conferenceId,subconferenceId,itemId){esm.h.truthy(type===graphql.bK7.ImageUrl||type===graphql.bK7.PaperUrl||type===graphql.bK7.VideoUrl||type===graphql.bK7.PosterUrl||type===graphql.bK7.ExternalEventLink,"URL Element Template mistakenly used for type "+type+".");var name=type===graphql.bK7.ImageUrl?"Image":type===graphql.bK7.PaperUrl?"Paper":type===graphql.bK7.VideoUrl?"Video":type===graphql.bK7.ExternalEventLink?"External Event":"Poster";return{__typename:"content_Element",updatedAt:(new Date).toISOString(),conferenceId,subconferenceId,itemId,id:(0,v4.Z)(),name,typeName:type,isHidden:type===graphql.bK7.ExternalEventLink,data:[],layoutData:null,uploadsRemaining:3}},renderEditor:function URLElementEditor(_ref){var _ref2,_ref3,data=_ref.data,update=_ref.update,toast=(0,chakra_ui_toast_esm.pm)(),_useState2=URLElement_slicedToArray((0,react.useState)(null),2),url=_useState2[0],setUrl=_useState2[1],_useState4=URLElement_slicedToArray((0,react.useState)(null),2),title=_useState4[0],setTitle=_useState4[1],notice=data.typeName===graphql.bK7.ExternalEventLink?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{pb:4,children:"External meeting links should normally be hidden from attendees. They will be automatically revealed during events."}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{pb:4,children:"External meeting links should be the ordinary link obtained using Copy link within Zoom or other meeting application. This should include the password field, enabling attendees to join with a single click."})]}):void 0;if(data.typeName!==graphql.bK7.ImageUrl&&data.typeName!==graphql.bK7.PaperUrl&&data.typeName!==graphql.bK7.VideoUrl&&data.typeName!==graphql.bK7.PosterUrl&&data.typeName!==graphql.bK7.ExternalEventLink)return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["URL Element Template mistakenly used for type ",data.typeName,"."]});var urlPlaceholder=data.typeName===graphql.bK7.ImageUrl?"https://www.example.org/an-image.png":data.typeName===graphql.bK7.PaperUrl?"https://ia800600.us.archive.org/7/items/archive_IHGC/Thesis.pdf":data.typeName===graphql.bK7.VideoUrl?"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4":data.typeName===graphql.bK7.ExternalEventLink?"https://zoom.us/j/12345678901?pwd=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX":"https://www.example.org/a-poster.pdf",latestVersion=data.data[data.data.length-1];return latestVersion&&latestVersion.data.baseType!==content.bN.URL?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["URL Element Template mistakenly used for base type ",latestVersion.data.baseType,"."]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[notice,(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"URL"}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,{type:"url",placeholder:urlPlaceholder,value:null!==(_ref2=null!=url?url:null==latestVersion?void 0:latestVersion.data.url)&&void 0!==_ref2?_ref2:"",onChange:function onChange(ev){setUrl(ev.target.value)},onBlur:function onBlur(ev){try{if(ev.target.value===(null==latestVersion?void 0:latestVersion.data.url))return;var oldElementIdx=data.data.indexOf(latestVersion),newData=Object.assign({},data,{data:-1===oldElementIdx?[].concat(URLElement_toConsumableArray(data.data),[{createdAt:Date.now(),createdBy:"user",data:{baseType:content.bN.URL,type:data.typeName,url:ev.target.value}}]):data.data.map((function(version,idx){return idx===oldElementIdx?Object.assign({},version,{data:Object.assign({},version.data,{url:ev.target.value})}):version}))});update(newData),setUrl(null)}catch(e){console.error("Error saving URL",e),toast({status:"error",title:"Error saving URL",description:e.message})}}})]}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{mt:2,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"URL title (for accessibility)"}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,{type:"text",placeholder:"",value:null!==(_ref3=null!=title?title:null==latestVersion?void 0:latestVersion.data.title)&&void 0!==_ref3?_ref3:"",onChange:function onChange(ev){setTitle(ev.target.value)},onBlur:function onBlur(ev){try{if(ev.target.value===(null==latestVersion?void 0:latestVersion.data.title))return;var oldElementIdx=data.data.indexOf(latestVersion),newData=Object.assign({},data,{data:-1===oldElementIdx?[].concat(URLElement_toConsumableArray(data.data),[{createdAt:Date.now(),createdBy:"user",data:{baseType:content.bN.URL,type:data.typeName,title:ev.target.value}}]):data.data.map((function(version,idx){return idx===oldElementIdx?Object.assign({},version,{data:Object.assign({},version.data,{title:ev.target.value})}):version}))});update(newData),setUrl(null)}catch(e){console.error("Error saving URL title",e),toast({status:"error",title:"Error saving URL title",description:e.message})}}})]})]})},renderEditorHeading:function URLElementEditorHeading(data){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:data.name})}};var _ElementBaseTemplates,_templateObject,VideoElementTemplate={supported:!0,allowCreate:[graphql.bK7.VideoBroadcast,graphql.bK7.VideoFile],createDefault:function createDefault(type,conferenceId,subconferenceId,itemId){esm.h.truthy(type===graphql.bK7.VideoBroadcast||type===graphql.bK7.VideoCountdown||type===graphql.bK7.VideoFile||type===graphql.bK7.VideoFiller||type===graphql.bK7.VideoPrepublish||type===graphql.bK7.VideoSponsorsFiller||type===graphql.bK7.VideoTitles,"Video Element Template mistakenly used for type "+type+".");var name=type===graphql.bK7.VideoBroadcast?"Video for live-stream":type===graphql.bK7.VideoCountdown?"Timer countdown video":type===graphql.bK7.VideoFile?"Video":type===graphql.bK7.VideoFiller?"Filler video":type===graphql.bK7.VideoPrepublish?"Pre-published video":type===graphql.bK7.VideoSponsorsFiller?"Sponsors video":"Titles video";return{__typename:"content_Element",updatedAt:(new Date).toISOString(),conferenceId,subconferenceId,itemId,id:(0,v4.Z)(),name,typeName:type,isHidden:!1,data:[],layoutData:null,uploadsRemaining:3}},renderEditor:function VideoElementEditor(_ref){var _latestVersion$data$s,data=_ref.data,update=_ref.update;if(data.typeName!==graphql.bK7.VideoBroadcast&&data.typeName!==graphql.bK7.VideoCountdown&&data.typeName!==graphql.bK7.VideoFile&&data.typeName!==graphql.bK7.VideoFiller&&data.typeName!==graphql.bK7.VideoPrepublish&&data.typeName!==graphql.bK7.VideoSponsorsFiller&&data.typeName!==graphql.bK7.VideoTitles)return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Video Element Template mistakenly used for type ",data.typeName,"."]});var s3Url,_AmazonS3Uri,latestVersion=data.data[data.data.length-1];return latestVersion&&latestVersion.data.baseType!==content.bN.Video?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Video Element Template mistakenly used for base type ",latestVersion.data.baseType,"."]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(null==latestVersion?void 0:latestVersion.data.baseType)===content.bN.Video?(0,jsx_runtime.jsx)(VideoElement.q,{elementId:data.id,elementData:latestVersion.data}):void 0,(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h3",fontSize:"lg",pt:8,mb:4,children:"Upload new video"}),(0,jsx_runtime.jsx)(UploadFileForm_Element,{allowedFileTypes:["video/mp4","video/webm"],item:data,onElementChange:function onElementChange(newElement){var newData=Object.assign({},data,newElement);update(newData)},contentBaseType:content.bN.Video}),(0,jsx_runtime.jsx)(UploadFileForm_Subtitles,{item:data,onElementChange:function onElementChange(newElement){var newData=Object.assign({},data,newElement);update(newData)},contentBaseType:content.bN.Video}),(0,jsx_runtime.jsx)(RefreshSubtitles,{item:data,onElementChange:function onElementChange(newElement){var newData=Object.assign({},data,newElement);update(newData)}}),(null==latestVersion?void 0:latestVersion.data.baseType)===content.bN.Video&&null!==(_latestVersion$data$s=latestVersion.data.subtitles.en_US)&&void 0!==_latestVersion$data$s&&_latestVersion$data$s.s3Url?(0,jsx_runtime.jsx)(LinkButton.o6,{to:(s3Url=latestVersion.data.subtitles.en_US.s3Url,_AmazonS3Uri=amazon_s3_uri_default()(s3Url),"https://"+_AmazonS3Uri.bucket+".s3.eu-west-1.amazonaws.com/"+_AmazonS3Uri.key),size:"sm",ml:2,children:"Download .SRT file"}):void 0]})},renderEditorHeading:function VideoElementEditorHeading(data){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:data.name})}},ElementBaseTemplates=((_ElementBaseTemplates={})[content.bN.File]=FileElementTemplate,_ElementBaseTemplates[content.bN.Component]=ComponentElementTemplate,_ElementBaseTemplates[content.bN.Link]=LinkElementTemplate,_ElementBaseTemplates[content.bN.Text]=TextElementTemplate,_ElementBaseTemplates[content.bN.URL]=URLElementTemplate,_ElementBaseTemplates[content.bN.Video]=VideoElementTemplate,_ElementBaseTemplates[content.bN.Audio]=AudioElementTemplate,_ElementBaseTemplates);function AddElementsModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function AddElementsModal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){AddElementsModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){AddElementsModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function AddElementsModal_slicedToArray(arr,i){return function AddElementsModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function AddElementsModal_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function AddElementsModal_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return AddElementsModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AddElementsModal_arrayLikeToArray(o,minLen)}(arr,i)||function AddElementsModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AddElementsModal_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function AddElementsModal(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,items=_ref.items;return(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.u_,{isOpen,onClose,children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ZA,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.hz,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.xB,{children:"Add elements"}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ol,{}),isOpen?(0,jsx_runtime.jsx)(ModalInner,{items,onClose}):void 0]})]})}function ModalInner(_ref2){var _insertResponse$data2,onClose=_ref2.onClose,items=_ref2.items,contentTypeOptions=(0,react.useMemo)((function(){return Object.keys(graphql.bK7).filter((function(key){if("string"==typeof graphql.bK7[key]){var t=graphql.bK7[key],baseT=ElementBaseTemplates[content.M4[t]];return baseT.supported&&baseT.allowCreate.includes(t)}return!1})).map((function(key){var v=graphql.bK7[key];return{label:v.split("_").map((function(x){return x[0]+x.substr(1).toLowerCase()})).reduce((function(acc,x){return acc+" "+x})),value:v}}))}),[]),_useState2=AddElementsModal_slicedToArray((0,react.useState)(""),2),elementType=_useState2[0],setElementType=_useState2[1],_useState4=AddElementsModal_slicedToArray((0,react.useState)(""),2),name=_useState4[0],setName=_useState4[1],_useState6=AddElementsModal_slicedToArray((0,react.useState)(3),2),uploadsRemaining=_useState6[0],setUploadsRemaining=_useState6[1],_useState8=AddElementsModal_slicedToArray((0,react.useState)(!1),2),hidden=_useState8[0],setHidden=_useState8[1],_useState10=AddElementsModal_slicedToArray((0,react.useState)(!0),2),wide=_useState10[0],setWide=_useState10[1],_useState12=AddElementsModal_slicedToArray((0,react.useState)(100),2),priority=_useState12[0],setPriority=_useState12[1],_useBulkEdit_AddEleme2=AddElementsModal_slicedToArray((0,graphql.uOy)(),2),insertResponse=_useBulkEdit_AddEleme2[0],insert=_useBulkEdit_AddEleme2[1],toast=(0,chakra_ui_toast_esm.pm)();return(0,react.useEffect)((function(){var _insertResponse$data;!insertResponse.fetching&&null!==(_insertResponse$data=insertResponse.data)&&void 0!==_insertResponse$data&&_insertResponse$data.insert_content_Element&&insertResponse.data.insert_content_Element.affected_rows>0&&!insertResponse.error&&(toast({status:"success",title:insertResponse.data.insert_content_Element.affected_rows+" elements inserted",duration:1e4,isClosable:!0,position:"top"}),onClose())}),[toast,onClose,insertResponse.fetching,null===(_insertResponse$data2=insertResponse.data)||void 0===_insertResponse$data2?void 0:_insertResponse$data2.insert_content_Element,insertResponse.error]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.fe,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{spacing:4,children:[(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Element type"}),(0,jsx_runtime.jsxs)(chakra_ui_select_esm.Ph,{value:elementType,onChange:function onChange(ev){setElementType(ev.target.value)},children:[(0,jsx_runtime.jsx)("option",{value:"",children:"Please select a type"}),contentTypeOptions.map((function(option){return(0,jsx_runtime.jsx)("option",{value:option.value,children:option.label},option.value)}))]})]}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Element name"}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,{value:name,onChange:function onChange(ev){setName(ev.target.value)}})]}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Uploads remaining"}),(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Y2,{max:3,min:0,value:uploadsRemaining,onChange:function onChange(_v,v){setUploadsRemaining(v)},children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.zu,{}),(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Fi,{children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.WQ,{}),(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.Y_,{})]})]})]}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Hidden?"}),(0,jsx_runtime.jsx)(chakra_ui_checkbox_esm.XZ,{isChecked:hidden,onChange:function onChange(ev){setHidden(ev.target.checked)}})]}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Layout: Wide?"}),(0,jsx_runtime.jsx)(chakra_ui_checkbox_esm.XZ,{isChecked:wide,onChange:function onChange(ev){setWide(ev.target.checked)}})]}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Layout: Priority"}),(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Y2,{min:0,value:priority,onChange:function onChange(_v,v){setPriority(v)},children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.zu,{}),(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Fi,{children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.WQ,{}),(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.Y_,{})]})]})]}),insertResponse.error?(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,{status:"error",children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.Cd,{children:"Error inserting elements"}),(0,jsx_runtime.jsx)(chakra_ui_alert_esm.X,{children:insertResponse.error.message})]}):void 0]})}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.mz,{children:(0,jsx_runtime.jsxs)(chakra_ui_button_esm.hE,{children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{size:"sm",mr:3,onClick:onClose,children:"Close"}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{size:"sm",mr:3,onClick:AddElementsModal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _items$,_headers,objects;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:""!==elementType&&(objects=items.map((function(item){var layoutData={contentType:elementType,wide,priority};return{conferenceId:item.conferenceId,subconferenceId:item.subconferenceId,data:[],isHidden:hidden,itemId:item.id,layoutData,name,typeName:elementType,uploadsRemaining}})),insert({objects},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=null!==(_items$=items[0])&&void 0!==_items$&&_items$.subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers)}}));case 1:case"end":return _context.stop()}}),_callee)}))),colorScheme:"purple",isDisabled:""===elementType||""===name.trim(),isLoading:insertResponse.fetching,children:"Add elements"})]})})]})}(0,urql_core.Ps)(_templateObject||(_templateObject=function _taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation BulkEdit_AddElements($objects: [content_Element_insert_input!]!) {\n        insert_content_Element(objects: $objects) {\n            affected_rows\n        }\n    }\n"]))),AddElementsModal.displayName="AddElementsModal";try{AddElementsModal.displayName="AddElementsModal",AddElementsModal.__docgenInfo={description:"",displayName:"AddElementsModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"readonly ManageContent_ItemFragment[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/BulkOperations/AddElementsModal.tsx#AddElementsModal"]={docgenInfo:AddElementsModal.__docgenInfo,name:"AddElementsModal",path:"src/aspects/Conference/Manage/Content/v2/BulkOperations/AddElementsModal.tsx#AddElementsModal"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.object.entries.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.sort.js");var CombineVideosModal_templateObject,useCurrentRegistrant=__webpack_require__("./src/aspects/Conference/useCurrentRegistrant.tsx");function CombineVideosModal_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=CombineVideosModal_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function CombineVideosModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function CombineVideosModal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){CombineVideosModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){CombineVideosModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function CombineVideosModal_slicedToArray(arr,i){return function CombineVideosModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function CombineVideosModal_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||CombineVideosModal_unsupportedIterableToArray(arr,i)||function CombineVideosModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CombineVideosModal_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return CombineVideosModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?CombineVideosModal_arrayLikeToArray(o,minLen):void 0}}function CombineVideosModal_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function CombineVideosModal(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,elementsByItem=_ref.elementsByItem;return(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.u_,{isOpen,onClose,scrollBehavior:"inside",size:"6xl",children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ZA,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.hz,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.xB,{children:"Combine videos"}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ol,{}),isOpen?(0,jsx_runtime.jsx)(CombineVideosModal_ModalInner,{elementsByItem,onClose}):void 0]})]})}function CombineVideosModal_ModalInner(_ref2){var _combineVideosRespons2,onClose=_ref2.onClose,elementsByItem=_ref2.elementsByItem,elementIds_Flat=(0,react.useMemo)((function(){return es.xHg(elementsByItem.map((function(x){return x.elementIds})))}),[elementsByItem]),itemIds=(0,react.useMemo)((function(){return elementsByItem.map((function(x){return x.itemId}))}),[elementsByItem]),conference=(0,useConference.fk)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[subconferenceId]),combineVideosResponse=CombineVideosModal_slicedToArray((0,graphql.Ij4)({variables:{conferenceId:conference.id,subconferenceCond:subconferenceId?{_eq:subconferenceId}:{_is_null:!0}},requestPolicy:"network-only",context}),1)[0],elementsResponse=CombineVideosModal_slicedToArray((0,graphql.fRQ)({variables:{itemIds,elementIds:elementIds_Flat},requestPolicy:"network-only",context}),1)[0],alreadyBeingCombined=(0,react.useMemo)((function(){var _combineVideosRespons;return null!==(_combineVideosRespons=combineVideosResponse.data)&&void 0!==_combineVideosRespons&&_combineVideosRespons.job_queues_CombineVideosJob?es.xHg(combineVideosResponse.data.job_queues_CombineVideosJob.map((function(x){return x.data.inputElements.map((function(x){return x.elementId}))}))):null}),[null===(_combineVideosRespons2=combineVideosResponse.data)||void 0===_combineVideosRespons2?void 0:_combineVideosRespons2.job_queues_CombineVideosJob]),returnedElementsByItem=(0,react.useMemo)((function(){return elementsResponse.data?Object.entries(es.vMG((function(x){return x.itemId}),elementsResponse.data.content_Element)).map((function(_ref3){var _elementsResponse$dat,_ref4=CombineVideosModal_slicedToArray(_ref3,2),itemId=_ref4[0],filteredElements=_ref4[1].filter((function(el){if(null!=alreadyBeingCombined&&alreadyBeingCombined.includes(el.id))return!1;if((0,content.Cp)(el.data)){var db=el.data,latestVersion=es.Z$Q(db);if((null==latestVersion?void 0:latestVersion.data.baseType)===content.bN.Video){if(latestVersion.data.broadcastTranscode)return!!latestVersion.data.broadcastTranscode.s3Url;if(latestVersion.data.transcode)return!!latestVersion.data.transcode.s3Url;if(latestVersion.data.s3Url)return!0}}return!1}));return{item:null===(_elementsResponse$dat=elementsResponse.data)||void 0===_elementsResponse$dat?void 0:_elementsResponse$dat.content_Item.find((function(x){return x.id===itemId})),elements:filteredElements.sort((function(x,y){return Date.parse(x.createdAt)-Date.parse(y.createdAt)}))}})).filter((function(_ref5){var item=_ref5.item,elements=_ref5.elements;return item&&elements.length>1})):null}),[elementsResponse.data,alreadyBeingCombined]),registrant=(0,useCurrentRegistrant.ZP)(),toast=(0,chakra_ui_toast_esm.pm)(),mutate=CombineVideosModal_slicedToArray((0,graphql.GAY)(),2)[1],onCombine=(0,react.useCallback)(CombineVideosModal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _iterator,_step,_headers,_result$data,_ref7,elements,parts,data,result;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!returnedElementsByItem){_context.next=32;break}_context.prev=1,_iterator=CombineVideosModal_createForOfIteratorHelper(returnedElementsByItem),_context.prev=3,_iterator.s();case 5:if((_step=_iterator.n()).done){_context.next=17;break}return _ref7=_step.value,elements=_ref7.elements,parts=elements.map((function(el){return{elementId:el.id,includeSubtitles:!1}})),data={inputElements:parts},_context.next=12,mutate({conferenceId:conference.id,createdByRegistrantId:registrant.id,outputName:"Combined video",data},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers)}});case 12:if(result=_context.sent,null!==(_result$data=result.data)&&void 0!==_result$data&&_result$data.insert_job_queues_CombineVideosJob_one){_context.next=15;break}throw new Error("Failed to create CombineVideosJob");case 15:_context.next=5;break;case 17:_context.next=22;break;case 19:_context.prev=19,_context.t0=_context.catch(3),_iterator.e(_context.t0);case 22:return _context.prev=22,_iterator.f(),_context.finish(22);case 25:_context.next=31;break;case 27:_context.prev=27,_context.t1=_context.catch(1),console.error("Failed to submit CombineVideosJob",_context.t1),toast({status:"error",title:"Failed to submit job",description:_context.t1.message});case 31:onClose();case 32:case"end":return _context.stop()}}),_callee,null,[[1,27],[3,19,22,25]])}))),[returnedElementsByItem,onClose,mutate,conference.id,registrant.id,subconferenceId,toast]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.fe,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{spacing:4,children:[elementsResponse.fetching&&!elementsResponse.data||combineVideosResponse.fetching&&!combineVideosResponse.data?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{label:"Loading element information"}):void 0,alreadyBeingCombined&&alreadyBeingCombined.length>0?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{w:"100%",children:"Some elements have been excluded as they are part of ongoing jobs. It can take several hours to process videos - please check individual items later for the final results."}):void 0,returnedElementsByItem?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{fontWeight:"bold",w:"100%",children:[returnedElementsByItem.length," items containing elements to be combined"]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.QI,{spacing:2,pl:4,w:"100%",children:returnedElementsByItem.map((function(_ref8){var item=_ref8.item,elements=_ref8.elements;return item?(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{fontWeight:"bold",children:item.title}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{children:[elements.length," videos to be combined"]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:es.iDB(" followed by ",elements.map((function(x){return x.name}))).reduce((function(acc,x){return acc+x}),"")})]},item.id):void 0}))})]}):void 0]})}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.mz,{children:(0,jsx_runtime.jsxs)(chakra_ui_button_esm.hE,{children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{mr:3,onClick:onClose,children:"Close"}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{mr:3,onClick:onCombine,colorScheme:"purple",isDisabled:!returnedElementsByItem||0===returnedElementsByItem.length,children:"Combine"})]})})]})}CombineVideosModal.displayName="CombineVideosModal",(0,urql_core.Ps)(CombineVideosModal_templateObject||(CombineVideosModal_templateObject=function CombineVideosModal_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation CombineVideosModal_CreateCombineVideosJob(\n        $conferenceId: uuid!\n        $subconferenceId: uuid\n        $createdByRegistrantId: uuid!\n        $outputName: String!\n        $data: jsonb!\n    ) {\n        insert_job_queues_CombineVideosJob_one(\n            object: {\n                conferenceId: $conferenceId\n                subconferenceId: $subconferenceId\n                createdByRegistrantId: $createdByRegistrantId\n                outputName: $outputName\n                data: $data\n            }\n        ) {\n            id\n        }\n    }\n\n    query CombineVideosModal_GetCombineVideosJob($conferenceId: uuid!, $subconferenceCond: uuid_comparison_exp!) {\n        job_queues_CombineVideosJob(\n            where: {\n                conferenceId: { _eq: $conferenceId }\n                subconferenceId: $subconferenceCond\n                jobStatusName: { _in: [NEW, IN_PROGRESS] }\n            }\n        ) {\n            id\n            message\n            jobStatusName\n            data\n            conferenceId\n        }\n    }\n\n    query CombineVideosModal_GetElements($itemIds: [uuid!]!, $elementIds: [uuid!]!) {\n        content_Item(where: { id: { _in: $itemIds } }) {\n            id\n            title\n        }\n        content_Element(where: { id: { _in: $elementIds } }) {\n            id\n            createdAt\n            itemId\n            data\n            name\n        }\n    }\n"])));try{CombineVideosModal.displayName="CombineVideosModal",CombineVideosModal.__docgenInfo={description:"",displayName:"CombineVideosModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},elementsByItem:{defaultValue:null,description:"",name:"elementsByItem",required:!0,type:{name:"{ itemId: string; elementIds: string[]; }[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/BulkOperations/CombineVideosModal.tsx#CombineVideosModal"]={docgenInfo:CombineVideosModal.__docgenInfo,name:"CombineVideosModal",path:"src/aspects/Conference/Manage/Content/v2/BulkOperations/CombineVideosModal.tsx#CombineVideosModal"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/web.timers.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.every.js");var SelectElementsModal_templateObject,chakra_ui_system_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+system@1.10.3_922a85da57e3646a57465b7970b0de85/node_modules/@chakra-ui/system/dist/chakra-ui-system.esm.js");function SelectElementsModal_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=SelectElementsModal_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function SelectElementsModal_slicedToArray(arr,i){return function SelectElementsModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function SelectElementsModal_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||SelectElementsModal_unsupportedIterableToArray(arr,i)||function SelectElementsModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SelectElementsModal_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return SelectElementsModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SelectElementsModal_arrayLikeToArray(o,minLen):void 0}}function SelectElementsModal_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function SelectElementsModal(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,items=_ref.items,onSelect=_ref.onSelect,restrictToTypes=_ref.restrictToTypes;return(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.u_,{isOpen,onClose,size:"6xl",children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ZA,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.hz,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.xB,{children:"Select items or elements"}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ol,{}),isOpen?(0,jsx_runtime.jsx)(SelectElementsModal_ModalInner,{items,onClose,onSelect,restrictToTypes}):void 0]})]})}function SelectElementsModal_ModalInner(_ref2){var _infos$data2,onClose=_ref2.onClose,items=_ref2.items,onSelect=_ref2.onSelect,restrictToTypes=_ref2.restrictToTypes,itemIds=(0,react.useMemo)((function(){return items.map((function(x){return x.id}))}),[items]),context=(0,react.useMemo)((function(){var _items$,_makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=null!==(_items$=items[0])&&void 0!==_items$&&_items$.subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[items]),infos=SelectElementsModal_slicedToArray((0,graphql.cB$)({variables:{itemIds},requestPolicy:"network-only",context}),1)[0],contentTypeOptions=(0,react.useMemo)((function(){return Object.keys(graphql.bK7).reduce((function(acc,key){var v=graphql.bK7[key];return(null===restrictToTypes||restrictToTypes.includes(v))&&acc.push({label:v.split("_").map((function(x){return x[0]+x.substr(1).toLowerCase()})).reduce((function(acc,x){return acc+" "+x})),value:v}),acc}),[])}),[restrictToTypes]),_useState2=SelectElementsModal_slicedToArray((0,react.useState)([]),2),typeFilter=_useState2[0],setTypeFilter=_useState2[1],typeSelect=(0,react.useMemo)((function(){return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Filter by element type"}),(0,jsx_runtime.jsx)(MultiSelect.ZP,{options:contentTypeOptions,value:typeFilter,onChange:function onChange(vs){return setTypeFilter(vs)}}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{children:"Leave blank to include all types."})]})}),[contentTypeOptions,typeFilter]),nameOptions=(0,react.useMemo)((function(){var elementNames=new Set;if(infos.data){var _step,_iterator=SelectElementsModal_createForOfIteratorHelper(infos.data.content_Item);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step2,_iterator2=SelectElementsModal_createForOfIteratorHelper(_step.value.elements);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _element=_step2.value;elementNames.add(_element.name)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}catch(err){_iterator.e(err)}finally{_iterator.f()}}var _step3,result=[],_iterator3=SelectElementsModal_createForOfIteratorHelper(elementNames);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var name=_step3.value;result.push({label:name,value:name})}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return result}),[infos.data]),_useState4=SelectElementsModal_slicedToArray((0,react.useState)(""),2),titleFilter=_useState4[0],setTitleFilter=_useState4[1],titleInput=(0,react.useMemo)((function(){return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Filter by item title"}),(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,{value:titleFilter,onChange:function onChange(ev){return setTitleFilter(ev.target.value)}}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{children:"Leave blank to include all titles."})]})}),[titleFilter]),_useState6=SelectElementsModal_slicedToArray((0,react.useState)([]),2),nameFilter=_useState6[0],setNameFilter=_useState6[1],nameSelect=(0,react.useMemo)((function(){return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Filter by element name"}),(0,jsx_runtime.jsx)(MultiSelect.ZP,{options:nameOptions,value:nameFilter,onChange:function onChange(vs){return setNameFilter(vs)}}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{children:"Leave blank to include all names."})]})}),[nameOptions,nameFilter]),_useState8=SelectElementsModal_slicedToArray((0,react.useState)("BOTH"),2),includeUploadedFilter=_useState8[0],setIncludeUploadedFilter=_useState8[1],includeUploaded=(0,react.useMemo)((function(){return(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Include submitted?"}),(0,jsx_runtime.jsxs)(chakra_ui_select_esm.Ph,{value:includeUploadedFilter,onChange:function onChange(ev){setIncludeUploadedFilter(ev.target.value)},children:[(0,jsx_runtime.jsx)("option",{value:"BOTH",children:"Elements with or without submission"}),(0,jsx_runtime.jsx)("option",{value:"WITH",children:"Only elements with a submission"}),(0,jsx_runtime.jsx)("option",{value:"WITHOUT",children:"Only elements without a submission"})]}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{children:"Include elements that have received a submission."})]})}),[includeUploadedFilter]),elementTests=(0,react.useMemo)((function(){return[function(x){return null===restrictToTypes||restrictToTypes.some((function(y){return y===x.typeName}))},function(x){return 0===typeFilter.length||typeFilter.some((function(y){return y.value===x.typeName}))},function(x){return 0===nameFilter.length||nameFilter.some((function(y){return y.value===x.name}))},function(x){var _x$data,_x$data2;return"BOTH"===includeUploadedFilter||"WITH"===includeUploadedFilter&&(null===(_x$data=x.data)||void 0===_x$data?void 0:_x$data.length)||"WITHOUT"===includeUploadedFilter&&!(null!==(_x$data2=x.data)&&void 0!==_x$data2&&_x$data2.length)}]}),[includeUploadedFilter,nameFilter,restrictToTypes,typeFilter]),_useState10=SelectElementsModal_slicedToArray((0,react.useState)([]),2),filteredItems=_useState10[0],setFilteredItems=_useState10[1];(0,react.useEffect)((function(){var _infos$data,tId;if(null!==(_infos$data=infos.data)&&void 0!==_infos$data&&_infos$data.content_Item){var _items=infos.data.content_Item;tId=setTimeout((function(){setFilteredItems(_items.reduce((function(result,item){if(item.title.toLowerCase().includes(titleFilter.toLowerCase())){var _step4,resultElements=[],_loop=function _loop(_element2){elementTests.every((function(pred){return pred(_element2)}))&&resultElements.push(_element2)},_iterator4=SelectElementsModal_createForOfIteratorHelper(item.elements);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){_loop(_step4.value)}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}resultElements.length>0&&result.push(Object.assign({},item,{elements:resultElements}))}return result}),[]))}),500)}return function(){void 0!==tId&&clearTimeout(tId)}}),[elementTests,null===(_infos$data2=infos.data)||void 0===_infos$data2?void 0:_infos$data2.content_Item,titleFilter]);var _useMemo=(0,react.useMemo)((function(){return{listItems:filteredItems.map((function(item){return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{mb:2,children:[(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{noOfLines:1,children:item.title}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.QI,{listStylePosition:"inside",children:item.elements.map((function(element){var _element$data;return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[element.name," ("+(null!==(_element$data=element.data)&&void 0!==_element$data&&_element$data.length?"Submitted":"Not submitted")+")"]},element.id)}))})]},item.id)})),elementsCount:filteredItems.reduce((function(count,item){return count+item.elements.length}),0)}}),[filteredItems]),listItems=_useMemo.listItems,elementsCount=_useMemo.elementsCount;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.fe,{children:[infos.fetching&&!infos.data?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{label:"Loading elements"}):void 0,infos.data?(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{flexWrap:"wrap",alignItems:"stretch",justifyContent:"space-between",children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{spacing:4,flex:"1 1 48%",minW:400,mb:10,children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h3",fontSize:"md",children:"Filter options"}),titleInput,nameSelect,typeSelect,includeUploaded]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.iz,{m:0,h:"unset",orientation:"vertical"}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{spacing:4,flex:"1 1 48%",children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h3",fontSize:"md",children:"Filtered elements"}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{children:[filteredItems.length," items (",elementsCount," elements)"]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.QI,{listStyleType:"none",maxH:"70vh",overflow:"auto",children:listItems})]})]}):void 0]}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.mz,{children:(0,jsx_runtime.jsxs)(chakra_ui_button_esm.hE,{children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{size:"sm",mr:3,onClick:onClose,children:"Close"}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"pink",size:"sm",mr:3,onClick:function onClick(){onSelect(filteredItems.map((function(item){return{itemId:item.id,elementIds:item.elements.map((function(y){return y.id}))}})))},children:"Select"})]})})]})}(0,urql_core.Ps)(SelectElementsModal_templateObject||(SelectElementsModal_templateObject=function SelectElementsModal_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    fragment SelectElements_Item on content_Item {\n        id\n        title\n        elements {\n            ...SelectElements_Element\n        }\n    }\n\n    fragment SelectElements_Element on content_Element {\n        id\n        name\n        typeName\n        itemId\n        data\n    }\n\n    query SEoUM_Infos($itemIds: [uuid!]!) {\n        content_Item(where: { id: { _in: $itemIds } }) {\n            ...SelectElements_Item\n        }\n    }\n"]))),SelectElementsModal.displayName="SelectElementsModal";try{SelectElementsModal.displayName="SelectElementsModal",SelectElementsModal.__docgenInfo={description:"",displayName:"SelectElementsModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"readonly ManageContent_ItemFragment[]"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(elementsByItem: { itemId: string; elementIds: string[]; }[]) => void"}},restrictToTypes:{defaultValue:null,description:"",name:"restrictToTypes",required:!0,type:{name:"Content_ElementType_Enum[] | null"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/BulkOperations/SelectElementsModal.tsx#SelectElementsModal"]={docgenInfo:SelectElementsModal.__docgenInfo,name:"SelectElementsModal",path:"src/aspects/Conference/Manage/Content/v2/BulkOperations/SelectElementsModal.tsx#SelectElementsModal"})}catch(__react_docgen_typescript_loader_error){}var UpdateExhibitionDescriptiveItemsModal_templateObject,CenteredSpinner=__webpack_require__("./src/aspects/Chakra/CenteredSpinner.tsx");function UpdateExhibitionDescriptiveItemsModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function UpdateExhibitionDescriptiveItemsModal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){UpdateExhibitionDescriptiveItemsModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){UpdateExhibitionDescriptiveItemsModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function UpdateExhibitionDescriptiveItemsModal_createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=UpdateExhibitionDescriptiveItemsModal_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function UpdateExhibitionDescriptiveItemsModal_slicedToArray(arr,i){return function UpdateExhibitionDescriptiveItemsModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function UpdateExhibitionDescriptiveItemsModal_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||UpdateExhibitionDescriptiveItemsModal_unsupportedIterableToArray(arr,i)||function UpdateExhibitionDescriptiveItemsModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UpdateExhibitionDescriptiveItemsModal_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return UpdateExhibitionDescriptiveItemsModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?UpdateExhibitionDescriptiveItemsModal_arrayLikeToArray(o,minLen):void 0}}function UpdateExhibitionDescriptiveItemsModal_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function UpdateExhibitionDescriptiveItemsModal(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,items=_ref.items;return(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.u_,{isOpen,onClose,children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ZA,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.hz,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.xB,{children:"Update exhibition descriptive items"}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ol,{}),isOpen?(0,jsx_runtime.jsx)(UpdateExhibitionDescriptiveItemsModal_ModalInner,{items,onClose}):void 0]})]})}function UpdateExhibitionDescriptiveItemsModal_ModalInner(_ref2){var onClose=_ref2.onClose,items=_ref2.items,conference=(0,useConference.fk)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[subconferenceId]),exhibitionsResponse=UpdateExhibitionDescriptiveItemsModal_slicedToArray((0,graphql.Vag)({variables:{conferenceId:conference.id,subconferenceCond:subconferenceId?{_eq:subconferenceId}:{_is_null:!0}},requestPolicy:"network-only",context}),1)[0],_useUpdateExhibitionD4=UpdateExhibitionDescriptiveItemsModal_slicedToArray((0,graphql.esb)(),2),updateResponse=_useUpdateExhibitionD4[0],doUpdate=_useUpdateExhibitionD4[1],_useState2=UpdateExhibitionDescriptiveItemsModal_slicedToArray((0,react.useState)(0),2),updatedCount=_useState2[0],setUpdatedCount=_useState2[1],exhibitionMatches=(0,react.useMemo)((function(){var results=[];if(exhibitionsResponse.data){var _step,_loop=function _loop(exhibition){var nameMatch=exhibition.name.toLowerCase(),item=items.find((function(item){return item.title.toLowerCase()===nameMatch}));item&&results.push({id:exhibition.id,itemId:item.id})},_iterator=UpdateExhibitionDescriptiveItemsModal_createForOfIteratorHelper(exhibitionsResponse.data.collection_Exhibition);try{for(_iterator.s();!(_step=_iterator.n()).done;){_loop(_step.value)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return results}),[exhibitionsResponse.data,items]),update=(0,react.useCallback)(UpdateExhibitionDescriptiveItemsModal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _iterator2,_step2,_headers,match;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:_context.prev=0,setUpdatedCount(0),_iterator2=UpdateExhibitionDescriptiveItemsModal_createForOfIteratorHelper(exhibitionMatches),_context.prev=3,_iterator2.s();case 5:if((_step2=_iterator2.n()).done){_context.next=12;break}return match=_step2.value,_context.next=9,doUpdate({id:match.id,descriptiveItemId:match.itemId},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers)}});case 9:setUpdatedCount((function(count){return count+1}));case 10:_context.next=5;break;case 12:_context.next=17;break;case 14:_context.prev=14,_context.t0=_context.catch(3),_iterator2.e(_context.t0);case 17:return _context.prev=17,_iterator2.f(),_context.finish(17);case 20:onClose(),_context.next=26;break;case 23:_context.prev=23,_context.t1=_context.catch(0),console.error("Failed to update exhibition descriptive item",_context.t1);case 26:case"end":return _context.stop()}}),_callee,null,[[0,23],[3,14,17,20]])}))),[doUpdate,exhibitionMatches,onClose,subconferenceId]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.fe,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"This will set the descriptive item of any exhibition that currently lacks a descriptive item and where a corresponding content exists with a title matching the exhibition name."}),exhibitionsResponse.fetching?(0,jsx_runtime.jsx)(CenteredSpinner.Z,{caller:"UpdateExhibitionDescriptiveItemsModal:146"}):void 0,(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{mt:4,children:[exhibitionMatches.length," new matches found."]}),updatedCount>0?(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{mt:4,children:[updatedCount," updated."]}):void 0]}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.mz,{children:(0,jsx_runtime.jsxs)(chakra_ui_button_esm.hE,{spacing:2,children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:onClose,children:"Cancel"}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"purple",isDisabled:0===exhibitionMatches.length,isLoading:updateResponse.fetching,onClick:update,children:"Update"})]})})]})}(0,urql_core.Ps)(UpdateExhibitionDescriptiveItemsModal_templateObject||(UpdateExhibitionDescriptiveItemsModal_templateObject=function UpdateExhibitionDescriptiveItemsModal_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query UpdateExhibitionDescriptiveItems_SelectExhibitions(\n        $conferenceId: uuid!\n        $subconferenceCond: uuid_comparison_exp!\n    ) {\n        collection_Exhibition(\n            where: {\n                conferenceId: { _eq: $conferenceId }\n                subconferenceId: $subconferenceCond\n                descriptiveItemId: { _is_null: true }\n            }\n        ) {\n            id\n            name\n            conferenceId\n            descriptiveItemId\n        }\n    }\n\n    mutation UpdateExhibitionDescriptiveItem($id: uuid!, $descriptiveItemId: uuid!) {\n        update_collection_Exhibition_by_pk(pk_columns: { id: $id }, _set: { descriptiveItemId: $descriptiveItemId }) {\n            id\n            descriptiveItemId\n        }\n    }\n"]))),UpdateExhibitionDescriptiveItemsModal.displayName="UpdateExhibitionDescriptiveItemsModal";try{UpdateExhibitionDescriptiveItemsModal.displayName="UpdateExhibitionDescriptiveItemsModal",UpdateExhibitionDescriptiveItemsModal.__docgenInfo={description:"",displayName:"UpdateExhibitionDescriptiveItemsModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"readonly ManageContent_ItemFragment[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/BulkOperations/UpdateExhibitionDescriptiveItemsModal.tsx#UpdateExhibitionDescriptiveItemsModal"]={docgenInfo:UpdateExhibitionDescriptiveItemsModal.__docgenInfo,name:"UpdateExhibitionDescriptiveItemsModal",path:"src/aspects/Conference/Manage/Content/v2/BulkOperations/UpdateExhibitionDescriptiveItemsModal.tsx#UpdateExhibitionDescriptiveItemsModal"})}catch(__react_docgen_typescript_loader_error){}var UpdateLayoutModal_templateObject;__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.flat-map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.array.unscopables.flat-map.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.parse-int.js");function UpdateLayoutModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function UpdateLayoutModal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){UpdateLayoutModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){UpdateLayoutModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function UpdateLayoutModal_slicedToArray(arr,i){return function UpdateLayoutModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function UpdateLayoutModal_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function UpdateLayoutModal_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return UpdateLayoutModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UpdateLayoutModal_arrayLikeToArray(o,minLen)}(arr,i)||function UpdateLayoutModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UpdateLayoutModal_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function UpdateLayoutModal(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,elementsByItem=_ref.elementsByItem;return(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.u_,{isOpen,onClose,children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ZA,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.hz,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.xB,{children:"Update layout"}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ol,{}),isOpen?(0,jsx_runtime.jsx)(UpdateLayoutModal_ModalInner,{elementsByItem,onClose}):void 0]})]})}function UpdateLayoutModal_ModalInner(_ref2){var onClose=_ref2.onClose,elementsByItem=_ref2.elementsByItem,subconferenceId=(0,AuthParameters.h)().subconferenceId,_useState2=UpdateLayoutModal_slicedToArray((0,react.useState)(null),2),hidden=_useState2[0],setHidden=_useState2[1],_useState4=UpdateLayoutModal_slicedToArray((0,react.useState)(null),2),wide=_useState4[0],setWide=_useState4[1],_useState6=UpdateLayoutModal_slicedToArray((0,react.useState)(null),2),priority=_useState6[0],setPriority=_useState6[1],_useUpdateLayoutMutat2=UpdateLayoutModal_slicedToArray((0,graphql.RkM)(),2),updateResponse=_useUpdateLayoutMutat2[0],doUpdate=_useUpdateLayoutMutat2[1],_useUpdateIsHiddenMut2=UpdateLayoutModal_slicedToArray((0,graphql.gLt)(),2),updateIsHiddenResponse=_useUpdateIsHiddenMut2[0],doUpdateIsHidden=_useUpdateIsHiddenMut2[1],update=(0,react.useCallback)(UpdateLayoutModal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _headers2,layoutData,_headers;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_context.prev=0,layoutData={},null===hidden){_context.next=5;break}return _context.next=5,doUpdateIsHidden({elementIds:elementsByItem.flatMap((function(x){return x.elementIds})),isHidden:hidden},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers)}});case 5:return null!==wide&&(layoutData.wide=wide),null!==priority&&""!==priority.trim()&&(layoutData.priority=parseInt(priority,10)),_context.next=9,doUpdate({elementIds:elementsByItem.flatMap((function(x){return x.elementIds})),layoutData},{fetchOptions:{headers:(_headers2={},_headers2[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers2)}});case 9:onClose(),_context.next=15;break;case 12:_context.prev=12,_context.t0=_context.catch(0),console.error("Failed to element layouts",_context.t0);case 15:case"end":return _context.stop()}}),_callee,null,[[0,12]])}))),[hidden,wide,priority,doUpdate,elementsByItem,subconferenceId,onClose,doUpdateIsHidden]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.fe,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{spacing:4,children:[(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Hidden?"}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{spacing:2,children:[(0,jsx_runtime.jsx)(chakra_ui_checkbox_esm.XZ,{isChecked:null!=hidden&&hidden,isIndeterminate:null===hidden,onChange:function onChange(ev){setHidden(ev.target.checked)}}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:function onClick(){setHidden(null)},size:"xs",isDisabled:null===hidden,children:"Reset"})]}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{children:"To leave this field unchanged for all elements, leave the checkbox indeterminate."})]}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Layout: Wide?"}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{spacing:2,children:[(0,jsx_runtime.jsx)(chakra_ui_checkbox_esm.XZ,{isChecked:null!=wide&&wide,isIndeterminate:null===wide,onChange:function onChange(ev){setWide(ev.target.checked)}}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:function onClick(){setWide(null)},size:"xs",mx:2,isDisabled:null===wide,children:"Reset"})]}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{children:"To leave this field unchanged for all elements, leave the checkbox indeterminate."})]}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Layout: Priority"}),(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Y2,{min:0,value:null!=priority?priority:"",onChange:function onChange(v){setPriority(v)},children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.zu,{}),(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Fi,{children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.WQ,{}),(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.Y_,{})]})]}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{children:"To leave this field unchanged for all elements, leave the input blank."})]})]})}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.mz,{children:(0,jsx_runtime.jsxs)(chakra_ui_button_esm.hE,{spacing:2,children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:onClose,children:"Cancel"}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"purple",isLoading:updateResponse.fetching||updateIsHiddenResponse.fetching,onClick:update,isDisabled:(!priority||""===priority.trim())&&null===wide&&null===hidden,children:"Update"})]})})]})}(0,urql_core.Ps)(UpdateLayoutModal_templateObject||(UpdateLayoutModal_templateObject=function UpdateLayoutModal_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation UpdateLayout($elementIds: [uuid!]!, $layoutData: jsonb!) {\n        update_content_Element(where: { id: { _in: $elementIds } }, _append: { layoutData: $layoutData }) {\n            affected_rows\n        }\n    }\n\n    mutation UpdateIsHidden($elementIds: [uuid!]!, $isHidden: Boolean!) {\n        update_content_Element(where: { id: { _in: $elementIds } }, _set: { isHidden: $isHidden }) {\n            affected_rows\n        }\n    }\n"]))),UpdateLayoutModal.displayName="UpdateLayoutModal";try{UpdateLayoutModal.displayName="UpdateLayoutModal",UpdateLayoutModal.__docgenInfo={description:"",displayName:"UpdateLayoutModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},elementsByItem:{defaultValue:null,description:"",name:"elementsByItem",required:!0,type:{name:"{ itemId: string; elementIds: string[]; }[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/BulkOperations/UpdateLayoutModal.tsx#UpdateLayoutModal"]={docgenInfo:UpdateLayoutModal.__docgenInfo,name:"UpdateLayoutModal",path:"src/aspects/Conference/Manage/Content/v2/BulkOperations/UpdateLayoutModal.tsx#UpdateLayoutModal"})}catch(__react_docgen_typescript_loader_error){}var UpdateUploadsRemainingModal_templateObject;__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.number.is-nan.js"),__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.number.constructor.js");function UpdateUploadsRemainingModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function UpdateUploadsRemainingModal_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){UpdateUploadsRemainingModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){UpdateUploadsRemainingModal_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function UpdateUploadsRemainingModal_slicedToArray(arr,i){return function UpdateUploadsRemainingModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function UpdateUploadsRemainingModal_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function UpdateUploadsRemainingModal_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return UpdateUploadsRemainingModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UpdateUploadsRemainingModal_arrayLikeToArray(o,minLen)}(arr,i)||function UpdateUploadsRemainingModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UpdateUploadsRemainingModal_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function UpdateUploadsRemainingModal(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,elementsByItem=_ref.elementsByItem;return(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.u_,{isOpen,onClose,children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ZA,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.hz,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.xB,{children:"Update uploads remaining"}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ol,{}),isOpen?(0,jsx_runtime.jsx)(UpdateUploadsRemainingModal_ModalInner,{elementsByItem,onClose}):void 0]})]})}function UpdateUploadsRemainingModal_ModalInner(_ref2){var onClose=_ref2.onClose,elementsByItem=_ref2.elementsByItem,subconferenceId=(0,AuthParameters.h)().subconferenceId,elementIds=(0,react.useMemo)((function(){return elementsByItem.flatMap((function(x){return x.elementIds}))}),[elementsByItem]),_useState2=UpdateUploadsRemainingModal_slicedToArray((0,react.useState)(3),2),newValue=_useState2[0],setNewValue=_useState2[1],_useUpdateUploadsRema2=UpdateUploadsRemainingModal_slicedToArray((0,graphql.FAt)(),2),updateResponse=_useUpdateUploadsRema2[0],doUpdate=_useUpdateUploadsRema2[1],update=(0,react.useCallback)(UpdateUploadsRemainingModal_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _headers;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,doUpdate({elementIds,count:newValue},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers)}});case 3:onClose(),_context.next=9;break;case 6:_context.prev=6,_context.t0=_context.catch(0),console.error("Failed to update uploads remaining",_context.t0);case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])}))),[doUpdate,elementIds,newValue,onClose,subconferenceId]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.fe,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"This will update the number of uploads remaining on selected elements."}),(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{mt:4,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"New uploads remaining"}),(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Y2,{value:newValue,onChange:function onChange(_valueAsStr,value){Number.isNaN(value)||setNewValue(value)},min:0,max:3,children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.zu,{}),(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Fi,{children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.WQ,{}),(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.Y_,{})]})]})]}),updateResponse.error?(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,{status:"error",mt:4,children:[(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.Cd,{children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.zM,{}),"Error updating uploads remaining"]}),(0,jsx_runtime.jsx)(chakra_ui_alert_esm.X,{children:updateResponse.error.message})]}):void 0]}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.mz,{children:(0,jsx_runtime.jsxs)(chakra_ui_button_esm.hE,{spacing:2,children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:onClose,children:"Cancel"}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"purple",isLoading:updateResponse.fetching,onClick:update,children:"Update"})]})})]})}(0,urql_core.Ps)(UpdateUploadsRemainingModal_templateObject||(UpdateUploadsRemainingModal_templateObject=function UpdateUploadsRemainingModal_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation UpdateUploadsRemaining($elementIds: [uuid!]!, $count: Int!) {\n        update_content_Element(where: { id: { _in: $elementIds } }, _set: { uploadsRemaining: $count }) {\n            affected_rows\n        }\n    }\n"]))),UpdateUploadsRemainingModal.displayName="UpdateUploadsRemainingModal";try{UpdateUploadsRemainingModal.displayName="UpdateUploadsRemainingModal",UpdateUploadsRemainingModal.__docgenInfo={description:"",displayName:"UpdateUploadsRemainingModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},elementsByItem:{defaultValue:null,description:"",name:"elementsByItem",required:!0,type:{name:"{ itemId: string; elementIds: string[]; }[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/BulkOperations/UpdateUploadsRemainingModal.tsx#UpdateUploadsRemainingModal"]={docgenInfo:UpdateUploadsRemainingModal.__docgenInfo,name:"UpdateUploadsRemainingModal",path:"src/aspects/Conference/Manage/Content/v2/BulkOperations/UpdateUploadsRemainingModal.tsx#UpdateUploadsRemainingModal"})}catch(__react_docgen_typescript_loader_error){}function BulkOperationMenu_slicedToArray(arr,i){return function BulkOperationMenu_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function BulkOperationMenu_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function BulkOperationMenu_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return BulkOperationMenu_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BulkOperationMenu_arrayLikeToArray(o,minLen)}(arr,i)||function BulkOperationMenu_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BulkOperationMenu_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function BulkOperationMenu(_ref){var _activeOperation$item,_activeOperation$rest,_activeOperation$item2,_activeOperation$elem,_activeOperation$elem2,_activeOperation$elem3,_activeOperation$item3,selectedItems=_ref.selectedData,allItems=_ref.allItems,allTags=_ref.allTags,_useDisclosure=(0,chakra_ui_hooks_esm.qY)(),menuIsOpen=_useDisclosure.isOpen,menuOnOpen=_useDisclosure.onOpen,_menuOnClose=_useDisclosure.onClose,_useState2=BulkOperationMenu_slicedToArray((0,react.useState)(""),2),selectedOperation=_useState2[0],setSelectedOperation=_useState2[1],menuOnClose=(0,react.useCallback)((function(){setSelectedOperation(""),_menuOnClose()}),[_menuOnClose]),_useState4=BulkOperationMenu_slicedToArray((0,react.useState)(null),2),activeOperation=_useState4[0],setActiveOperation=_useState4[1],operations=[{label:"Add elements",value:"ELEMENTS_ADD",operation:function operation(items){setActiveOperation({operation:"ELEMENTS_ADD",items,step:"ACT",elementsByItem:[],restrictToTypes:null})}},{label:"Edit element uploads remaining",value:"UPDATE_UPLOADS_REMAINING",operation:function operation(items){setActiveOperation({operation:"UPDATE_UPLOADS_REMAINING",items,step:"SELECT",elementsByItem:[],restrictToTypes:null})}},{label:"Edit element layout",value:"ELEMENTS_LAYOUT",operation:function operation(items){setActiveOperation({operation:"ELEMENTS_LAYOUT",items,step:"SELECT",elementsByItem:[],restrictToTypes:null})}},{label:"Update exhibition descriptive items",value:"UPDATE_EXHIBITION_DESCRIPTIVE_ITEMS",operation:function operation(items){setActiveOperation({operation:"UPDATE_EXHIBITION_DESCRIPTIVE_ITEMS",items,step:"ACT",elementsByItem:[],restrictToTypes:null})}},{label:"Combine videos",value:"COMBINE_VIDEOS",operation:function operation(items){setActiveOperation({operation:"COMBINE_VIDEOS",items,step:"SELECT",elementsByItem:[],restrictToTypes:[graphql.bK7.VideoFile,graphql.bK7.VideoBroadcast,graphql.bK7.VideoPrepublish]})}}],toast=(0,chakra_ui_toast_esm.pm)();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[selectedItems.length>0?(0,jsx_runtime.jsxs)(chakra_ui_menu_esm.v2,{isOpen:menuIsOpen,onClose:menuOnClose,onOpen:menuOnOpen,size:"xl",children:[(0,jsx_runtime.jsx)(chakra_ui_menu_esm.j2,{as:chakra_ui_button_esm.zx,rightIcon:(0,jsx_runtime.jsx)(chakra_ui_icons_esm.ChevronDownIcon,{}),children:"Bulk edit"}),(0,jsx_runtime.jsx)(chakra_ui_menu_esm.qy,{overflow:"auto",maxH:"30vh",children:(0,jsx_runtime.jsx)(chakra_ui_menu_esm.kS,{title:"Operation",children:operations.map((function(operation){return(0,jsx_runtime.jsx)(chakra_ui_menu_esm.sN,{value:operation.value,onClick:function onClick(){operation.operation(selectedItems)},children:operation.label},operation.value)}))})})]}):(0,jsx_runtime.jsxs)(chakra_ui_menu_esm.v2,{closeOnSelect:!1,isLazy:!0,isOpen:menuIsOpen,onClose:menuOnClose,onOpen:menuOnOpen,size:"xl",children:[(0,jsx_runtime.jsx)(chakra_ui_menu_esm.j2,{as:chakra_ui_button_esm.zx,rightIcon:(0,jsx_runtime.jsx)(chakra_ui_icons_esm.ChevronDownIcon,{}),children:"Bulk edit"}),(0,jsx_runtime.jsxs)(chakra_ui_menu_esm.qy,{overflow:"auto",maxH:"30vh",children:[(0,jsx_runtime.jsx)(chakra_ui_menu_esm.__,{title:"Operation",type:"radio",value:selectedOperation,onChange:function onChange(value){setSelectedOperation(value)},children:operations.map((function(operation){return(0,jsx_runtime.jsx)(chakra_ui_menu_esm.ii,{value:operation.value,children:operation.label},operation.value)}))}),(0,jsx_runtime.jsx)(chakra_ui_menu_esm.R,{}),(0,jsx_runtime.jsx)(chakra_ui_menu_esm.sN,{onClick:function onClick(){var operation=operations.find((function(x){return x.value===selectedOperation}));operation?(menuOnClose(),operation.operation(allItems),setSelectedOperation("")):toast({title:"Please select an operation",duration:3e3,position:"top",isClosable:!0})},children:"All items"},"all-items"),(0,jsx_runtime.jsx)(chakra_ui_menu_esm.kS,{title:"Items with tag",children:es.MRu((function(x){return x.name}),allTags).map((function(tag){return(0,jsx_runtime.jsx)(chakra_ui_menu_esm.sN,{onClick:function onClick(){var filteredItems=allItems.filter((function(item){return item.itemTags.some((function(itemTag){return itemTag.tagId===tag.id}))})),operation=operations.find((function(x){return x.value===selectedOperation}));operation?(menuOnClose(),operation.operation(filteredItems),setSelectedOperation("")):toast({title:"Please select an operation",duration:3e3,position:"top",isClosable:!0})},children:tag.name},tag.id)}))})]})]}),(0,jsx_runtime.jsx)(SelectElementsModal,{isOpen:("SECURITY"===(null==activeOperation?void 0:activeOperation.operation)||"COMBINE_VIDEOS"===(null==activeOperation?void 0:activeOperation.operation)||"UPDATE_UPLOADS_REMAINING"===(null==activeOperation?void 0:activeOperation.operation)||"ELEMENTS_LAYOUT"===(null==activeOperation?void 0:activeOperation.operation))&&"SELECT"===(null==activeOperation?void 0:activeOperation.step),onClose:function onClose(){setActiveOperation(null)},items:null!==(_activeOperation$item=null==activeOperation?void 0:activeOperation.items)&&void 0!==_activeOperation$item?_activeOperation$item:[],onSelect:function onSelect(elementsByItem){"SECURITY"!==(null==activeOperation?void 0:activeOperation.operation)&&"COMBINE_VIDEOS"!==(null==activeOperation?void 0:activeOperation.operation)&&"UPDATE_UPLOADS_REMAINING"!==(null==activeOperation?void 0:activeOperation.operation)&&"ELEMENTS_LAYOUT"!==(null==activeOperation?void 0:activeOperation.operation)||setActiveOperation({elementsByItem,items:[],operation:activeOperation.operation,step:"ACT",restrictToTypes:activeOperation.restrictToTypes})},restrictToTypes:null!==(_activeOperation$rest=null==activeOperation?void 0:activeOperation.restrictToTypes)&&void 0!==_activeOperation$rest?_activeOperation$rest:null}),(0,jsx_runtime.jsx)(AddElementsModal,{isOpen:"ELEMENTS_ADD"===(null==activeOperation?void 0:activeOperation.operation)&&"ACT"===(null==activeOperation?void 0:activeOperation.step),onClose:function onClose(){setActiveOperation(null)},items:null!==(_activeOperation$item2=null==activeOperation?void 0:activeOperation.items)&&void 0!==_activeOperation$item2?_activeOperation$item2:[]}),(0,jsx_runtime.jsx)(UpdateLayoutModal,{isOpen:"ELEMENTS_LAYOUT"===(null==activeOperation?void 0:activeOperation.operation)&&"ACT"===(null==activeOperation?void 0:activeOperation.step),onClose:function onClose(){setActiveOperation(null)},elementsByItem:null!==(_activeOperation$elem=null==activeOperation?void 0:activeOperation.elementsByItem)&&void 0!==_activeOperation$elem?_activeOperation$elem:[]}),(0,jsx_runtime.jsx)(CombineVideosModal,{isOpen:"COMBINE_VIDEOS"===(null==activeOperation?void 0:activeOperation.operation)&&"ACT"===(null==activeOperation?void 0:activeOperation.step),onClose:function onClose(){setActiveOperation(null)},elementsByItem:null!==(_activeOperation$elem2=null==activeOperation?void 0:activeOperation.elementsByItem)&&void 0!==_activeOperation$elem2?_activeOperation$elem2:[]}),(0,jsx_runtime.jsx)(UpdateUploadsRemainingModal,{isOpen:"UPDATE_UPLOADS_REMAINING"===(null==activeOperation?void 0:activeOperation.operation)&&"ACT"===(null==activeOperation?void 0:activeOperation.step),onClose:function onClose(){setActiveOperation(null)},elementsByItem:null!==(_activeOperation$elem3=null==activeOperation?void 0:activeOperation.elementsByItem)&&void 0!==_activeOperation$elem3?_activeOperation$elem3:[]}),(0,jsx_runtime.jsx)(UpdateExhibitionDescriptiveItemsModal,{isOpen:"UPDATE_EXHIBITION_DESCRIPTIVE_ITEMS"===(null==activeOperation?void 0:activeOperation.operation)&&"ACT"===(null==activeOperation?void 0:activeOperation.step),onClose:function onClose(){setActiveOperation(null)},items:null!==(_activeOperation$item3=null==activeOperation?void 0:activeOperation.items)&&void 0!==_activeOperation$item3?_activeOperation$item3:[]})]})}try{BulkOperationMenu.displayName="BulkOperationMenu",BulkOperationMenu.__docgenInfo={description:"",displayName:"BulkOperationMenu",props:{selectedData:{defaultValue:null,description:"",name:"selectedData",required:!0,type:{name:"ManageContent_ItemFragment[]"}},allItems:{defaultValue:null,description:"",name:"allItems",required:!0,type:{name:"readonly ManageContent_ItemFragment[]"}},allTags:{defaultValue:null,description:"",name:"allTags",required:!0,type:{name:"readonly ManageContent_TagFragment[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/BulkOperations/BulkOperationMenu.tsx#BulkOperationMenu"]={docgenInfo:BulkOperationMenu.__docgenInfo,name:"BulkOperationMenu",path:"src/aspects/Conference/Manage/Content/v2/BulkOperations/BulkOperationMenu.tsx#BulkOperationMenu"})}catch(__react_docgen_typescript_loader_error){}var ExhibitionSecondaryEditor_templateObject,ManageExhibitionsModal_templateObject,chakra_ui_color_mode_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+color-mode@1.4.3_react@17.0.2/node_modules/@chakra-ui/color-mode/dist/chakra-ui-color-mode.esm.js"),chakra_ui_popover_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+popover@1.11.4_381b254eb05ba0b21fa13fc526cde82c/node_modules/@chakra-ui/popover/dist/chakra-ui-popover.esm.js"),react_color_es=__webpack_require__("../node_modules/.pnpm/react-color@2.19.3_react@17.0.2/node_modules/react-color/es/index.js"),tinycolor=__webpack_require__("../node_modules/.pnpm/tinycolor2@1.4.2/node_modules/tinycolor2/tinycolor.js"),tinycolor_default=__webpack_require__.n(tinycolor);function ExhibitionSecondaryEditor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ExhibitionSecondaryEditor_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ExhibitionSecondaryEditor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ExhibitionSecondaryEditor_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function ExhibitionSecondaryEditor_toConsumableArray(arr){return function ExhibitionSecondaryEditor_arrayWithoutHoles(arr){if(Array.isArray(arr))return ExhibitionSecondaryEditor_arrayLikeToArray(arr)}(arr)||function ExhibitionSecondaryEditor_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||ExhibitionSecondaryEditor_unsupportedIterableToArray(arr)||function ExhibitionSecondaryEditor_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ExhibitionSecondaryEditor_slicedToArray(arr,i){return function ExhibitionSecondaryEditor_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ExhibitionSecondaryEditor_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||ExhibitionSecondaryEditor_unsupportedIterableToArray(arr,i)||function ExhibitionSecondaryEditor_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ExhibitionSecondaryEditor_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return ExhibitionSecondaryEditor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ExhibitionSecondaryEditor_arrayLikeToArray(o,minLen):void 0}}function ExhibitionSecondaryEditor_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function SecondaryEditor(_ref){var exhibitionId=_ref.exhibitionId,exhibitionName=_ref.exhibitionName,isOpen=_ref.isOpen,onClose=_ref.onClose,descriptiveItemId=_ref.descriptiveItemId,setDescriptiveItemId=_ref.setDescriptiveItemId;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.dy,{isOpen,placement:"right",onClose,size:"lg",children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.P1,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.sc,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.cC,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.OX,{pb:0,pr:"3em",children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{fontSize:"lg",overflow:"wrap",children:["Edit exhibition: ",exhibitionName]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{fontSize:"xs",children:exhibitionId})]}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.Ng,{children:exhibitionId&&(0,jsx_runtime.jsx)(SecondaryEditorInner,{exhibitionId,descriptiveItemId,setDescriptiveItemId})})]})]})})}function SecondaryEditorInner(_ref2){var _itemExhibitionsRespo,_itemsResponse$data2,exhibitionId=_ref2.exhibitionId,descriptiveItemId=_ref2.descriptiveItemId,setDescriptiveItemId=_ref2.setDescriptiveItemId,conference=(0,useConference.fk)(),_useAuthParameters=(0,AuthParameters.h)(),conferencePath=_useAuthParameters.conferencePath,subconferenceId=_useAuthParameters.subconferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[subconferenceId]),itemExhibitionsResponse=ExhibitionSecondaryEditor_slicedToArray((0,graphql.JGG)({variables:{exhibitionId},context}),1)[0],itemExhibitions=null===(_itemExhibitionsRespo=itemExhibitionsResponse.data)||void 0===_itemExhibitionsRespo?void 0:_itemExhibitionsRespo.content_ItemExhibition,itemExhibitionsIds=(0,react.useMemo)((function(){return null==itemExhibitions?void 0:itemExhibitions.map((function(x){return x.item.id}))}),[itemExhibitions]),itemsResponse=ExhibitionSecondaryEditor_slicedToArray((0,graphql.L79)({variables:{conferenceId:conference.id,subconferenceCond:subconferenceId?{_eq:subconferenceId}:{_is_null:!0}},context}),1)[0],sortedItems=(0,react.useMemo)((function(){var _itemsResponse$data;return itemExhibitionsIds&&(null===(_itemsResponse$data=itemsResponse.data)||void 0===_itemsResponse$data?void 0:_itemsResponse$data.content_Item)&&ExhibitionSecondaryEditor_toConsumableArray(itemsResponse.data.content_Item).sort((function(x,y){return x.title.localeCompare(y.title)}))}),[itemExhibitionsIds,null===(_itemsResponse$data2=itemsResponse.data)||void 0===_itemsResponse$data2?void 0:_itemsResponse$data2.content_Item]),filteredItems=(0,react.useMemo)((function(){return sortedItems&&itemExhibitionsIds?sortedItems.filter((function(item){return!itemExhibitionsIds.includes(item.id)})):void 0}),[itemExhibitionsIds,sortedItems]);return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{w:"100%",alignItems:"flex-start",children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.Ug,{flexWrap:"wrap",justifyContent:"flex-start",w:"100%",gridRowGap:2,children:(0,jsx_runtime.jsxs)(LinkButton.Qj,{size:"sm",to:conferencePath+"/exhibition/"+exhibitionId,isExternal:!0,"aria-label":"View item",title:"View item",children:["View exhibition",(0,jsx_runtime.jsx)(chakra_ui_icons_esm.ExternalLinkIcon,{})]})}),itemsResponse.fetching&&!sortedItems?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{label:"Loading items"}):void 0,sortedItems?(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Descriptive Item"}),(0,jsx_runtime.jsxs)(chakra_ui_select_esm.Ph,{value:null!=descriptiveItemId?descriptiveItemId:"",onChange:function onChange(ev){return setDescriptiveItemId(""===ev.target.value?null:ev.target.value)},children:[(0,jsx_runtime.jsx)("option",{value:"",children:"<No item>"}),sortedItems.map((function(item){return(0,jsx_runtime.jsx)("option",{value:item.id,children:item.title},item.id)}))]}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{children:"Select a content item whose abstract or text element describes this exhibition."})]}):void 0,(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{spacing:2,alignItems:"flex-start",w:"100%",children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"Add or remove items in this exhibition."}),itemExhibitionsIds?(0,jsx_runtime.jsx)(AddItemExhibition,{exhibitionId,existingItemIds:itemExhibitionsIds,sortedItems:filteredItems}):void 0,itemExhibitionsResponse.fetching&&!itemExhibitions?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{label:"Loading people"}):void 0,itemExhibitions?(0,jsx_runtime.jsx)(ItemExhibitionsList,{exhibitionItems:itemExhibitions}):void 0]})]})}function AddItemExhibitionBody(_ref3){var exhibitionId=_ref3.exhibitionId,existingItemIds=_ref3.existingItemIds,onClose=_ref3.onClose,sortedItems=_ref3.sortedItems,subconferenceId=(0,AuthParameters.h)().subconferenceId,_useState2=ExhibitionSecondaryEditor_slicedToArray((0,react.useState)(null),2),selectedItemId=_useState2[0],setSelectedItemId=_useState2[1],_useManageContent_Ins2=ExhibitionSecondaryEditor_slicedToArray((0,graphql.sB6)(),2),insertItemExhibitionResponse=_useManageContent_Ins2[0],insertItemExhibition=_useManageContent_Ins2[1],toast=(0,chakra_ui_toast_esm.pm)();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_popover_esm.Yt,{children:"Link item"}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.b,{children:sortedItems?(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Item"}),(0,jsx_runtime.jsxs)(chakra_ui_select_esm.Ph,{value:null!=selectedItemId?selectedItemId:"",onChange:function onChange(ev){return setSelectedItemId(""===ev.target.value?null:ev.target.value)},children:[(0,jsx_runtime.jsx)("option",{value:"",children:"Select an item"}),sortedItems.map((function(item){return(0,jsx_runtime.jsx)("option",{value:item.id,children:item.title},item.id)}))]})]}):void 0}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.DT,{children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"purple",isDisabled:!selectedItemId,isLoading:insertItemExhibitionResponse.fetching,onClick:ExhibitionSecondaryEditor_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _headers,_e$message;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,insertItemExhibition({exhibitionId,itemId:selectedItemId,priority:existingItemIds.length},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers)}});case 3:onClose(),_context.next=9;break;case 6:_context.prev=6,_context.t0=_context.catch(0),toast({title:"Error linking exhibition",description:null!==(_e$message=_context.t0.message)&&void 0!==_e$message?_e$message:_context.t0.toString(),isClosable:!0,duration:1e4,position:"bottom",status:"error"});case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])}))),children:"Add link"})})]})}function AddItemExhibition(props){var _useDisclosure=(0,chakra_ui_hooks_esm.qY)(),onOpen=_useDisclosure.onOpen,onClose=_useDisclosure.onClose,isOpen=_useDisclosure.isOpen,bgColor=(0,chakra_ui_color_mode_esm.ff)("purple.50","purple.900");return(0,jsx_runtime.jsxs)(chakra_ui_popover_esm.J2,{placement:"bottom-start",isLazy:!0,isOpen,onOpen,onClose,children:[(0,jsx_runtime.jsx)(chakra_ui_popover_esm.xo,{children:(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{size:"sm",colorScheme:"purple",children:[(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"plus-square",mr:2}),(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{children:"Link item"}),(0,jsx_runtime.jsx)(chakra_ui_icons_esm.ChevronDownIcon,{ml:1})]})}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.yk,{bgColor,children:(0,jsx_runtime.jsx)(AddItemExhibitionBody,Object.assign({onClose},props))})]})}function ItemExhibitionsList(_ref5){var exhibitionItems=_ref5.exhibitionItems,subconferenceId=(0,AuthParameters.h)().subconferenceId,sortedItems=(0,react.useMemo)((function(){return es.HCG([function(x,y){return(0,maybeCompare.D)(x.priority,y.priority,(function(a,b){return a-b}))},function(x,y){return x.item.title.localeCompare(y.item.title)}],exhibitionItems)}),[exhibitionItems]),toast=(0,chakra_ui_toast_esm.pm)(),_useManageContent_Upd2=ExhibitionSecondaryEditor_slicedToArray((0,graphql.ytJ)(),2),updateItemExhibitionResponse=_useManageContent_Upd2[0],updateItemExhibition=_useManageContent_Upd2[1],_useManageContent_Del2=ExhibitionSecondaryEditor_slicedToArray((0,graphql.dN1)(),2),deleteItemExhibitionResponse=_useManageContent_Del2[0],deleteItemExhibition=_useManageContent_Del2[1];return sortedItems.length>0?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"Items:"}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.gC,{w:"100%",overflow:"auto",children:sortedItems.map((function(itemExhibition,idx){return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{w:"100%",children:[(0,jsx_runtime.jsxs)(chakra_ui_button_esm.hE,{mr:2,children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{size:"xs",isDisabled:0===idx,isLoading:updateItemExhibitionResponse.fetching,onClick:function onClick(){var _headers2,_headers3,previousItemExhibition=sortedItems[idx-1];updateItemExhibition({itemExhibitionId:itemExhibition.id,priority:idx-1},{fetchOptions:{headers:(_headers2={},_headers2[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers2)}}),updateItemExhibition({itemExhibitionId:previousItemExhibition.id,priority:idx},{fetchOptions:{headers:(_headers3={},_headers3[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers3)}})},children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"arrow-alt-circle-up"})}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{size:"xs",isDisabled:idx===sortedItems.length-1,isLoading:updateItemExhibitionResponse.fetching,onClick:function onClick(){var _headers4,_headers5,nextItemExhibition=sortedItems[idx+1];updateItemExhibition({itemExhibitionId:itemExhibition.id,priority:idx+1},{fetchOptions:{headers:(_headers4={},_headers4[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers4)}}),updateItemExhibition({itemExhibitionId:nextItemExhibition.id,priority:idx},{fetchOptions:{headers:(_headers5={},_headers5[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers5)}})},children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"arrow-alt-circle-down"})})]}),(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{ml:2,children:itemExhibition.item.title}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{ml:"auto","aria-label":"Delete",colorScheme:"red",size:"xs",isDisabled:deleteItemExhibitionResponse.fetching,onClick:ExhibitionSecondaryEditor_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _headers6,_e$message2;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:try{deleteItemExhibition({itemExhibitionId:itemExhibition.id},{fetchOptions:{headers:(_headers6={},_headers6[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers6)}})}catch(e){toast({title:"Error unlinking item",description:null!==(_e$message2=e.message)&&void 0!==_e$message2?_e$message2:e.toString(),isClosable:!0,duration:1e4,position:"bottom",status:"error"})}case 1:case"end":return _context2.stop()}}),_callee2)}))),children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"trash-alt"})})]},itemExhibition.id)}))})]}):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"No items linked to this exhibition."})}(0,urql_core.Ps)(ExhibitionSecondaryEditor_templateObject||(ExhibitionSecondaryEditor_templateObject=function ExhibitionSecondaryEditor_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query ManageContent_SelectItemExhibitions($exhibitionId: uuid!) {\n        content_ItemExhibition(where: { exhibitionId: { _eq: $exhibitionId } }) {\n            ...ManageContent_ItemExhibition\n        }\n    }\n\n    mutation ManageContent_InsertItemExhibition($exhibitionId: uuid!, $itemId: uuid!, $priority: Int!) {\n        insert_content_ItemExhibition_one(\n            object: { exhibitionId: $exhibitionId, itemId: $itemId, priority: $priority }\n        ) {\n            ...ManageContent_ItemExhibition\n        }\n    }\n\n    mutation ManageContent_UpdateItemExhibition($itemExhibitionId: uuid!, $priority: Int!) {\n        update_content_ItemExhibition_by_pk(pk_columns: { id: $itemExhibitionId }, _set: { priority: $priority }) {\n            ...ManageContent_ItemExhibition\n        }\n    }\n\n    mutation ManageContent_DeleteItemExhibition($itemExhibitionId: uuid!) {\n        delete_content_ItemExhibition_by_pk(id: $itemExhibitionId) {\n            id\n        }\n    }\n"]))),SecondaryEditorInner.displayName="SecondaryEditorInner",AddItemExhibition.displayName="AddItemExhibition";try{SecondaryEditor.displayName="SecondaryEditor",SecondaryEditor.__docgenInfo={description:"",displayName:"SecondaryEditor",props:{exhibitionId:{defaultValue:null,description:"",name:"exhibitionId",required:!0,type:{name:"string | null"}},exhibitionName:{defaultValue:null,description:"",name:"exhibitionName",required:!0,type:{name:"string | null"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},descriptiveItemId:{defaultValue:null,description:"",name:"descriptiveItemId",required:!0,type:{name:"string | null"}},setDescriptiveItemId:{defaultValue:null,description:"",name:"setDescriptiveItemId",required:!0,type:{name:"(id: string | null) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Exhibition/ExhibitionSecondaryEditor.tsx#SecondaryEditor"]={docgenInfo:SecondaryEditor.__docgenInfo,name:"SecondaryEditor",path:"src/aspects/Conference/Manage/Content/v2/Exhibition/ExhibitionSecondaryEditor.tsx#SecondaryEditor"})}catch(__react_docgen_typescript_loader_error){}function ManageExhibitionsModal_toConsumableArray(arr){return function ManageExhibitionsModal_arrayWithoutHoles(arr){if(Array.isArray(arr))return ManageExhibitionsModal_arrayLikeToArray(arr)}(arr)||function ManageExhibitionsModal_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||ManageExhibitionsModal_unsupportedIterableToArray(arr)||function ManageExhibitionsModal_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ManageExhibitionsModal_slicedToArray(arr,i){return function ManageExhibitionsModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ManageExhibitionsModal_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||ManageExhibitionsModal_unsupportedIterableToArray(arr,i)||function ManageExhibitionsModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ManageExhibitionsModal_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return ManageExhibitionsModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ManageExhibitionsModal_arrayLikeToArray(o,minLen):void 0}}function ManageExhibitionsModal_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ManageExhibitionsModal(_ref){var onCloseCb=_ref.onClose,_useDisclosure=(0,chakra_ui_hooks_esm.qY)(),isOpen=_useDisclosure.isOpen,onOpen=_useDisclosure.onOpen,onClose=_useDisclosure.onClose,onCloseInner=(0,react.useCallback)((function(){onClose(),null==onCloseCb||onCloseCb()}),[onClose,onCloseCb]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"purple",onClick:onOpen,children:"Manage Exhibitions"}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.u_,{isOpen,onClose:onCloseInner,size:"4xl",scrollBehavior:"inside",children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ZA,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.hz,{pb:4,children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.xB,{children:"Manage Exhibitions"}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ol,{}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.fe,{children:isOpen?(0,jsx_runtime.jsx)(ManageExhibitionsModalBody,{}):void 0})]})]})]})}function ManageExhibitionsModalBody(){var _exhibitionsResponse$3,_exhibitionsResponse$4,_extractActualError,_ref10,_insertExhibitionResp,conference=(0,useConference.fk)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[subconferenceId]),exhibitionsResponse=ManageExhibitionsModal_slicedToArray((0,graphql.TDz)({variables:{conferenceId:conference.id,subconferenceCond:subconferenceId?{_eq:subconferenceId}:{_is_null:!0}},context}),1)[0],row=(0,react.useMemo)((function(){return{getKey:function getKey(record){return record.id},canSelect:function canSelect(_record){return!0},pages:{defaultToLast:!1},invalid:function invalid(record){var _record$name;return(null===(_record$name=record.name)||void 0===_record$name||!_record$name.length)&&{columnId:"name",reason:"Name required"}}}}),[]),colorMode=(0,chakra_ui_color_mode_esm.If)().colorMode,columns=(0,react.useMemo)((function(){var result=[{id:"name",defaultSortDirection:CRUDTable2.S.Asc,header:function NameHeader(_ref2){var isInCreate=_ref2.isInCreate,onClick=_ref2.onClick,sortDir=_ref2.sortDir;return isInCreate?(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Name"}):(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{size:"xs",onClick,children:["Name",null!==sortDir?" "+sortDir:void 0]})},get:function get(data){return data.name},set:function set(record,value){record.name=value},sort:function sort(x,y){return(0,maybeCompare.D)(x,y,(function(a,b){return a.localeCompare(b)}))},filterFn:function filterFn(rows,filterValue){return""===filterValue?rows.filter((function(row){var _row$name;return""===(null!==(_row$name=row.name)&&void 0!==_row$name?_row$name:"")})):rows.filter((function(row){return row.name.toLowerCase().includes(filterValue.toLowerCase())}))},filterEl:CRUDComponents.Oe,cell:function NameCell(_ref3){var value=_ref3.value,_onChange=_ref3.onChange,onBlur=_ref3.onBlur,ref=_ref3.ref;return(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,{type:"text",value:null!=value?value:"",onChange:function onChange(ev){return null==_onChange?void 0:_onChange(ev.target.value)},onBlur,ref})}},{id:"priority",header:function PriorityHeader(_ref4){var isInCreate=_ref4.isInCreate,onClick=_ref4.onClick,sortDir=_ref4.sortDir;return isInCreate?(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Priority"}):(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{size:"xs",onClick,children:["Priority",null!==sortDir?" "+sortDir:void 0]})},get:function get(data){return data.priority},set:function set(record,value){record.priority=value},sort:function sort(x,y){return x-y},filterFn:function filterFn(rows,filterValue){return rows.filter((function(row){return void 0===filterValue.min&&void 0===filterValue.max||row.priority&&(void 0===filterValue.min||filterValue.min<=row.priority)&&(void 0===filterValue.max||filterValue.max>=row.priority)}))},filterEl:(0,CRUDComponents.pV)(-1e3,1e3),cell:function EventNameCell(_ref5){var value=_ref5.value,_onChange2=_ref5.onChange,onBlur=_ref5.onBlur,ref=_ref5.ref;return(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Y2,{value:null!=value?value:3e3,min:0,max:3e3,onChange:function onChange(vStr,v){return null==_onChange2?void 0:_onChange2(""===vStr?10:v)},onBlur,children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.zu,{ref}),(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Fi,{children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.WQ,{"aria-label":"Increment"}),(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.Y_,{"aria-label":"Decrement"})]})]})}},{id:"colour",header:function ColourHeader(_ref6){return _ref6.isInCreate?(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Colour"}):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{fontSize:"xs",p:1,textAlign:"center",textTransform:"none",fontWeight:"normal",children:"Colour"})},get:function get(data){return data.colour},set:function set(record,value){record.colour=value&&""!==value?value:"rgba(0,0,0,0)"},cell:function ShortTitleCell(_ref7){var value=_ref7.value,_onChange3=_ref7.onChange,colourObj=tinycolor_default()(value);return(0,jsx_runtime.jsxs)(chakra_ui_popover_esm.J2,{placement:"bottom-start",returnFocusOnClose:!1,isLazy:!0,children:[(0,jsx_runtime.jsx)(chakra_ui_popover_esm.xo,{children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{w:"100%",color:!colourObj.isDark()||"light"===colorMode&&"rgba(0,0,0,0)"===value?"black":"white",bgColor:value,children:value})}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.yk,{children:(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{color:"black",children:(0,jsx_runtime.jsx)(react_color_es.xS,{width:"100%",color:value,onChange:function onChange(c){return null==_onChange3?void 0:_onChange3("rgba("+c.rgb.r+","+c.rgb.g+","+c.rgb.b+",1)")}})})})]})}},{id:"isHidden",header:function Header(_ref8){var isInCreate=_ref8.isInCreate,onClick=_ref8.onClick,sortDir=_ref8.sortDir;return isInCreate?(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Hidden?"}):(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{size:"xs",onClick,children:["Hidden?",null!==sortDir?" "+sortDir:void 0]})},get:function get(data){return data.isHidden},set:function set(data,value){data.isHidden=value},sort:function sort(x,y){return x&&y?0:x?-1:y?1:0},filterFn:function filterFn(rows,filterValue){return rows.filter((function(row){return!!row.isHidden===filterValue}))},filterEl:CRUDComponents.DV,cell:function Cell(_ref9){var value=_ref9.value,_onChange4=_ref9.onChange,onBlur=_ref9.onBlur,ref=_ref9.ref;return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.M5,{children:(0,jsx_runtime.jsx)(chakra_ui_checkbox_esm.XZ,{isChecked:null!=value&&value,onChange:function onChange(ev){return null==_onChange4?void 0:_onChange4(ev.target.checked)},onBlur,ref})})}}];return result}),[colorMode]),data=(0,react.useMemo)((function(){var _exhibitionsResponse$,_exhibitionsResponse$2;return ManageExhibitionsModal_toConsumableArray(null!==(_exhibitionsResponse$=null===(_exhibitionsResponse$2=exhibitionsResponse.data)||void 0===_exhibitionsResponse$2?void 0:_exhibitionsResponse$2.collection_Exhibition)&&void 0!==_exhibitionsResponse$?_exhibitionsResponse$:[])}),[null===(_exhibitionsResponse$3=exhibitionsResponse.data)||void 0===_exhibitionsResponse$3?void 0:_exhibitionsResponse$3.collection_Exhibition]),_useDisclosure2=(0,chakra_ui_hooks_esm.qY)(),isSecondaryPanelOpen=_useDisclosure2.isOpen,onSecondaryPanelOpen=_useDisclosure2.onOpen,onSecondaryPanelClose=_useDisclosure2.onClose,_useState2=ManageExhibitionsModal_slicedToArray((0,react.useState)(null),2),editingId=_useState2[0],setEditingId=_useState2[1],_useState4=ManageExhibitionsModal_slicedToArray((0,react.useState)(null),2),editingName=_useState4[0],setEditingName=_useState4[1],_useState6=ManageExhibitionsModal_slicedToArray((0,react.useState)(null),2),editingDescriptiveItemId=_useState6[0],setEditingDescriptiveItemId=_useState6[1],edit=(0,react.useMemo)((function(){return{open:function open(key){if(setEditingId(key),data&&key){var _exhibition$descripti,exhibition=data.find((function(x){return x.id===key}));if(exhibition)setEditingName(exhibition.name),setEditingDescriptiveItemId(null!==(_exhibition$descripti=exhibition.descriptiveItemId)&&void 0!==_exhibition$descripti?_exhibition$descripti:null)}null!==key?onSecondaryPanelOpen():onSecondaryPanelClose()}}}),[data,onSecondaryPanelClose,onSecondaryPanelOpen]),_useManageContent_Ins2=ManageExhibitionsModal_slicedToArray((0,graphql.LYs)(),2),insertExhibitionResponse=_useManageContent_Ins2[0],insertExhibition=_useManageContent_Ins2[1],insert=(0,react.useMemo)((function(){return{ongoing:insertExhibitionResponse.fetching,generateDefaults:function generateDefaults(){var _data$length;return{id:(0,v4.Z)(),conferenceId:conference.id,subconferenceId,name:"",colour:"rgba(0,0,0,0)",priority:null!==(_data$length=null==data?void 0:data.length)&&void 0!==_data$length?_data$length:0,isHidden:!1}},makeWhole:function makeWhole(d){return d},start:function start(record){var _headers;insertExhibition({exhibition:{conferenceId:record.conferenceId,subconferenceId,id:record.id,name:record.name,colour:record.colour,priority:record.priority,isHidden:record.isHidden}},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers)}})}}}),[conference.id,null==data?void 0:data.length,insertExhibition,insertExhibitionResponse.fetching,subconferenceId]),_useManageContent_Upd2=ManageExhibitionsModal_slicedToArray((0,graphql.H1Z)(),2),updateExhibitionResponse=_useManageContent_Upd2[0],updateExhibition=_useManageContent_Upd2[1],update=(0,react.useMemo)((function(){return{ongoing:updateExhibitionResponse.fetching,start:function start(record){var _headers2,exhibitionUpdateInput={name:record.name,colour:record.colour,priority:record.priority,isHidden:record.isHidden};updateExhibition({id:record.id,update:exhibitionUpdateInput},{fetchOptions:{headers:(_headers2={},_headers2[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers2)}})}}}),[subconferenceId,updateExhibition,updateExhibitionResponse.fetching]),_useManageContent_Del2=ManageExhibitionsModal_slicedToArray((0,graphql.zrL)(),2),deleteExhibitionsResponse=_useManageContent_Del2[0],deleteExhibitions=_useManageContent_Del2[1],deleteProps=(0,react.useMemo)((function(){return{ongoing:deleteExhibitionsResponse.fetching,start:function start(keys){var _headers3;deleteExhibitions({ids:keys},{fetchOptions:{headers:(_headers3={},_headers3[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers3)}})}}}),[deleteExhibitions,deleteExhibitionsResponse.fetching,subconferenceId]),updateDescriptiveItemId=(0,react.useCallback)((function(itemId){var _makeContext2;editingId&&updateExhibition({id:editingId,update:{descriptiveItemId:itemId}},(0,make_context.f)(((_makeContext2={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext2)))}),[editingId,subconferenceId,updateExhibition]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[exhibitionsResponse.fetching&&!exhibitionsResponse.data?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{label:"Loading exhibitions"}):void 0,(0,jsx_runtime.jsx)(CRUDTable2.Z,{columns,row,data:!exhibitionsResponse.fetching&&(null!==(_exhibitionsResponse$4=exhibitionsResponse.data)&&void 0!==_exhibitionsResponse$4&&_exhibitionsResponse$4.collection_Exhibition?data:null),tableUniqueName:"ManageConferenceRegistrants",alert:insertExhibitionResponse.error||updateExhibitionResponse.error||deleteExhibitionsResponse.error?{status:"error",title:"Error saving changes",description:null!==(_extractActualError=(0,ExtractActualError.Z)(null!==(_ref10=null!==(_insertExhibitionResp=insertExhibitionResponse.error)&&void 0!==_insertExhibitionResp?_insertExhibitionResp:updateExhibitionResponse.error)&&void 0!==_ref10?_ref10:deleteExhibitionsResponse.error))&&void 0!==_extractActualError?_extractActualError:"Unknown error"}:void 0,edit,insert,update,delete:deleteProps}),(0,jsx_runtime.jsx)(SecondaryEditor,{exhibitionId:editingId,exhibitionName:editingName,descriptiveItemId:editingDescriptiveItemId,setDescriptiveItemId:updateDescriptiveItemId,onClose:onSecondaryPanelClose,isOpen:isSecondaryPanelOpen})]})}(0,urql_core.Ps)(ManageExhibitionsModal_templateObject||(ManageExhibitionsModal_templateObject=function ManageExhibitionsModal_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation ManageContent_InsertExhibition($exhibition: collection_Exhibition_insert_input!) {\n        insert_collection_Exhibition_one(object: $exhibition) {\n            ...ManageContent_Exhibition\n        }\n    }\n\n    mutation ManageContent_UpdateExhibition($id: uuid!, $update: collection_Exhibition_set_input!) {\n        update_collection_Exhibition_by_pk(pk_columns: { id: $id }, _set: $update) {\n            ...ManageContent_Exhibition\n        }\n    }\n\n    mutation ManageContent_DeleteExhibitions($ids: [uuid!]!) {\n        delete_collection_Exhibition(where: { id: { _in: $ids } }) {\n            returning {\n                id\n            }\n        }\n    }\n"])));try{ManageExhibitionsModal.displayName="ManageExhibitionsModal",ManageExhibitionsModal.__docgenInfo={description:"",displayName:"ManageExhibitionsModal",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Exhibition/ManageExhibitionsModal.tsx#ManageExhibitionsModal"]={docgenInfo:ManageExhibitionsModal.__docgenInfo,name:"ManageExhibitionsModal",path:"src/aspects/Conference/Manage/Content/v2/Exhibition/ManageExhibitionsModal.tsx#ManageExhibitionsModal"})}catch(__react_docgen_typescript_loader_error){}var EditItemPeople_templateObject,QueryWrapper=__webpack_require__("./src/aspects/GQL/QueryWrapper.tsx"),chakra_ui_accordion_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+accordion@1.4.6_381b254eb05ba0b21fa13fc526cde82c/node_modules/@chakra-ui/accordion/dist/chakra-ui-accordion.esm.js");function EditItemPeople_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function EditItemPeople_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){EditItemPeople_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){EditItemPeople_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function EditItemPeople_slicedToArray(arr,i){return function EditItemPeople_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function EditItemPeople_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function EditItemPeople_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return EditItemPeople_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EditItemPeople_arrayLikeToArray(o,minLen)}(arr,i)||function EditItemPeople_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EditItemPeople_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function EditItemPeoplePanel(_ref){var _itemPeopleResponse$d,itemId=_ref.itemId,_useAuthParameters=(0,AuthParameters.h)(),conferencePath=_useAuthParameters.conferencePath,subconferenceId=_useAuthParameters.subconferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[subconferenceId]),itemPeopleResponse=EditItemPeople_slicedToArray((0,graphql.LyF)({variables:{itemId},context}),1)[0],itemPeople=null===(_itemPeopleResponse$d=itemPeopleResponse.data)||void 0===_itemPeopleResponse$d?void 0:_itemPeopleResponse$d.content_ItemProgramPerson,itemPeopleIds=(0,react.useMemo)((function(){return null==itemPeople?void 0:itemPeople.map((function(x){return x.id}))}),[itemPeople]);return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{spacing:2,alignItems:"flex-start",w:"100%",children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"Add or remove Program People associated with this item."}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{fontSize:"sm",children:"Please add people to the Program People table (optionally link them to their Registrant), then link them to this item."}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{fontSize:"sm",pb:2,children:"People are also treated as uploaders of all elements within the item. All roles have access to upload content."}),(0,jsx_runtime.jsxs)(chakra_ui_button_esm.hE,{children:[itemPeopleIds?(0,jsx_runtime.jsx)(AddItemPerson,{itemId,existingPeopleIds:itemPeopleIds}):void 0,(0,jsx_runtime.jsx)(LinkButton.Qj,{size:"sm",to:conferencePath+"/manage/people",children:(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Link opens in the same tab",children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"link",mr:2}),(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{children:"Manage Program People"})]})})})]}),itemPeopleResponse.fetching&&!itemPeople?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{label:"Loading people"}):void 0,itemPeople?(0,jsx_runtime.jsx)(ItemPersonsList,{itemPeople}):void 0]})}function AddItemPersonBody(_ref2){var _peopleResponse$data2,itemId=_ref2.itemId,existingPeopleIds=_ref2.existingPeopleIds,onClose=_ref2.onClose,conference=(0,useConference.fk)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,context=(0,react.useMemo)((function(){var _makeContext2;return(0,make_context.f)(((_makeContext2={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext2))}),[subconferenceId]),peopleResponse=EditItemPeople_slicedToArray((0,graphql.NA$)({variables:{conferenceId:conference.id,subconferenceCond:subconferenceId?{_eq:subconferenceId}:{_is_null:!0}},context}),1)[0],_useState2=EditItemPeople_slicedToArray((0,react.useState)(null),2),selectedPersonId=_useState2[0],setSelectedPersonId=_useState2[1],_useState4=EditItemPeople_slicedToArray((0,react.useState)("AUTHOR"),2),selectedRole=_useState4[0],setSelectedRole=_useState4[1],_useManageContent_Ins2=EditItemPeople_slicedToArray((0,graphql.PIh)(),2),insertItemPersonResponse=_useManageContent_Ins2[0],insertItemPerson=_useManageContent_Ins2[1],sortedPeople=(0,react.useMemo)((function(){var _peopleResponse$data;return null===(_peopleResponse$data=peopleResponse.data)||void 0===_peopleResponse$data?void 0:_peopleResponse$data.collection_ProgramPerson.filter((function(person){return!existingPeopleIds.includes(person.id)})).sort((function(x,y){return(0,maybeCompare.D)(x.name,y.name,(function(a,b){return a.localeCompare(b)}))}))}),[existingPeopleIds,null===(_peopleResponse$data2=peopleResponse.data)||void 0===_peopleResponse$data2?void 0:_peopleResponse$data2.collection_ProgramPerson]),toast=(0,chakra_ui_toast_esm.pm)();return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_popover_esm.Yt,{children:"Link program person"}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.b,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{spacing:2,children:[peopleResponse.fetching&&!sortedPeople?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{label:"Loading program people"}):void 0,sortedPeople?(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Person"}),(0,jsx_runtime.jsxs)(chakra_ui_select_esm.Ph,{value:null!=selectedPersonId?selectedPersonId:"",onChange:function onChange(ev){return setSelectedPersonId(""===ev.target.value?null:ev.target.value)},children:[(0,jsx_runtime.jsx)("option",{value:"",children:"Select a program person"}),sortedPeople.map((function(person){var _person$affiliation,_person$email;return(0,jsx_runtime.jsxs)("option",{value:person.id,children:[person.name," ",null!==(_person$affiliation=person.affiliation)&&void 0!==_person$affiliation&&_person$affiliation.length?"("+person.affiliation+")":""," <",null!==(_person$email=person.email)&&void 0!==_person$email&&_person$email.length?person.email:"No email",">"]},person.id)}))]})]}):void 0,(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Role"}),(0,jsx_runtime.jsxs)(chakra_ui_select_esm.Ph,{value:null!=selectedRole?selectedRole:"",onChange:function onChange(ev){return setSelectedRole(ev.target.value)},children:[(0,jsx_runtime.jsx)("option",{value:"AUTHOR",children:"Author"}),(0,jsx_runtime.jsx)("option",{value:"CHAIR",children:"Chair"}),(0,jsx_runtime.jsx)("option",{value:"PRESENTER",children:"Presenter"}),(0,jsx_runtime.jsx)("option",{value:"SESSION ORGANIZER",children:"Session Organizer"}),(0,jsx_runtime.jsx)("option",{value:"DISCUSSANT",children:"Discussant"}),(0,jsx_runtime.jsx)("option",{value:"REVIEWER",children:"Reviewer"})]})]})]})}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.DT,{textAlign:"right",children:(0,jsx_runtime.jsxs)(chakra_ui_button_esm.hE,{children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{size:"sm",onClick:onClose,children:"Cancel"}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{size:"sm",colorScheme:"purple",isDisabled:!selectedPersonId,isLoading:insertItemPersonResponse.fetching,onClick:EditItemPeople_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _headers,_e$message;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,insertItemPerson({itemId,personId:selectedPersonId,roleName:selectedRole,priority:existingPeopleIds.length},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers)}});case 3:onClose(),_context.next=9;break;case 6:_context.prev=6,_context.t0=_context.catch(0),toast({title:"Error linking person",description:null!==(_e$message=_context.t0.message)&&void 0!==_e$message?_e$message:_context.t0.toString(),isClosable:!0,duration:1e4,position:"bottom",status:"error"});case 9:case"end":return _context.stop()}}),_callee,null,[[0,6]])}))),children:"Add link"})]})})]})}function AddItemPerson(props){var _useDisclosure=(0,chakra_ui_hooks_esm.qY)(),onOpen=_useDisclosure.onOpen,onClose=_useDisclosure.onClose,isOpen=_useDisclosure.isOpen,bgColor=(0,chakra_ui_color_mode_esm.ff)("purple.50","purple.900");return(0,jsx_runtime.jsxs)(chakra_ui_popover_esm.J2,{placement:"bottom-start",isLazy:!0,isOpen,onOpen,onClose,children:[(0,jsx_runtime.jsx)(chakra_ui_popover_esm.xo,{children:(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{size:"sm",colorScheme:"purple",children:[(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"plus-square",mr:2}),(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{children:"Link person"}),(0,jsx_runtime.jsx)(chakra_ui_icons_esm.ChevronDownIcon,{ml:1})]})}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.yk,{bgColor,children:(0,jsx_runtime.jsx)(AddItemPersonBody,Object.assign({onClose},props))})]})}function ItemPersonsList(_ref4){var itemPeople=_ref4.itemPeople,subconferenceId=(0,AuthParameters.h)().subconferenceId,sortedReps=(0,react.useMemo)((function(){return es.HCG([function(x,y){return"PRESENTER"===x.roleName.toUpperCase()?"PRESENTER"===y.roleName.toUpperCase()?0:-1:"AUTHOR"===x.roleName.toUpperCase()?"PRESENTER"===y.roleName.toUpperCase()?1:"AUTHOR"===y.roleName.toUpperCase()?0:-1:"CHAIR"===x.roleName.toUpperCase()?"PRESENTER"===y.roleName.toUpperCase()||"AUTHOR"===y.roleName.toUpperCase()?1:"CHAIR"===y.roleName.toUpperCase()?0:-1:"AUTHOR"===y.roleName.toUpperCase()||"PRESENTER"===y.roleName.toUpperCase()||"CHAIR"===y.roleName.toUpperCase()?1:x.roleName.toUpperCase().localeCompare(y.roleName.toUpperCase())},function(x,y){return(0,maybeCompare.D)(x.priority,y.priority,(function(a,b){return a-b}))},function(x,y){var _x$person,_y$person;return(0,maybeCompare.D)(null===(_x$person=x.person)||void 0===_x$person?void 0:_x$person.name,null===(_y$person=y.person)||void 0===_y$person?void 0:_y$person.name,(function(a,b){return a.localeCompare(b)}))}],itemPeople)}),[itemPeople]),toast=(0,chakra_ui_toast_esm.pm)(),_useManageContent_Upd2=EditItemPeople_slicedToArray((0,graphql.JcC)(),2),updateItemProgramPersonResponse=_useManageContent_Upd2[0],updateItemProgramPerson=_useManageContent_Upd2[1],_useManageContent_Del2=EditItemPeople_slicedToArray((0,graphql.qGf)(),2),deleteItemPersonResponse=_useManageContent_Del2[0],deleteItemPerson=_useManageContent_Del2[1];return sortedReps.length>0?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h4",fontSize:"sm",textAlign:"left",py:2,children:"People"}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{w:"100%",overflow:"auto",children:(0,jsx_runtime.jsx)(chakra_ui_layout_esm.gC,{minW:"max-content",alignItems:"flex-start",children:sortedReps.map((function(itemProgramPerson,idx){var _itemProgramPerson$pe,_itemProgramPerson$pe2,_itemProgramPerson$pe3,_itemProgramPerson$pe4,_itemProgramPerson$pe5,_itemProgramPerson$pe6;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{w:"100%",children:[(0,jsx_runtime.jsxs)(chakra_ui_button_esm.hE,{mr:2,children:[0!==idx&&sortedReps[idx-1].roleName===sortedReps[idx].roleName?(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{size:"xs",onClick:function onClick(){var _headers2,_headers3,previousItemProgramPerson=sortedReps[idx-1];updateItemProgramPerson({itemPersonId:itemProgramPerson.id,priority:idx-1,roleName:itemProgramPerson.roleName},{fetchOptions:{headers:(_headers2={},_headers2[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers2)}}),updateItemProgramPerson({itemPersonId:previousItemProgramPerson.id,priority:idx,roleName:previousItemProgramPerson.roleName},{fetchOptions:{headers:(_headers3={},_headers3[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers3)}})},children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"arrow-alt-circle-up"})}):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{w:"1.7em"}),idx!==sortedReps.length-1&&sortedReps[idx+1].roleName===sortedReps[idx].roleName?(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{size:"xs",onClick:function onClick(){var _headers4,_headers5,previousItemProgramPerson=sortedReps[idx+1];updateItemProgramPerson({itemPersonId:itemProgramPerson.id,priority:idx+1,roleName:itemProgramPerson.roleName},{fetchOptions:{headers:(_headers4={},_headers4[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers4)}}),updateItemProgramPerson({itemPersonId:previousItemProgramPerson.id,priority:idx,roleName:previousItemProgramPerson.roleName},{fetchOptions:{headers:(_headers5={},_headers5[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers5)}})},children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"arrow-alt-circle-down"})}):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{w:"1.7em"})]}),(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:null!==(_itemProgramPerson$pe=itemProgramPerson.person)&&void 0!==_itemProgramPerson$pe&&_itemProgramPerson$pe.registrantId?"Person is linked to registrant.":"Person is not linked to registrant.",children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:null!==(_itemProgramPerson$pe2=itemProgramPerson.person)&&void 0!==_itemProgramPerson$pe2&&_itemProgramPerson$pe2.registrantId?"link":"unlink",color:null!==(_itemProgramPerson$pe3=itemProgramPerson.person)&&void 0!==_itemProgramPerson$pe3&&_itemProgramPerson$pe3.registrantId?"purple.400":"yellow.400"})}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{flexDir:["column","column","row"],flexWrap:"wrap",justifyContent:"flex-start",alignItems:"flex-start",children:[(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{mx:2,children:null===(_itemProgramPerson$pe4=itemProgramPerson.person)||void 0===_itemProgramPerson$pe4?void 0:_itemProgramPerson$pe4.name}),(0,jsx_runtime.jsxs)(chakra_ui_system_esm.m$.span,{ml:["0","0","auto"],mr:2,children:["<",null!==(_itemProgramPerson$pe5=itemProgramPerson.person)&&void 0!==_itemProgramPerson$pe5&&null!==(_itemProgramPerson$pe6=_itemProgramPerson$pe5.email)&&void 0!==_itemProgramPerson$pe6&&_itemProgramPerson$pe6.length?itemProgramPerson.person.email:"No email",">"]})]}),(0,jsx_runtime.jsxs)(chakra_ui_select_esm.Ph,{ml:"auto",size:"xs",value:itemProgramPerson.roleName,w:"auto",isDisabled:updateItemProgramPersonResponse.fetching,onChange:function onChange(ev){var _itemProgramPerson$pr,_headers6;updateItemProgramPerson({itemPersonId:itemProgramPerson.id,priority:null!==(_itemProgramPerson$pr=itemProgramPerson.priority)&&void 0!==_itemProgramPerson$pr?_itemProgramPerson$pr:idx,roleName:ev.target.value},{fetchOptions:{headers:(_headers6={},_headers6[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers6)}})},minW:"5em",children:[(0,jsx_runtime.jsx)("option",{value:"AUTHOR",children:"Author"}),(0,jsx_runtime.jsx)("option",{value:"CHAIR",children:"Chair"}),(0,jsx_runtime.jsx)("option",{value:"PRESENTER",children:"Presenter"}),(0,jsx_runtime.jsx)("option",{value:"SESSION ORGANIZER",children:"Session Organizer"}),(0,jsx_runtime.jsx)("option",{value:"DISCUSSANT",children:"Discussant"}),(0,jsx_runtime.jsx)("option",{value:"REVIEWER",children:"Reviewer"})]}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{ml:2,"aria-label":"Delete",colorScheme:"red",size:"xs",isDisabled:deleteItemPersonResponse.fetching,onClick:EditItemPeople_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _headers7,_e$message2;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:try{deleteItemPerson({itemPersonId:itemProgramPerson.id},{fetchOptions:{headers:(_headers7={},_headers7[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers7)}})}catch(e){toast({title:"Error unlinking person",description:null!==(_e$message2=e.message)&&void 0!==_e$message2?_e$message2:e.toString(),isClosable:!0,duration:1e4,position:"bottom",status:"error"})}case 1:case"end":return _context2.stop()}}),_callee2)}))),children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"trash-alt"})})]},itemProgramPerson.id),idx!==sortedReps.length-1&&sortedReps[idx+1].roleName!==sortedReps[idx].roleName?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.iz,{}):void 0]})}))})})]}):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:"No people linked to this item."})}EditItemPeoplePanel.displayName="EditItemPeoplePanel",(0,urql_core.Ps)(EditItemPeople_templateObject||(EditItemPeople_templateObject=function EditItemPeople_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query ManageContent_SelectProgramPeople($conferenceId: uuid!, $subconferenceCond: uuid_comparison_exp!) {\n        collection_ProgramPerson(where: { conferenceId: { _eq: $conferenceId }, subconferenceId: $subconferenceCond }) {\n            ...ManageContent_ProgramPerson\n        }\n    }\n\n    mutation ManageContent_InsertItemProgramPerson(\n        $personId: uuid!\n        $roleName: String!\n        $priority: Int!\n        $itemId: uuid!\n    ) {\n        insert_content_ItemProgramPerson_one(\n            object: { personId: $personId, itemId: $itemId, priority: $priority, roleName: $roleName }\n        ) {\n            ...ManageContent_ItemProgramPerson\n        }\n    }\n\n    mutation ManageContent_UpdateItemProgramPerson($itemPersonId: uuid!, $priority: Int!, $roleName: String!) {\n        update_content_ItemProgramPerson_by_pk(\n            pk_columns: { id: $itemPersonId }\n            _set: { priority: $priority, roleName: $roleName }\n        ) {\n            ...ManageContent_ItemProgramPerson\n        }\n    }\n\n    mutation ManageContent_DeleteItemProgramPerson($itemPersonId: uuid!) {\n        delete_content_ItemProgramPerson_by_pk(id: $itemPersonId) {\n            id\n        }\n    }\n"]))),AddItemPerson.displayName="AddItemPerson";try{EditItemPeoplePanel.displayName="EditItemPeoplePanel",EditItemPeoplePanel.__docgenInfo={description:"",displayName:"EditItemPeoplePanel",props:{itemId:{defaultValue:null,description:"",name:"itemId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Item/EditItemPeople.tsx#EditItemPeoplePanel"]={docgenInfo:EditItemPeoplePanel.__docgenInfo,name:"EditItemPeoplePanel",path:"src/aspects/Conference/Manage/Content/v2/Item/EditItemPeople.tsx#EditItemPeoplePanel"})}catch(__react_docgen_typescript_loader_error){}function EditUploadsRemaining(_ref){var elementId=_ref.elementId,uploadsRemaining=_ref.uploadsRemaining,isUpdatingUploadable=_ref.isUpdatingUploadable,updateUploadableElement=_ref.updateUploadableElement;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.kC,{w:"100%",mt:4,mb:2,alignItems:"center",children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h4",fontSize:"sm",textAlign:"left",pl:1,mr:"auto",children:"Uploads"}),null!==uploadsRemaining?(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{as:chakra_ui_layout_esm.Ug,spacing:0,fontSize:"sm",w:"auto",alignItems:"center",children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{m:0,pr:1,pb:1,children:"Attempts remaining:"}),(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Y2,{size:"xs",minW:0,w:"50px",isDisabled:isUpdatingUploadable,value:uploadsRemaining,onChange:function onChange(_valAsStr,valAsNum){var newVal=Math.max(valAsNum,0);newVal!==uploadsRemaining&&updateUploadableElement({elementId,element:{uploadsRemaining:newVal}})},children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.zu,{}),(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Fi,{children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.WQ,{"aria-label":"Increment"}),(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.Y_,{"aria-label":"Decrement"})]})]})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{fontSize:"sm",children:"Attempts remaining:"}),(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"infinity",fontSize:"xs",ml:2})]})]})})}try{EditUploadsRemaining.displayName="EditUploadsRemaining",EditUploadsRemaining.__docgenInfo={description:"",displayName:"EditUploadsRemaining",props:{elementId:{defaultValue:null,description:"",name:"elementId",required:!0,type:{name:"string"}},uploadsRemaining:{defaultValue:null,description:"",name:"uploadsRemaining",required:!0,type:{name:"number | null"}},isUpdatingUploadable:{defaultValue:null,description:"",name:"isUpdatingUploadable",required:!0,type:{name:"boolean"}},updateUploadableElement:{defaultValue:null,description:"",name:"updateUploadableElement",required:!0,type:{name:"(vars: Exact<{ elementId: any; element: Content_Element_Set_Input; }>) => Promise<unknown>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Element/EditUploadsRemaining.tsx#EditUploadsRemaining"]={docgenInfo:EditUploadsRemaining.__docgenInfo,name:"EditUploadsRemaining",path:"src/aspects/Conference/Manage/Content/v2/Element/EditUploadsRemaining.tsx#EditUploadsRemaining"})}catch(__react_docgen_typescript_loader_error){}var EditElement_templateObject,AddContentMenu_templateObject,chakra_ui_switch_esm=__webpack_require__("../node_modules/.pnpm/@chakra-ui+switch@1.3.5_381b254eb05ba0b21fa13fc526cde82c/node_modules/@chakra-ui/switch/dist/chakra-ui-switch.esm.js");function LayoutEditor(_ref){var layoutDataBlob=_ref.layoutDataBlob,elementType=_ref.elementType,update=_ref.update,newLayoutData=(0,react.useCallback)((function(contentType){switch(contentType){case graphql.bK7.ImageUrl:case graphql.bK7.ImageFile:return{contentType,wide:!1,priority:0,isLogo:!1};default:return{contentType,wide:!1,priority:0}}}),[]),layoutData=(0,react.useMemo)((function(){return null!=layoutDataBlob?layoutDataBlob:newLayoutData(elementType)}),[elementType,layoutDataBlob,newLayoutData]);return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{alignItems:"flex-start",mt:4,children:[(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{as:chakra_ui_layout_esm.Ug,spacing:2,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{m:0,children:"Wide"}),(0,jsx_runtime.jsx)(chakra_ui_switch_esm.r,{m:0,size:"sm",isChecked:layoutData.wide,onChange:function onChange(event){update(Object.assign({},layoutData,{wide:event.target.checked}))}}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{m:0,children:"Display this content across both columns."})]}),layoutData.contentType===graphql.bK7.ImageUrl||layoutData.contentType===graphql.bK7.ImageFile?(0,jsx_runtime.jsxs)(chakra_ui_form_control_esm.NI,{as:chakra_ui_layout_esm.Ug,spacing:2,children:[(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{m:0,children:"Use as logo?"}),(0,jsx_runtime.jsx)(chakra_ui_switch_esm.r,{m:0,size:"sm",isChecked:layoutData.isLogo,onChange:function onChange(event){update(Object.assign({},layoutData,{isLogo:event.target.checked}))}}),(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.Q6,{m:0,children:"Use this image as the sponsor logo."})]}):void 0]})}LayoutEditor.displayName="LayoutEditor";try{LayoutEditor.displayName="LayoutEditor",LayoutEditor.__docgenInfo={description:"",displayName:"LayoutEditor",props:{layoutDataBlob:{defaultValue:null,description:"",name:"layoutDataBlob",required:!0,type:{name:"LayoutDataBlob | null"}},elementType:{defaultValue:null,description:"",name:"elementType",required:!0,type:{name:"enum",value:[{value:'"ABSTRACT"'},{value:'"ACTIVE_SOCIAL_ROOMS"'},{value:'"AUDIO_FILE"'},{value:'"AUDIO_LINK"'},{value:'"AUDIO_URL"'},{value:'"CONTENT_GROUP_LIST"'},{value:'"DIVIDER"'},{value:'"EXPLORE_PROGRAM_BUTTON"'},{value:'"EXPLORE_SCHEDULE_BUTTON"'},{value:'"EXTERNAL_EVENT_LINK"'},{value:'"IMAGE_FILE"'},{value:'"IMAGE_URL"'},{value:'"LINK"'},{value:'"LINK_BUTTON"'},{value:'"LIVE_PROGRAM_ROOMS"'},{value:'"PAPER_FILE"'},{value:'"PAPER_LINK"'},{value:'"PAPER_URL"'},{value:'"POSTER_FILE"'},{value:'"POSTER_URL"'},{value:'"SPONSOR_BOOTHS"'},{value:'"TEXT"'},{value:'"VIDEO_BROADCAST"'},{value:'"VIDEO_COUNTDOWN"'},{value:'"VIDEO_FILE"'},{value:'"VIDEO_FILLER"'},{value:'"VIDEO_LINK"'},{value:'"VIDEO_PREPUBLISH"'},{value:'"VIDEO_SPONSORS_FILLER"'},{value:'"VIDEO_TITLES"'},{value:'"VIDEO_URL"'},{value:'"WHOLE_SCHEDULE"'}]}},update:{defaultValue:null,description:"",name:"update",required:!0,type:{name:"(_updated: LayoutDataBlob) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Element/LayoutEditor.tsx#LayoutEditor"]={docgenInfo:LayoutEditor.__docgenInfo,name:"LayoutEditor",path:"src/aspects/Conference/Manage/Content/v2/Element/LayoutEditor.tsx#LayoutEditor"})}catch(__react_docgen_typescript_loader_error){}function EditElementInner_slicedToArray(arr,i){return function EditElementInner_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function EditElementInner_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function EditElementInner_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return EditElementInner_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EditElementInner_arrayLikeToArray(o,minLen)}(arr,i)||function EditElementInner_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EditElementInner_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function EditElementInner(props){var _props$element$upload,_props$element$layout2,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=props.element.subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[props.element.subconferenceId]),_useManageContent_Upd2=EditElementInner_slicedToArray((0,graphql.Cux)(),2),updateElementResponse=_useManageContent_Upd2[0],updateElement=_useManageContent_Upd2[1],itemType=props.element.typeName,baseType=content.M4[itemType],itemTemplate=(0,react.useMemo)((function(){return ElementBaseTemplates[baseType]}),[baseType]),descriptors=(0,react.useMemo)((function(){var _props$element$layout;return Object.assign({},props.element,{layoutData:null!==(_props$element$layout=props.element.layoutData)&&void 0!==_props$element$layout?_props$element$layout:null})}),[props.element]),editor=(0,react.useMemo)((function(){return itemTemplate.supported?(0,jsx_runtime.jsx)(itemTemplate.renderEditor,{data:descriptors,update:function update(updated){var updatedItem={data:updated.data,layoutData:updated.layoutData,isHidden:updated.isHidden,name:updated.name,typeName:updated.typeName,uploadsRemaining:updated.uploadsRemaining};updateElement({elementId:updated.id,element:updatedItem},context)}}):(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{children:["Cannot edit ",itemType," items."]})}),[context,descriptors,itemTemplate,itemType,updateElement]),readableTypeName=(0,react.useMemo)((function(){return props.element.typeName.split("_").map((function(x){return x[0]+x.substr(1).toLowerCase()})).reduce((function(acc,x){return acc+" "+x}))}),[props.element.typeName]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[updateElementResponse.error?(0,jsx_runtime.jsxs)(chakra_ui_alert_esm.bZ,{status:"error",children:[(0,jsx_runtime.jsx)(chakra_ui_alert_esm.zM,{}),(0,jsx_runtime.jsx)(chakra_ui_alert_esm.Cd,{children:"Error saving changes"}),(0,jsx_runtime.jsx)(chakra_ui_alert_esm.X,{children:updateElementResponse.error.message})]}):void 0,(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{fontSize:"sm",children:["Type: ",readableTypeName]}),(0,jsx_runtime.jsx)(EditUploadsRemaining,{elementId:props.element.id,uploadsRemaining:null!==(_props$element$upload=props.element.uploadsRemaining)&&void 0!==_props$element$upload?_props$element$upload:null,updateUploadableElement:function updateUploadableElement(data){return updateElement(data,context)},isUpdatingUploadable:updateElementResponse.fetching}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.iz,{my:2}),editor,(0,jsx_runtime.jsx)(LayoutEditor,{layoutDataBlob:null!==(_props$element$layout2=props.element.layoutData)&&void 0!==_props$element$layout2?_props$element$layout2:null,elementType:props.element.typeName,update:function update(layoutData){if(props.element){var newState=Object.assign({},props.element,{layoutData});updateElement({elementId:newState.id,element:{data:newState.data,layoutData:newState.layoutData}},context)}}})]})}try{EditElementInner.displayName="EditElementInner",EditElementInner.__docgenInfo={description:"",displayName:"EditElementInner",props:{element:{defaultValue:null,description:"",name:"element",required:!0,type:{name:"ManageContent_ElementFragment"}},openSendSubmissionRequests:{defaultValue:null,description:"",name:"openSendSubmissionRequests",required:!0,type:{name:"(personIds: string[]) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Element/EditElementInner.tsx#EditElementInner"]={docgenInfo:EditElementInner.__docgenInfo,name:"EditElementInner",path:"src/aspects/Conference/Manage/Content/v2/Element/EditElementInner.tsx#EditElementInner"})}catch(__react_docgen_typescript_loader_error){}function EditElement_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function EditElement_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){EditElement_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){EditElement_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function EditElement_slicedToArray(arr,i){return function EditElement_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function EditElement_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function EditElement_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return EditElement_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EditElement_arrayLikeToArray(o,minLen)}(arr,i)||function EditElement_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EditElement_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function EditElement(_ref){var element=_ref.element,idx=_ref.idx,previousElement=_ref.previousElement,nextElement=_ref.nextElement,openSendSubmissionRequests=_ref.openSendSubmissionRequests,subconferenceId=(0,AuthParameters.h)().subconferenceId,_useManageContent_Upd2=EditElement_slicedToArray((0,graphql.Cux)(),2),updateElementResponse=_useManageContent_Upd2[0],updateElement=_useManageContent_Upd2[1],_useManageContent_Del2=EditElement_slicedToArray((0,graphql.AQQ)(),2),deleteElementResponse=_useManageContent_Del2[0],deleteElement=_useManageContent_Del2[1],toast=(0,chakra_ui_toast_esm.pm)(),_useState2=EditElement_slicedToArray((0,react.useState)(!1),2),isEditingTitle=_useState2[0],setIsEditingTitle=_useState2[1],_useState4=EditElement_slicedToArray((0,react.useState)(element.name),2),newName=_useState4[0],setNewName=_useState4[1],_useDisclosure=(0,chakra_ui_hooks_esm.qY)(),confirmDelete_IsOpen=_useDisclosure.isOpen,confirmDelete_OnOpen=_useDisclosure.onOpen,confirmDelete_OnClose=_useDisclosure.onClose,cancelRef=(0,react.useRef)(null),bgColor=(0,chakra_ui_color_mode_esm.ff)("gray.100","gray.800");return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.Qd,{w:"100%",children:function children(_ref2){var isExpanded=_ref2.isExpanded;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chakra_ui_accordion_esm.KF,{as:"div",cursor:"pointer",tabIndex:0,bgColor,onKeyUp:function onKeyUp(ev){"Enter"!==ev.key&&" "!==ev.key||ev.target.click()},children:[element?(0,jsx_runtime.jsxs)(chakra_ui_button_esm.hE,{mr:2,children:[(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Move element up",children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{size:"xs",isDisabled:!previousElement,onClick:function onClick(ev){if(ev.stopPropagation(),previousElement){var _headers,_headers2,layoutDataA=Object.assign({contentType:element.typeName,wide:!1},element.layoutData,{priority:idx-1});updateElement({elementId:element.id,element:{layoutData:layoutDataA}},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers)}});var layoutDataB=Object.assign({contentType:previousElement.typeName,wide:!1},previousElement.layoutData,{priority:idx});updateElement({elementId:previousElement.id,element:{layoutData:layoutDataB}},{fetchOptions:{headers:(_headers2={},_headers2[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers2)}})}},onKeyUp:function onKeyUp(ev){ev.stopPropagation()},"aria-label":"Move item up",isLoading:updateElementResponse.fetching,children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"arrow-alt-circle-up"})})}),(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Move element down",children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{size:"xs",isDisabled:!nextElement,onClick:function onClick(ev){if(ev.stopPropagation(),nextElement){var _headers3,_headers4,layoutDataA=Object.assign({contentType:element.typeName,wide:!1},element.layoutData,{priority:idx+1});updateElement({elementId:element.id,element:{layoutData:layoutDataA}},{fetchOptions:{headers:(_headers3={},_headers3[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers3)}});var layoutDataB=Object.assign({contentType:nextElement.typeName,wide:!1},nextElement.layoutData,{priority:idx});updateElement({elementId:nextElement.id,element:{layoutData:layoutDataB}},{fetchOptions:{headers:(_headers4={},_headers4[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers4)}})}},onKeyUp:function onKeyUp(ev){ev.stopPropagation()},"aria-label":"Move item down",isLoading:updateElementResponse.fetching,children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"arrow-alt-circle-down"})})})]}):void 0,(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:element.isHidden?"Show this element to attendees.":"Hide this element from attendees.",children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{"aria-label":element.isHidden?"Show this element to attendees.":"Hide this element from attendees.",mr:4,size:"xs",isLoading:updateElementResponse.fetching,onClick:function onClick(ev){var _headers5;ev.stopPropagation();var isHidden=!element.isHidden;updateElement({elementId:element.id,element:{isHidden}},{fetchOptions:{headers:(_headers5={},_headers5[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers5)}})},onKeyUp:function onKeyUp(ev){ev.stopPropagation()},children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:element.isHidden?"eye-slash":"eye"})})}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{textAlign:"left",mr:2,minW:"auto",w:"auto",children:["layoutData"in element?void 0:(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{children:"(Uploadable)"}),isEditingTitle?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,{size:"sm",value:newName,onChange:function onChange(ev){setNewName(ev.target.value)},onClick:function onClick(ev){ev.stopPropagation()},onKeyDown:function onKeyDown(ev){ev.stopPropagation()},onKeyPress:function onKeyPress(ev){ev.stopPropagation()},onKeyUp:function onKeyUp(ev){ev.stopPropagation()}}),(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Save element name",children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"purple",size:"xs","aria-label":"Save element name",mx:2,isLoading:updateElementResponse.fetching,onClick:function onClick(ev){var _headers6;ev.stopPropagation(),setIsEditingTitle(!1),updateElement({elementId:element.id,element:{name:newName}},{fetchOptions:{headers:(_headers6={},_headers6[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers6)}})},onKeyUp:function onKeyUp(ev){ev.stopPropagation()},children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"save"})})}),(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Discard name changes",children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"yellow",size:"xs","aria-label":"Discard name changes",mx:2,isLoading:updateElementResponse.fetching,onClick:function onClick(ev){ev.stopPropagation(),setIsEditingTitle(!1),setNewName(element.name)},onKeyUp:function onKeyUp(ev){ev.stopPropagation()},children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"ban"})})})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{textOverflow:"wrap",wordBreak:"break-all",noOfLines:1,minW:"auto",w:"auto",children:element.name}),(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Edit element name",children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{size:"xs","aria-label":"Edit element name",mx:2,isLoading:updateElementResponse.fetching,onClick:function onClick(ev){ev.stopPropagation(),setIsEditingTitle(!0)},onKeyUp:function onKeyUp(ev){ev.stopPropagation()},children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"edit"})})})]})]}),(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Delete element",children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.hU,{ref:cancelRef,colorScheme:"red",size:"xs","aria-label":"Delete element",icon:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"trash-alt"}),onClick:function(){var _ref3=EditElement_asyncToGenerator(regeneratorRuntime.mark((function _callee(ev){return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:ev.stopPropagation(),confirmDelete_OnOpen();case 2:case"end":return _context.stop()}}),_callee)})));return function(_x){return _ref3.apply(this,arguments)}}(),onKeyUp:function onKeyUp(ev){ev.stopPropagation()},isLoading:deleteElementResponse.fetching,ml:"auto"})}),(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.XE,{ml:2})]}),(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.Hk,{pb:4,children:isExpanded?(0,jsx_runtime.jsx)(EditElementInner,{element,openSendSubmissionRequests}):void 0})]})}}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.aR,{isOpen:confirmDelete_IsOpen,leastDestructiveRef:cancelRef,onClose:confirmDelete_OnClose,children:(0,jsx_runtime.jsx)(chakra_ui_modal_esm.dh,{children:(0,jsx_runtime.jsxs)(chakra_ui_modal_esm._T,{children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.fY,{fontSize:"lg",fontWeight:"bold",children:"Confirm Delete?"}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.iP,{children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{children:["Are you sure you want to delete ",element.name,"? You can't undo this deletion afterwards."]})}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.xo,{children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{ref:cancelRef,onClick:confirmDelete_OnClose,children:"Cancel"}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"red",onClick:EditElement_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _headers7;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,deleteElement({elementId:element.id},{fetchOptions:{headers:(_headers7={},_headers7[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers7)}});case 3:confirmDelete_OnClose(),_context2.next=9;break;case 6:_context2.prev=6,_context2.t0=_context2.catch(0),toast({status:"error",title:"Could not delete element"});case 9:case"end":return _context2.stop()}}),_callee2,null,[[0,6]])}))),ml:3,children:"Delete"})]})]})})})]})}(0,urql_core.Ps)(EditElement_templateObject||(EditElement_templateObject=function EditElement_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation ManageContent_DeleteElement($elementId: uuid!) {\n        delete_content_Element_by_pk(id: $elementId) {\n            id\n        }\n    }\n\n    mutation ManageContent_UpdateElement($elementId: uuid!, $element: content_Element_set_input!) {\n        update_content_Element_by_pk(pk_columns: { id: $elementId }, _set: $element) {\n            ...ManageContent_Element\n        }\n    }\n"])));try{EditElement.displayName="EditElement",EditElement.__docgenInfo={description:"",displayName:"EditElement",props:{element:{defaultValue:null,description:"",name:"element",required:!0,type:{name:"ManageContent_ElementFragment"}},idx:{defaultValue:null,description:"",name:"idx",required:!0,type:{name:"number"}},previousElement:{defaultValue:null,description:"",name:"previousElement",required:!1,type:{name:"ManageContent_ElementFragment"}},nextElement:{defaultValue:null,description:"",name:"nextElement",required:!1,type:{name:"ManageContent_ElementFragment"}},openSendSubmissionRequests:{defaultValue:null,description:"",name:"openSendSubmissionRequests",required:!0,type:{name:"(personIds: string[]) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Element/EditElement.tsx#EditElement"]={docgenInfo:EditElement.__docgenInfo,name:"EditElement",path:"src/aspects/Conference/Manage/Content/v2/Element/EditElement.tsx#EditElement"})}catch(__react_docgen_typescript_loader_error){}function EditElements_toConsumableArray(arr){return function EditElements_arrayWithoutHoles(arr){if(Array.isArray(arr))return EditElements_arrayLikeToArray(arr)}(arr)||function EditElements_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function EditElements_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return EditElements_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EditElements_arrayLikeToArray(o,minLen)}(arr)||function EditElements_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function EditElements_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function EditElements(_ref){var itemId=_ref.itemId,elements=_ref.elements,itemType=_ref.itemType,_openSendSubmissionRequests=_ref.openSendSubmissionRequests,sortedElements=(0,react.useMemo)((function(){var sortedElements=EditElements_toConsumableArray(elements);return sortedElements.sort((function(a,b){var layoutA=a.layoutData,layoutB=b.layoutData;if(layoutA&&layoutB){if(!("priority"in layoutA)&&!("priority"in layoutB))return a.name.localeCompare(b.name);if(!("priority"in layoutA))return 1;if(!("priority"in layoutB))return-1;var priorityOrder=layoutA.priority-layoutB.priority;return 0===priorityOrder?a.name.localeCompare(b.name):priorityOrder}return layoutA?-1:layoutB?1:a.name.localeCompare(b.name)})),sortedElements}),[elements]),bgColor=(0,chakra_ui_color_mode_esm.ff)("gray.100","gray.800");return(0,jsx_runtime.jsxs)(chakra_ui_accordion_esm.UQ,{allowToggle:!0,allowMultiple:!0,w:"100%",children:[itemType!==graphql.gqi.LandingPage&&itemType!==graphql.gqi.Session?(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.Qd,{w:"100%",children:function children(_ref2){var isExpanded=_ref2.isExpanded;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(chakra_ui_accordion_esm.KF,{bgColor,children:["People",(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.XE,{ml:"auto"})]}),(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.Hk,{pb:4,children:isExpanded?(0,jsx_runtime.jsx)(EditItemPeoplePanel,{itemId}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{})})]})}}):void 0,itemType===graphql.gqi.Sponsor?(0,jsx_runtime.jsxs)(chakra_ui_accordion_esm.Qd,{w:"100%",children:[(0,jsx_runtime.jsxs)(chakra_ui_accordion_esm.KF,{bgColor,children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xu,{flex:"1",textAlign:"left",children:[(0,jsx_runtime.jsx)(chakra_ui_icons_esm.InfoIcon,{mr:2,verticalAlign:"middle",mb:1}),(0,jsx_runtime.jsx)(chakra_ui_system_esm.m$.span,{children:"How to add a sponsor's logo"})]}),(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.XE,{})]}),(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.Hk,{pb:4,children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.GS,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:"Add an element of type Image file"}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:"Enable the Logo option"}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:["For correct display, please also Hide",(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"eye-slash",fontSize:"xs",mb:1,ml:1})," the element"]}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:"Upload the logo file"})]})})]}):void 0,sortedElements.map((function(item,idx){return(0,jsx_runtime.jsx)(EditElement,{element:item,idx,previousElement:sortedElements[idx-1],nextElement:sortedElements[idx+1],openSendSubmissionRequests:function openSendSubmissionRequests(personIds){return _openSendSubmissionRequests(itemId,personIds)}},item.id)}))]})}EditElements.displayName="EditElements";try{EditElements.displayName="EditElements",EditElements.__docgenInfo={description:"",displayName:"EditElements",props:{itemId:{defaultValue:null,description:"",name:"itemId",required:!0,type:{name:"string"}},itemType:{defaultValue:null,description:"",name:"itemType",required:!0,type:{name:"enum",value:[{value:'"DEMONSTRATION"'},{value:'"KEYNOTE"'},{value:'"LANDING_PAGE"'},{value:'"OTHER"'},{value:'"PAPER"'},{value:'"POSTER"'},{value:'"PRESENTATION"'},{value:'"SESSION"'},{value:'"SESSION_Q_AND_A"'},{value:'"SOCIAL"'},{value:'"SPONSOR"'},{value:'"SWAG_BAG"'},{value:'"SYMPOSIUM"'},{value:'"TUTORIAL"'},{value:'"WORKSHOP"'}]}},openSendSubmissionRequests:{defaultValue:null,description:"",name:"openSendSubmissionRequests",required:!0,type:{name:"(itemId: string, personIds: string[]) => void"}},__typename:{defaultValue:null,description:"",name:"__typename",required:!1,type:{name:"enum",value:[{value:'"content_Item"'}]}},typeName:{defaultValue:null,description:"",name:"typeName",required:!1,type:{name:"enum",value:[{value:'"DEMONSTRATION"'},{value:'"KEYNOTE"'},{value:'"LANDING_PAGE"'},{value:'"OTHER"'},{value:'"PAPER"'},{value:'"POSTER"'},{value:'"PRESENTATION"'},{value:'"SESSION"'},{value:'"SESSION_Q_AND_A"'},{value:'"SOCIAL"'},{value:'"SPONSOR"'},{value:'"SWAG_BAG"'},{value:'"SYMPOSIUM"'},{value:'"TUTORIAL"'},{value:'"WORKSHOP"'}]}},chatId:{defaultValue:null,description:"",name:"chatId",required:!1,type:{name:"any"}},room:{defaultValue:null,description:"",name:"room",required:!1,type:{name:'{ readonly __typename?: "room_Room"; readonly id: any; readonly name: string; readonly conferenceId: any; readonly subconferenceId?: any; } | null'}},elements:{defaultValue:null,description:"",name:"elements",required:!0,type:{name:"readonly ManageContent_ElementFragment[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Element/EditElements.tsx#EditElements"]={docgenInfo:EditElements.__docgenInfo,name:"EditElements",path:"src/aspects/Conference/Manage/Content/v2/Element/EditElements.tsx#EditElements"})}catch(__react_docgen_typescript_loader_error){}function AddContentMenu_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function AddContentMenu_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){AddContentMenu_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){AddContentMenu_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function AddContentMenu_slicedToArray(arr,i){return function AddContentMenu_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function AddContentMenu_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function AddContentMenu_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return AddContentMenu_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AddContentMenu_arrayLikeToArray(o,minLen)}(arr,i)||function AddContentMenu_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AddContentMenu_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function AddContentMenu(_ref){var itemId=_ref.itemId,onCreate=_ref.onCreate,toast=(0,chakra_ui_toast_esm.pm)(),conference=(0,useConference.fk)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,createElement=AddContentMenu_slicedToArray((0,graphql.Eox)(),2)[1],contentTypeOptions=(0,react.useMemo)((function(){return Object.keys(graphql.bK7).filter((function(key){if("string"==typeof graphql.bK7[key]){var t=graphql.bK7[key],baseT=ElementBaseTemplates[content.M4[t]];return baseT.supported&&baseT.allowCreate.includes(t)}return!1})).map((function(key){var v=graphql.bK7[key];return{label:v.split("_").map((function(x){return x[0]+x.substr(1).toLowerCase()})).reduce((function(acc,x){return acc+" "+x})),value:v}}))}),[]);return(0,jsx_runtime.jsxs)(chakra_ui_menu_esm.v2,{size:"sm",children:[(0,jsx_runtime.jsx)(chakra_ui_menu_esm.j2,{size:"sm",m:1,mb:2,flex:"0 0 auto",as:chakra_ui_button_esm.zx,rightIcon:(0,jsx_runtime.jsx)(chakra_ui_icons_esm.ChevronDownIcon,{}),children:"Add element"}),(0,jsx_runtime.jsx)(chakra_ui_menu_esm.qy,{maxH:"30vh",overflowY:"auto",children:contentTypeOptions.map((function(typeOpt){return(0,jsx_runtime.jsx)(chakra_ui_menu_esm.sN,{onClick:AddContentMenu_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _headers,_result$data,_result$data$insert_c,template,newContent,obj,result,_result$data2,_result$data2$insert_;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,template=ElementBaseTemplates[content.M4[typeOpt.value]],esm.h.truthy(template.supported),newContent=template.createDefault(typeOpt.value,conference.id,subconferenceId,itemId),obj={conferenceId:conference.id,subconferenceId,itemId,data:newContent.data,typeName:newContent.typeName,name:newContent.name,isHidden:newContent.isHidden,uploadsRemaining:newContent.uploadsRemaining,layoutData:{contentType:newContent.typeName,wide:!1}},_context.next=7,createElement({object:obj},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers)}});case 7:result=_context.sent,null!==(_result$data=result.data)&&void 0!==_result$data&&null!==(_result$data$insert_c=_result$data.insert_content_Element_one)&&void 0!==_result$data$insert_c&&_result$data$insert_c.id&&onCreate(null===(_result$data2=result.data)||void 0===_result$data2||null===(_result$data2$insert_=_result$data2.insert_content_Element_one)||void 0===_result$data2$insert_?void 0:_result$data2$insert_.id),_context.next=15;break;case 11:_context.prev=11,_context.t0=_context.catch(0),console.error("Could not create new ContenItem",_context.t0),toast({status:"error",title:"Could not create new content",description:_context.t0.message});case 15:case"end":return _context.stop()}}),_callee,null,[[0,11]])}))),children:typeOpt.label},typeOpt.value)}))})]})}(0,urql_core.Ps)(AddContentMenu_templateObject||(AddContentMenu_templateObject=function AddContentMenu_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation AddContentMenu_CreateElement($object: content_Element_insert_input!) {\n        insert_content_Element_one(object: $object) {\n            ...ManageContent_Element\n        }\n    }\n"]))),AddContentMenu.displayName="AddContentMenu";try{AddContentMenu.displayName="AddContentMenu",AddContentMenu.__docgenInfo={description:"",displayName:"AddContentMenu",props:{itemId:{defaultValue:null,description:"",name:"itemId",required:!0,type:{name:"string"}},onCreate:{defaultValue:null,description:"",name:"onCreate",required:!0,type:{name:"(newId: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Item/AddContentMenu.tsx#AddContentMenu"]={docgenInfo:AddContentMenu.__docgenInfo,name:"AddContentMenu",path:"src/aspects/Conference/Manage/Content/v2/Item/AddContentMenu.tsx#AddContentMenu"})}catch(__react_docgen_typescript_loader_error){}var CreateRoomButton_templateObject,ManageTagsModal_templateObject,_excluded=["itemId","buttonText","refetch"];function CreateRoomButton_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function CreateRoomButton_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){CreateRoomButton_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){CreateRoomButton_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function CreateRoomButton_slicedToArray(arr,i){return function CreateRoomButton_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function CreateRoomButton_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function CreateRoomButton_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return CreateRoomButton_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CreateRoomButton_arrayLikeToArray(o,minLen)}(arr,i)||function CreateRoomButton_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CreateRoomButton_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function CreateRoomButton(_ref){var groupId=_ref.itemId,_ref$buttonText=_ref.buttonText,buttonText=void 0===_ref$buttonText?"Create discussion room":_ref$buttonText,refetch=_ref.refetch,props=_objectWithoutProperties(_ref,_excluded),conference=(0,useConference.fk)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,toast=(0,chakra_ui_toast_esm.pm)(),createVideoChatMutation=CreateRoomButton_slicedToArray((0,graphql.Qgs)(),2)[1],_useState2=CreateRoomButton_slicedToArray((0,react.useState)(!1),2),creatingVideoChat=_useState2[0],setCreatingVideoChat=_useState2[1],createVideoChat=(0,react.useCallback)(CreateRoomButton_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _headers,_yield$createVideoCha,data,_data$createItemRoom;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(groupId){_context.next=2;break}return _context.abrupt("return");case 2:return _context.prev=2,setCreatingVideoChat(!0),_context.next=6,createVideoChatMutation({conferenceId:conference.id,itemId:groupId},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers)}});case 6:if(_yield$createVideoCha=_context.sent,null!=(data=_yield$createVideoCha.data)&&data.createItemRoom&&data.createItemRoom.roomId){_context.next=10;break}throw new Error("No data returned: "+(null==data||null===(_data$createItemRoom=data.createItemRoom)||void 0===_data$createItemRoom?void 0:_data$createItemRoom.message));case 10:null==refetch||refetch(),_context.next=17;break;case 13:_context.prev=13,_context.t0=_context.catch(2),toast({status:"error",title:"Failed to create room.",description:null===_context.t0||void 0===_context.t0?void 0:_context.t0.message}),setCreatingVideoChat(!1);case 17:case"end":return _context.stop()}}),_callee,null,[[2,13]])}))),[conference.id,createVideoChatMutation,groupId,refetch,subconferenceId,toast]);return(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,Object.assign({isLoading:creatingVideoChat,onClick:createVideoChat},props,{children:buttonText}))}(0,urql_core.Ps)(CreateRoomButton_templateObject||(CreateRoomButton_templateObject=function CreateRoomButton_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation Item_CreateRoom($conferenceId: uuid!, $subconferenceId: uuid, $itemId: uuid!) {\n        createItemRoom(conferenceId: $conferenceId, subconferenceId: $subconferenceId, itemId: $itemId) {\n            roomId\n            message\n        }\n    }\n"]))),CreateRoomButton.displayName="CreateRoomButton";try{CreateRoomButton.displayName="CreateRoomButton",CreateRoomButton.__docgenInfo={description:"",displayName:"CreateRoomButton",props:{itemId:{defaultValue:null,description:"",name:"itemId",required:!0,type:{name:"string | undefined"}},buttonText:{defaultValue:{value:"Create discussion room"},description:"",name:"buttonText",required:!1,type:{name:"string"}},refetch:{defaultValue:null,description:"",name:"refetch",required:!1,type:{name:"(() => void)"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"As<any>"}},_hover:{defaultValue:null,description:"Styles for CSS selector `&:hover`",name:"_hover",required:!1,type:{name:"CSSObject"}},_active:{defaultValue:null,description:"Styles for CSS Selector `&:active`",name:"_active",required:!1,type:{name:"CSSObject"}},_focus:{defaultValue:null,description:"Styles for CSS selector `&:focus`",name:"_focus",required:!1,type:{name:"CSSObject"}},_highlighted:{defaultValue:null,description:"Styles for the highlighted state.",name:"_highlighted",required:!1,type:{name:"CSSObject"}},_focusWithin:{defaultValue:null,description:"Styles to apply when a child of this element has received focus\n- CSS Selector `&:focus-within`",name:"_focusWithin",required:!1,type:{name:"CSSObject"}},_focusVisible:{defaultValue:null,description:"Styles to apply when this element has received focus via tabbing\n- CSS Selector `&:focus-visible`",name:"_focusVisible",required:!1,type:{name:"CSSObject"}},_disabled:{defaultValue:null,description:"Styles to apply when this element is disabled. The passed styles are applied to these CSS selectors:\n- `&[aria-disabled=true]`\n- `&:disabled`\n- `&[data-disabled]`",name:"_disabled",required:!1,type:{name:"CSSObject"}},_readOnly:{defaultValue:null,description:"Styles for CSS Selector `&:readonly`",name:"_readOnly",required:!1,type:{name:"CSSObject"}},_before:{defaultValue:null,description:'Styles for CSS selector `&::before`\n\nNOTE:When using this, ensure the `content` is wrapped in a backtick.\n@example ```jsx\n<Box _before={{content:`""` }}/>\n```',name:"_before",required:!1,type:{name:"CSSObject"}},_after:{defaultValue:null,description:'Styles for CSS selector `&::after`\n\nNOTE:When using this, ensure the `content` is wrapped in a backtick.\n@example ```jsx\n<Box _after={{content:`""` }}/>\n```',name:"_after",required:!1,type:{name:"CSSObject"}},_empty:{defaultValue:null,description:"Styles for CSS selector `&:empty`",name:"_empty",required:!1,type:{name:"CSSObject"}},_expanded:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-expanded` is `true`\n- CSS selector `&[aria-expanded=true]`",name:"_expanded",required:!1,type:{name:"CSSObject"}},_checked:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-checked` is `true`\n- CSS selector `&[aria-checked=true]`",name:"_checked",required:!1,type:{name:"CSSObject"}},_grabbed:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-grabbed` is `true`\n- CSS selector `&[aria-grabbed=true]`",name:"_grabbed",required:!1,type:{name:"CSSObject"}},_pressed:{defaultValue:null,description:'Styles for CSS Selector `&[aria-pressed=true]`\nTypically used to style the current "pressed" state of toggle buttons',name:"_pressed",required:!1,type:{name:"CSSObject"}},_invalid:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-invalid` is `true`\n- CSS selector `&[aria-invalid=true]`",name:"_invalid",required:!1,type:{name:"CSSObject"}},_valid:{defaultValue:null,description:"Styles for the valid state\n- CSS selector `&[data-valid], &[data-state=valid]`",name:"_valid",required:!1,type:{name:"CSSObject"}},_loading:{defaultValue:null,description:"Styles for CSS Selector `&[aria-busy=true]` or `&[data-loading=true]`.\nUseful for styling loading states",name:"_loading",required:!1,type:{name:"CSSObject"}},_selected:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-selected` is `true`\n\n- CSS selector `&[aria-selected=true]`",name:"_selected",required:!1,type:{name:"CSSObject"}},_hidden:{defaultValue:null,description:"Styles for CSS Selector `[hidden=true]`",name:"_hidden",required:!1,type:{name:"CSSObject"}},_autofill:{defaultValue:null,description:"Styles for CSS Selector `&:-webkit-autofill`",name:"_autofill",required:!1,type:{name:"CSSObject"}},_even:{defaultValue:null,description:"Styles for CSS Selector `&:nth-child(even)`",name:"_even",required:!1,type:{name:"CSSObject"}},_odd:{defaultValue:null,description:"Styles for CSS Selector `&:nth-child(odd)`",name:"_odd",required:!1,type:{name:"CSSObject"}},_first:{defaultValue:null,description:"Styles for CSS Selector `&:first-of-type`",name:"_first",required:!1,type:{name:"CSSObject"}},_last:{defaultValue:null,description:"Styles for CSS Selector `&:last-of-type`",name:"_last",required:!1,type:{name:"CSSObject"}},_notFirst:{defaultValue:null,description:"Styles for CSS Selector `&:not(:first-of-type)`",name:"_notFirst",required:!1,type:{name:"CSSObject"}},_notLast:{defaultValue:null,description:"Styles for CSS Selector `&:not(:last-of-type)`",name:"_notLast",required:!1,type:{name:"CSSObject"}},_visited:{defaultValue:null,description:"Styles for CSS Selector `&:visited`",name:"_visited",required:!1,type:{name:"CSSObject"}},_activeLink:{defaultValue:null,description:"Used to style the active link in a navigation\nStyles for CSS Selector `&[aria-current=page]`",name:"_activeLink",required:!1,type:{name:"CSSObject"}},_activeStep:{defaultValue:null,description:"Used to style the current step within a process\nStyles for CSS Selector `&[aria-current=step]`",name:"_activeStep",required:!1,type:{name:"CSSObject"}},_indeterminate:{defaultValue:null,description:"Styles to apply when the ARIA attribute `aria-checked` is `mixed`\n- CSS selector `&[aria-checked=mixed]`",name:"_indeterminate",required:!1,type:{name:"CSSObject"}},_groupHover:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is hovered",name:"_groupHover",required:!1,type:{name:"CSSObject"}},_peerHover:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is hovered",name:"_peerHover",required:!1,type:{name:"CSSObject"}},_groupFocus:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is focused",name:"_groupFocus",required:!1,type:{name:"CSSObject"}},_peerFocus:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is focused",name:"_peerFocus",required:!1,type:{name:"CSSObject"}},_groupFocusVisible:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` has visible focus",name:"_groupFocusVisible",required:!1,type:{name:"CSSObject"}},_peerFocusVisible:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer`or `data-peer` has visible focus",name:"_peerFocusVisible",required:!1,type:{name:"CSSObject"}},_groupActive:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is active",name:"_groupActive",required:!1,type:{name:"CSSObject"}},_peerActive:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is active",name:"_peerActive",required:!1,type:{name:"CSSObject"}},_groupDisabled:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is disabled",name:"_groupDisabled",required:!1,type:{name:"CSSObject"}},_peerDisabled:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is disabled",name:"_peerDisabled",required:!1,type:{name:"CSSObject"}},_groupInvalid:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is invalid",name:"_groupInvalid",required:!1,type:{name:"CSSObject"}},_peerInvalid:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is invalid",name:"_peerInvalid",required:!1,type:{name:"CSSObject"}},_groupChecked:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` is checked",name:"_groupChecked",required:!1,type:{name:"CSSObject"}},_peerChecked:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` is checked",name:"_peerChecked",required:!1,type:{name:"CSSObject"}},_groupFocusWithin:{defaultValue:null,description:"Styles to apply when a parent element with `.group`, `data-group` or `role=group` has focus within",name:"_groupFocusWithin",required:!1,type:{name:"CSSObject"}},_peerFocusWithin:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` has focus within",name:"_peerFocusWithin",required:!1,type:{name:"CSSObject"}},_peerPlaceholderShown:{defaultValue:null,description:"Styles to apply when a sibling element with `.peer` or `data-peer` has placeholder shown",name:"_peerPlaceholderShown",required:!1,type:{name:"CSSObject"}},_placeholder:{defaultValue:null,description:"Styles for CSS Selector `&::placeholder`.",name:"_placeholder",required:!1,type:{name:"CSSObject"}},_placeholderShown:{defaultValue:null,description:"Styles for CSS Selector `&:placeholder-shown`.",name:"_placeholderShown",required:!1,type:{name:"CSSObject"}},_fullScreen:{defaultValue:null,description:"Styles for CSS Selector `&:fullscreen`.",name:"_fullScreen",required:!1,type:{name:"CSSObject"}},_selection:{defaultValue:null,description:"Styles for CSS Selector `&::selection`",name:"_selection",required:!1,type:{name:"CSSObject"}},_rtl:{defaultValue:null,description:'Styles for CSS Selector `[dir=rtl] &`\nIt is applied when a parent element or this element has `dir="rtl"`',name:"_rtl",required:!1,type:{name:"CSSObject"}},_ltr:{defaultValue:null,description:'Styles for CSS Selector `[dir=ltr] &`\nIt is applied when a parent element or this element has `dir="ltr"`',name:"_ltr",required:!1,type:{name:"CSSObject"}},_mediaDark:{defaultValue:null,description:"Styles for CSS Selector `@media (prefers-color-scheme: dark)`\nIt is used when the user has requested the system use a light or dark color theme.",name:"_mediaDark",required:!1,type:{name:"CSSObject"}},_mediaReduceMotion:{defaultValue:null,description:"Styles for CSS Selector `@media (prefers-reduced-motion: reduce)`\nIt is used when the user has requested the system to reduce the amount of animations.",name:"_mediaReduceMotion",required:!1,type:{name:"CSSObject"}},_dark:{defaultValue:null,description:"Styles for when `data-theme` is applied to any parent of\nthis component or element.",name:"_dark",required:!1,type:{name:"CSSObject"}},_light:{defaultValue:null,description:"Styles for when `data-theme` is applied to any parent of\nthis component or element.",name:"_light",required:!1,type:{name:"CSSObject"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Item/CreateRoomButton.tsx#CreateRoomButton"]={docgenInfo:CreateRoomButton.__docgenInfo,name:"CreateRoomButton",path:"src/aspects/Conference/Manage/Content/v2/Item/CreateRoomButton.tsx#CreateRoomButton"})}catch(__react_docgen_typescript_loader_error){}function SecondaryEditor_slicedToArray(arr,i){return function SecondaryEditor_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function SecondaryEditor_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function SecondaryEditor_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return SecondaryEditor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SecondaryEditor_arrayLikeToArray(o,minLen)}(arr,i)||function SecondaryEditor_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SecondaryEditor_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function SecondaryEditor_SecondaryEditor(_ref){var itemId=_ref.itemId,itemTitle=_ref.itemTitle,itemType=_ref.itemType,isOpen=_ref.isOpen,onClose=_ref.onClose,openSendSubmissionRequests=_ref.openSendSubmissionRequests,_useClipboard=(0,chakra_ui_hooks_esm.VP)(null!=itemId?itemId:""),onCopyItemId=_useClipboard.onCopy,hasCopiedItemId=_useClipboard.hasCopied;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.dy,{isOpen,placement:"right",onClose,size:"lg",children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.P1,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.sc,{children:[(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.OX,{pb:1,pr:"3em",children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{fontSize:"lg",overflow:"wrap",children:["Edit: ",itemTitle]}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.xv,{fontSize:"xs",mt:2,children:["Id: ",(0,jsx_runtime.jsx)(chakra_ui_layout_esm.EK,{fontSize:"xs",children:itemId}),(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:onCopyItemId,size:"xs",ml:"auto",variant:"ghost",p:0,h:"auto",minH:0,"aria-label":"Copy item id",children:(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:hasCopiedItemId?"check-circle":"clipboard",m:0,p:0})})]})]}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.cC,{}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.Ng,{children:itemId&&(0,jsx_runtime.jsx)(SecondaryEditor_SecondaryEditorInner,{itemId,itemType,openSendSubmissionRequests})})]})]})})}function SecondaryEditor_SecondaryEditorInner(_ref2){var _itemResponse$data,_itemResponse$data2,itemId=_ref2.itemId,itemType=_ref2.itemType,openSendSubmissionRequests=_ref2.openSendSubmissionRequests,_useAuthParameters=(0,AuthParameters.h)(),conferencePath=_useAuthParameters.conferencePath,subconferenceId=_useAuthParameters.subconferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[subconferenceId]),_useManageContent_Sel2=SecondaryEditor_slicedToArray((0,graphql.BeO)({variables:{itemId},context}),2),itemResponse=_useManageContent_Sel2[0],refetchItem=_useManageContent_Sel2[1];return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{w:"100%",alignItems:"flex-start",children:[(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{flexWrap:"wrap",justifyContent:"flex-start",w:"100%",gridRowGap:2,children:[(0,jsx_runtime.jsxs)(LinkButton.Qj,{size:"sm",to:conferencePath+"/item/"+itemId,isExternal:!0,"aria-label":"View item",title:"View item",children:[(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"link",mr:2}),"View item",(0,jsx_runtime.jsx)(chakra_ui_icons_esm.ExternalLinkIcon,{})]}),null!==(_itemResponse$data=itemResponse.data)&&void 0!==_itemResponse$data&&_itemResponse$data.content_Item_by_pk?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:itemResponse.data.content_Item_by_pk.room?(0,jsx_runtime.jsxs)(LinkButton.Qj,{size:"sm",to:conferencePath+"/room/"+itemResponse.data.content_Item_by_pk.room.id,isExternal:!0,"aria-label":itemResponse.data.content_Item_by_pk.typeName===graphql.gqi.Sponsor?"View booth":"View discussion room",title:itemResponse.data.content_Item_by_pk.typeName===graphql.gqi.Sponsor?"View booth":"View discussion room",children:[(0,jsx_runtime.jsx)(FAIcon.Z,{iconStyle:"s",icon:"link",mr:2}),itemResponse.data.content_Item_by_pk.typeName===graphql.gqi.Sponsor?"View booth":"View discussion room","",(0,jsx_runtime.jsx)(chakra_ui_icons_esm.ExternalLinkIcon,{})]}):(0,jsx_runtime.jsx)(CreateRoomButton,{size:"sm",itemId,refetch:function refetch(){return refetchItem()},buttonText:itemResponse.data.content_Item_by_pk.typeName===graphql.gqi.Sponsor?"Create booth":void 0})}):void 0]}),(0,jsx_runtime.jsx)(QueryWrapper.Z,{getter:function getter(result){return Object.assign({rooms:[]},result.content_Item_by_pk,{elements:result.content_Element})},queryResult:itemResponse,children:function children(result){return(0,jsx_runtime.jsx)(EditElements,Object.assign({itemId,itemType,openSendSubmissionRequests},result))}}),null!==(_itemResponse$data2=itemResponse.data)&&void 0!==_itemResponse$data2&&_itemResponse$data2.content_Item_by_pk?(0,jsx_runtime.jsx)(AddContentMenu,{itemId,onCreate:function onCreate(){refetchItem()}}):void 0]})}SecondaryEditor_SecondaryEditorInner.displayName="SecondaryEditorInner";try{SecondaryEditor_SecondaryEditor.displayName="SecondaryEditor",SecondaryEditor_SecondaryEditor.__docgenInfo={description:"",displayName:"SecondaryEditor",props:{itemId:{defaultValue:null,description:"",name:"itemId",required:!0,type:{name:"string | null"}},itemTitle:{defaultValue:null,description:"",name:"itemTitle",required:!0,type:{name:"string | null"}},itemType:{defaultValue:null,description:"",name:"itemType",required:!0,type:{name:"enum",value:[{value:'"DEMONSTRATION"'},{value:'"KEYNOTE"'},{value:'"LANDING_PAGE"'},{value:'"OTHER"'},{value:'"PAPER"'},{value:'"POSTER"'},{value:'"PRESENTATION"'},{value:'"SESSION"'},{value:'"SESSION_Q_AND_A"'},{value:'"SOCIAL"'},{value:'"SPONSOR"'},{value:'"SWAG_BAG"'},{value:'"SYMPOSIUM"'},{value:'"TUTORIAL"'},{value:'"WORKSHOP"'}]}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},openSendSubmissionRequests:{defaultValue:null,description:"",name:"openSendSubmissionRequests",required:!0,type:{name:"(itemId: string, personIds: string[]) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Item/SecondaryEditor.tsx#SecondaryEditor"]={docgenInfo:SecondaryEditor_SecondaryEditor.__docgenInfo,name:"SecondaryEditor",path:"src/aspects/Conference/Manage/Content/v2/Item/SecondaryEditor.tsx#SecondaryEditor"})}catch(__react_docgen_typescript_loader_error){}function ManageTagsModal_toConsumableArray(arr){return function ManageTagsModal_arrayWithoutHoles(arr){if(Array.isArray(arr))return ManageTagsModal_arrayLikeToArray(arr)}(arr)||function ManageTagsModal_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||ManageTagsModal_unsupportedIterableToArray(arr)||function ManageTagsModal_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ManageTagsModal_slicedToArray(arr,i){return function ManageTagsModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ManageTagsModal_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||ManageTagsModal_unsupportedIterableToArray(arr,i)||function ManageTagsModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ManageTagsModal_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return ManageTagsModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ManageTagsModal_arrayLikeToArray(o,minLen):void 0}}function ManageTagsModal_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ManageTagsModal(_ref){var onCloseCb=_ref.onClose,_useDisclosure=(0,chakra_ui_hooks_esm.qY)(),isOpen=_useDisclosure.isOpen,onOpen=_useDisclosure.onOpen,onClose=_useDisclosure.onClose,onCloseInner=(0,react.useCallback)((function(){onClose(),null==onCloseCb||onCloseCb()}),[onClose,onCloseCb]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"purple",onClick:onOpen,children:"Manage Tags"}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.u_,{isOpen,onClose:onCloseInner,size:"4xl",scrollBehavior:"inside",children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ZA,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.hz,{pb:4,children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.xB,{children:"Manage Tags"}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ol,{}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.fe,{children:isOpen?(0,jsx_runtime.jsx)(ManageTagsModalBody,{}):void 0})]})]})]})}function ManageTagsModalBody(){var _tagsResponse$data2,_tagsResponse$data3,_extractActualError,_ref8,_insertTagResponse$er,conference=(0,useConference.fk)(),subconferenceId=(0,AuthParameters.h)().subconferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[subconferenceId]),tagsResponse=ManageTagsModal_slicedToArray((0,graphql.jyV)({variables:{conferenceId:conference.id,subconferenceCond:subconferenceId?{_eq:subconferenceId}:{_is_null:!0}},context}),1)[0],row=(0,react.useMemo)((function(){return{getKey:function getKey(record){return record.id},canSelect:function canSelect(_record){return!0},pages:{defaultToLast:!1},invalid:function invalid(record){var _record$name;return(null===(_record$name=record.name)||void 0===_record$name||!_record$name.length)&&{columnId:"name",reason:"Name required"}}}}),[]),colorMode=(0,chakra_ui_color_mode_esm.If)().colorMode,columns=(0,react.useMemo)((function(){var result=[{id:"name",defaultSortDirection:CRUDTable2.S.Asc,header:function NameHeader(_ref2){var isInCreate=_ref2.isInCreate,onClick=_ref2.onClick,sortDir=_ref2.sortDir;return isInCreate?(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Name"}):(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{size:"xs",onClick,children:["Name",null!==sortDir?" "+sortDir:void 0]})},get:function get(data){return data.name},set:function set(record,value){record.name=value},sort:function sort(x,y){return(0,maybeCompare.D)(x,y,(function(a,b){return a.localeCompare(b)}))},filterFn:function filterFn(rows,filterValue){return""===filterValue?rows.filter((function(row){var _row$name;return""===(null!==(_row$name=row.name)&&void 0!==_row$name?_row$name:"")})):rows.filter((function(row){return row.name.toLowerCase().includes(filterValue.toLowerCase())}))},filterEl:CRUDComponents.Oe,cell:function NameCell(_ref3){var value=_ref3.value,_onChange=_ref3.onChange,onBlur=_ref3.onBlur,ref=_ref3.ref;return(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,{type:"text",value:null!=value?value:"",onChange:function onChange(ev){return null==_onChange?void 0:_onChange(ev.target.value)},onBlur,ref})}},{id:"priority",header:function PriorityHeader(_ref4){var isInCreate=_ref4.isInCreate,onClick=_ref4.onClick,sortDir=_ref4.sortDir;return isInCreate?(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Priority"}):(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{size:"xs",onClick,children:["Priority",null!==sortDir?" "+sortDir:void 0]})},get:function get(data){return data.priority},set:function set(record,value){record.priority=value},sort:function sort(x,y){return x-y},filterFn:function filterFn(rows,filterValue){return rows.filter((function(row){return void 0===filterValue.min&&void 0===filterValue.max||row.priority&&(void 0===filterValue.min||filterValue.min<=row.priority)&&(void 0===filterValue.max||filterValue.max>=row.priority)}))},filterEl:(0,CRUDComponents.pV)(-1e3,1e3),cell:function EventNameCell(_ref5){var value=_ref5.value,_onChange2=_ref5.onChange,onBlur=_ref5.onBlur,ref=_ref5.ref;return(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Y2,{value:null!=value?value:3e3,min:0,max:3e3,onChange:function onChange(vStr,v){return null==_onChange2?void 0:_onChange2(""===vStr?10:v)},onBlur,children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.zu,{ref}),(0,jsx_runtime.jsxs)(chakra_ui_number_input_esm.Fi,{children:[(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.WQ,{"aria-label":"Increment"}),(0,jsx_runtime.jsx)(chakra_ui_number_input_esm.Y_,{"aria-label":"Decrement"})]})]})}},{id:"colour",header:function ColourHeader(_ref6){return _ref6.isInCreate?(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Colour"}):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{fontSize:"xs",p:1,textAlign:"center",textTransform:"none",fontWeight:"normal",children:"Colour"})},get:function get(data){return data.colour},set:function set(record,value){record.colour=value&&""!==value?value:"rgba(0,0,0,0)"},cell:function ShortTitleCell(_ref7){var value=_ref7.value,_onChange3=_ref7.onChange,colourObj=tinycolor_default()(value);return(0,jsx_runtime.jsxs)(chakra_ui_popover_esm.J2,{placement:"bottom-start",returnFocusOnClose:!1,isLazy:!0,children:[(0,jsx_runtime.jsx)(chakra_ui_popover_esm.xo,{children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{w:"100%",color:!colourObj.isDark()||"light"===colorMode&&"rgba(0,0,0,0)"===value?"black":"white",bgColor:value,children:value})}),(0,jsx_runtime.jsx)(chakra_ui_popover_esm.yk,{children:(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{color:"black",children:(0,jsx_runtime.jsx)(react_color_es.xS,{width:"100%",color:value,onChange:function onChange(c){return null==_onChange3?void 0:_onChange3("rgba("+c.rgb.r+","+c.rgb.g+","+c.rgb.b+",1)")}})})})]})}}];return result}),[colorMode]),data=(0,react.useMemo)((function(){var _tagsResponse$data$co,_tagsResponse$data;return ManageTagsModal_toConsumableArray(null!==(_tagsResponse$data$co=null===(_tagsResponse$data=tagsResponse.data)||void 0===_tagsResponse$data?void 0:_tagsResponse$data.collection_Tag)&&void 0!==_tagsResponse$data$co?_tagsResponse$data$co:[])}),[null===(_tagsResponse$data2=tagsResponse.data)||void 0===_tagsResponse$data2?void 0:_tagsResponse$data2.collection_Tag]),_useManageContent_Ins2=ManageTagsModal_slicedToArray((0,graphql._JQ)(),2),insertTagResponse=_useManageContent_Ins2[0],insertTag=_useManageContent_Ins2[1],insert=(0,react.useMemo)((function(){return{ongoing:insertTagResponse.fetching,generateDefaults:function generateDefaults(){var _data$length;return{id:(0,v4.Z)(),conferenceId:conference.id,subconferenceId,name:"",colour:"rgba(0,0,0,0)",priority:null!==(_data$length=null==data?void 0:data.length)&&void 0!==_data$length?_data$length:0}},makeWhole:function makeWhole(d){return d},start:function start(record){var _headers;insertTag({tag:{conferenceId:record.conferenceId,subconferenceId,id:record.id,name:record.name,colour:record.colour,priority:record.priority}},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers)}})}}}),[conference.id,null==data?void 0:data.length,insertTag,insertTagResponse.fetching,subconferenceId]),_useManageContent_Upd2=ManageTagsModal_slicedToArray((0,graphql.Emq)(),2),updateTagResponse=_useManageContent_Upd2[0],updateTag=_useManageContent_Upd2[1],update=(0,react.useMemo)((function(){return{ongoing:updateTagResponse.fetching,start:function start(record){var _headers2,tagUpdateInput={name:record.name,colour:record.colour,priority:record.priority};updateTag({id:record.id,update:tagUpdateInput},{fetchOptions:{headers:(_headers2={},_headers2[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers2)}})}}}),[subconferenceId,updateTag,updateTagResponse.fetching]),_useManageContent_Del2=ManageTagsModal_slicedToArray((0,graphql.VTm)(),2),deleteTagsResponse=_useManageContent_Del2[0],deleteTags=_useManageContent_Del2[1],deleteProps=(0,react.useMemo)((function(){return{ongoing:deleteTagsResponse.fetching,start:function start(keys){var _headers3;deleteTags({ids:keys},{fetchOptions:{headers:(_headers3={},_headers3[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers3)}})}}}),[deleteTags,deleteTagsResponse.fetching,subconferenceId]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[tagsResponse.fetching&&!tagsResponse.data?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{label:"Loading tags"}):void 0,(0,jsx_runtime.jsx)(CRUDTable2.Z,{columns,row,data:!tagsResponse.fetching&&(null!==(_tagsResponse$data3=tagsResponse.data)&&void 0!==_tagsResponse$data3&&_tagsResponse$data3.collection_Tag?data:null),tableUniqueName:"ManageConferenceRegistrants",alert:insertTagResponse.error||updateTagResponse.error||deleteTagsResponse.error?{status:"error",title:"Error saving changes",description:null!==(_extractActualError=(0,ExtractActualError.Z)(null!==(_ref8=null!==(_insertTagResponse$er=insertTagResponse.error)&&void 0!==_insertTagResponse$er?_insertTagResponse$er:updateTagResponse.error)&&void 0!==_ref8?_ref8:deleteTagsResponse.error))&&void 0!==_extractActualError?_extractActualError:"Unknown error"}:void 0,insert,update,delete:deleteProps})]})}(0,urql_core.Ps)(ManageTagsModal_templateObject||(ManageTagsModal_templateObject=function ManageTagsModal_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    mutation ManageContent_InsertTag($tag: collection_Tag_insert_input!) {\n        insert_collection_Tag_one(object: $tag) {\n            ...ManageContent_Tag\n        }\n    }\n\n    mutation ManageContent_UpdateTag($id: uuid!, $update: collection_Tag_set_input!) {\n        update_collection_Tag_by_pk(pk_columns: { id: $id }, _set: $update) {\n            ...ManageContent_Tag\n        }\n    }\n\n    mutation ManageContent_DeleteTags($ids: [uuid!]!) {\n        delete_collection_Tag(where: { id: { _in: $ids } }) {\n            returning {\n                id\n            }\n        }\n    }\n"])));try{ManageTagsModal.displayName="ManageTagsModal",ManageTagsModal.__docgenInfo={description:"",displayName:"ManageTagsModal",props:{onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/ManageTagsModal.tsx#ManageTagsModal"]={docgenInfo:ManageTagsModal.__docgenInfo,name:"ManageTagsModal",path:"src/aspects/Conference/Manage/Content/v2/ManageTagsModal.tsx#ManageTagsModal"})}catch(__react_docgen_typescript_loader_error){}var SubmissionsReviewModal_templateObject,ManageContent_templateObject,SubmissionRequestsModal=__webpack_require__("./src/aspects/Conference/Manage/Content/v2/Submissions/SubmissionRequestsModal.tsx"),Element=__webpack_require__("./src/aspects/Conference/Attend/Content/Element/Element.tsx");function SubmissionsReviewModal_slicedToArray(arr,i){return function SubmissionsReviewModal_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function SubmissionsReviewModal_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function SubmissionsReviewModal_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return SubmissionsReviewModal_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SubmissionsReviewModal_arrayLikeToArray(o,minLen)}(arr,i)||function SubmissionsReviewModal_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SubmissionsReviewModal_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function SubmissionsReviewModal(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,itemIds=_ref.itemIds;return(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.u_,{isOpen,onClose,size:"full",children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ZA,{}),isOpen?(0,jsx_runtime.jsx)(SubmissionsReviewModalLazyInner,{itemIds}):void 0]})}function SubmissionsReviewModalLazyInner(_ref2){var _itemsResponse$data2,itemIds=_ref2.itemIds,subconferenceId=(0,AuthParameters.h)().subconferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[subconferenceId]),itemsResponse=SubmissionsReviewModal_slicedToArray((0,graphql.fcf)({variables:{itemIds},requestPolicy:"network-only",context}),1)[0],sortedItems=(0,react.useMemo)((function(){var _itemsResponse$data;return null!==(_itemsResponse$data=itemsResponse.data)&&void 0!==_itemsResponse$data&&_itemsResponse$data.content_Item?es.MRu((function(x){return x.title}),itemsResponse.data.content_Item):[]}),[null===(_itemsResponse$data2=itemsResponse.data)||void 0===_itemsResponse$data2?void 0:_itemsResponse$data2.content_Item]),itemsNoPeople=(0,react.useMemo)((function(){return sortedItems.filter((function(x){return 0===x.itemPeople.length&&x.hasUnsubmittedElements}))}),[sortedItems]),itemsWithPeopleNotSentRequests=(0,react.useMemo)((function(){return sortedItems.filter((function(x){return 0!==x.itemPeople.length&&x.itemPeople.some((function(z){var _z$person;return!(null!==(_z$person=z.person)&&void 0!==_z$person&&_z$person.submissionRequestsSentCount)}))&&x.hasUnsubmittedElements}))}),[sortedItems]),itemsWithSendRequestsMissingSubmissions=(0,react.useMemo)((function(){return sortedItems.filter((function(x){return 0!==x.itemPeople.length&&x.itemPeople.some((function(z){var _z$person2;return null===(_z$person2=z.person)||void 0===_z$person2?void 0:_z$person2.submissionRequestsSentCount}))&&x.hasUnsubmittedElements}))}),[sortedItems]),itemsWithSubmissions=(0,react.useMemo)((function(){return sortedItems.filter((function(x){return!!x.elements.some((function(y){var _y$data;return null===(_y$data=y.data)||void 0===_y$data?void 0:_y$data.length}))}))}),[sortedItems]),noPeopleList=(0,react.useMemo)((function(){return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.QI,{children:[itemsNoPeople.map((function(x){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:x.title},x.id)})),0===itemsNoPeople.length?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:"None"}):void 0]})}),[itemsNoPeople]),noRequestsList=(0,react.useMemo)((function(){return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.QI,{children:[itemsWithPeopleNotSentRequests.map((function(x){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:x.title},x.id)})),0===itemsWithPeopleNotSentRequests.length?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:"None"}):void 0]})}),[itemsWithPeopleNotSentRequests]),awaitingList=(0,react.useMemo)((function(){return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.QI,{children:[itemsWithSendRequestsMissingSubmissions.map((function(x){return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{children:x.title}),(0,jsx_runtime.jsx)(chakra_ui_layout_esm.QI,{children:x.elements.filter((function(y){var _y$data2;return!(null!==(_y$data2=y.data)&&void 0!==_y$data2&&_y$data2.length)})).map((function(y){return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.HC,{children:[y.name," (",y.typeName,")"]},y.id)}))})]},x.id)})),0===itemsWithSendRequestsMissingSubmissions.length?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.HC,{children:"None"}):void 0]})}),[itemsWithSendRequestsMissingSubmissions]),submittedGrid=(0,react.useMemo)((function(){return(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.rj,{templateColumns:["repeat(1, 1fr)","repeat(2, 1fr)","repeat(2, 1fr)","repeat(3, 1fr)"],w:"100%",gap:2,children:[itemsWithSubmissions.flatMap((function(x){return x.elements.filter((function(y){var _y$data3;return null===(_y$data3=y.data)||void 0===_y$data3?void 0:_y$data3.length})).map((function(y){return(0,jsx_runtime.jsx)(chakra_ui_layout_esm.P4,{maxW:"500px",border:"1px solid black",children:(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.gC,{children:[(0,jsx_runtime.jsx)(chakra_ui_layout_esm.X6,{as:"h3",fontSize:"md",p:1,children:x.title}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.X6,{as:"h4",fontSize:"sm",fontWeight:"normal",p:1,children:[y.name," (",y.typeName,")"]}),(0,jsx_runtime.jsx)(DeferredElement,{uploadableElement:y})]})},y.id)}))})),0===itemsWithSubmissions.length?(0,jsx_runtime.jsx)(chakra_ui_layout_esm.P4,{children:"None"}):void 0]})}),[itemsWithSubmissions]);return(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.hz,{m:0,children:[(0,jsx_runtime.jsx)(chakra_ui_modal_esm.xB,{children:"Review submissions"}),(0,jsx_runtime.jsx)(chakra_ui_modal_esm.ol,{}),(0,jsx_runtime.jsxs)(chakra_ui_modal_esm.fe,{mb:4,children:[itemsResponse.fetching?(0,jsx_runtime.jsx)(chakra_ui_spinner_esm.$,{}):void 0,(0,jsx_runtime.jsxs)(chakra_ui_accordion_esm.UQ,{allowMultiple:!1,allowToggle:!0,reduceMotion:!0,children:[(0,jsx_runtime.jsxs)(chakra_ui_accordion_esm.Qd,{children:[(0,jsx_runtime.jsxs)(chakra_ui_accordion_esm.KF,{children:[(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.XE,{}),"No people"]}),(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.Hk,{children:noPeopleList})]}),(0,jsx_runtime.jsxs)(chakra_ui_accordion_esm.Qd,{children:[(0,jsx_runtime.jsxs)(chakra_ui_accordion_esm.KF,{children:[(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.XE,{}),"Submissions not yet requested"]}),(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.Hk,{children:noRequestsList})]}),(0,jsx_runtime.jsxs)(chakra_ui_accordion_esm.Qd,{children:[(0,jsx_runtime.jsxs)(chakra_ui_accordion_esm.KF,{children:[(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.XE,{}),"Awaiting submission"]}),(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.Hk,{children:awaitingList})]}),(0,jsx_runtime.jsxs)(chakra_ui_accordion_esm.Qd,{children:[(0,jsx_runtime.jsxs)(chakra_ui_accordion_esm.KF,{children:[(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.XE,{}),"Submission received"]}),(0,jsx_runtime.jsx)(chakra_ui_accordion_esm.Hk,{children:submittedGrid})]})]})]})]})}function DeferredElement(_ref3){var uploadableElement=_ref3.uploadableElement,_useDisclosure=(0,chakra_ui_hooks_esm.qY)(),isOpen=_useDisclosure.isOpen,onOpen=_useDisclosure.onOpen;return isOpen?uploadableElement?(0,jsx_runtime.jsx)(Element.W,{element:uploadableElement}):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{p:2,children:"This element has been submitted but you do not have permission to access it."}):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{p:2,children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:onOpen,children:"Reveal submission"})})}(0,urql_core.Ps)(SubmissionsReviewModal_templateObject||(SubmissionsReviewModal_templateObject=function SubmissionsReviewModal_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    query SubmissionsReviewModalData($itemIds: [uuid!]!) {\n        content_Item(where: { id: { _in: $itemIds } }) {\n            ...SubmissionsReviewModal_Item\n        }\n    }\n\n    fragment SubmissionsReviewModal_Item on content_Item {\n        id\n        title\n        hasUnsubmittedElements\n        itemPeople {\n            id\n            itemId\n            personId\n            person {\n                id\n                name\n                submissionRequestsSentCount\n            }\n        }\n        elements {\n            ...SubmissionsReviewModal_Element\n        }\n    }\n\n    fragment SubmissionsReviewModal_Element on content_Element {\n        id\n        typeName\n        name\n        data\n        itemId\n        isHidden\n    }\n"]))),SubmissionsReviewModal.displayName="SubmissionsReviewModal",SubmissionsReviewModalLazyInner.displayName="SubmissionsReviewModalLazyInner";try{SubmissionsReviewModal.displayName="SubmissionsReviewModal",SubmissionsReviewModal.__docgenInfo={description:"",displayName:"SubmissionsReviewModal",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},itemIds:{defaultValue:null,description:"",name:"itemIds",required:!0,type:{name:"string[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/Conference/Manage/Content/v2/Submissions/SubmissionsReviewModal.tsx#SubmissionsReviewModal"]={docgenInfo:SubmissionsReviewModal.__docgenInfo,name:"SubmissionsReviewModal",path:"src/aspects/Conference/Manage/Content/v2/Submissions/SubmissionsReviewModal.tsx#SubmissionsReviewModal"})}catch(__react_docgen_typescript_loader_error){}function ManageContent_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ManageContent_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){ManageContent_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){ManageContent_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function ManageContent_toConsumableArray(arr){return function ManageContent_arrayWithoutHoles(arr){if(Array.isArray(arr))return ManageContent_arrayLikeToArray(arr)}(arr)||function ManageContent_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||ManageContent_unsupportedIterableToArray(arr)||function ManageContent_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ManageContent_slicedToArray(arr,i){return function ManageContent_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ManageContent_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||ManageContent_unsupportedIterableToArray(arr,i)||function ManageContent_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ManageContent_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return ManageContent_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ManageContent_arrayLikeToArray(o,minLen):void 0}}function ManageContent_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function formatEnumValueForLabel(value){return value.split("_").reduce((function(acc,x){return acc+" "+x[0]+x.substr(1).toLowerCase()}),"").trimStart()}function ManageContentV2(){var conference=(0,useConference.fk)(),_useAuthParameters=(0,AuthParameters.h)(),conferencePath=_useAuthParameters.conferencePath,subconferenceId=_useAuthParameters.subconferenceId,context=(0,react.useMemo)((function(){var _makeContext;return(0,make_context.f)(((_makeContext={})[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_makeContext))}),[subconferenceId]),tagsContext=(0,react.useMemo)((function(){return Object.assign({},context,{additionalTypenames:["content_ItemTag"]})}),[context]),itemsContext=(0,react.useMemo)((function(){return Object.assign({},context,{additionalTypenames:["content_Item"]})}),[context]),exhibitionsContext=(0,react.useMemo)((function(){return Object.assign({},context,{additionalTypenames:["content_ItemExhibition"]})}),[context]),_useManageContent_Sel2=ManageContent_slicedToArray((0,graphql.jyV)({requestPolicy:"network-only",variables:{conferenceId:conference.id,subconferenceCond:subconferenceId?{_eq:subconferenceId}:{_is_null:!0}},context:tagsContext}),2),_useManageContent_Sel3=_useManageContent_Sel2[0],loadingAllTags=_useManageContent_Sel3.fetching,errorAllTags=_useManageContent_Sel3.error,allTags=_useManageContent_Sel3.data,refetchAllTags=_useManageContent_Sel2[1];(0,useQueryErrorToast.Z)(errorAllTags,!1);var _useManageContent_Sel6=ManageContent_slicedToArray((0,graphql.TDz)({requestPolicy:"network-only",variables:{conferenceId:conference.id,subconferenceCond:subconferenceId?{_eq:subconferenceId}:{_is_null:!0}},context:exhibitionsContext}),1)[0],loadingAllExhibitions=_useManageContent_Sel6.fetching,errorAllExhibitions=_useManageContent_Sel6.error,allExhibitions=_useManageContent_Sel6.data;(0,useQueryErrorToast.Z)(errorAllExhibitions,!1);var _useManageContent_Sel8=ManageContent_slicedToArray((0,graphql.L79)({requestPolicy:"network-only",variables:{conferenceId:conference.id,subconferenceCond:subconferenceId?{_eq:subconferenceId}:{_is_null:!0}},context:itemsContext}),2),_useManageContent_Sel9=_useManageContent_Sel8[0],loadingAllItems=_useManageContent_Sel9.fetching,errorAllItems=_useManageContent_Sel9.error,allItems=_useManageContent_Sel9.data,refetchAllItems=_useManageContent_Sel8[1];(0,useQueryErrorToast.Z)(errorAllItems,!1);var data=(0,react.useMemo)((function(){var _allItems$content_Ite;return ManageContent_toConsumableArray(null!==(_allItems$content_Ite=null==allItems?void 0:allItems.content_Item)&&void 0!==_allItems$content_Ite?_allItems$content_Ite:[])}),[null==allItems?void 0:allItems.content_Item]),row=(0,react.useMemo)((function(){return{getKey:function getKey(record){return record.id},canSelect:function canSelect(_record){return!0},canDelete:function canDelete(record){return record.typeName!==graphql.gqi.LandingPage||"Cannot delete the landing page item."},pages:{defaultToLast:!1},invalid:function invalid(record){var _record$title;return(null===(_record$title=record.title)||void 0===_record$title||!_record$title.length)&&{columnId:"title",reason:"Title required"}}}}),[]),tagOptions=(0,react.useMemo)((function(){var _allTags$collection_T;return null!==(_allTags$collection_T=null==allTags?void 0:allTags.collection_Tag.map((function(tag){return{value:tag.id,label:tag.name}})))&&void 0!==_allTags$collection_T?_allTags$collection_T:[]}),[null==allTags?void 0:allTags.collection_Tag]),typeOptions=(0,react.useMemo)((function(){return Object.keys(graphql.gqi).map((function(key){var value=graphql.gqi[key];return{value,label:formatEnumValueForLabel(value)}}))}),[]),columns=(0,react.useMemo)((function(){var result=[{id:"title",defaultSortDirection:CRUDTable2.S.Asc,header:function TitleHeader(_ref){var isInCreate=_ref.isInCreate,onClick=_ref.onClick,sortDir=_ref.sortDir;return isInCreate?(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Title"}):(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{size:"xs",onClick,children:["Title",null!==sortDir?" "+sortDir:void 0]})},get:function get(data){return data.title},set:function set(record,value){record.title=value},sort:function sort(x,y){return(0,maybeCompare.D)(x,y,(function(a,b){return a.localeCompare(b)}))},filterFn:function filterFn(rows,filterValue){return""===filterValue?rows.filter((function(row){return""===row.title})):rows.filter((function(row){return row.title.toLowerCase().includes(filterValue.toLowerCase())}))},filterEl:CRUDComponents.Oe,cell:function TitleCell(_ref2){var value=_ref2.value,_onChange=_ref2.onChange,onBlur=_ref2.onBlur,ref=_ref2.ref;return(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,{type:"text",value:null!=value?value:"",onChange:function onChange(ev){return null==_onChange?void 0:_onChange(ev.target.value)},onBlur,border:"1px solid",borderColor:"rgba(255, 255, 255, 0.16)",ref})}},{id:"shortTitle",header:function ShortTitleHeader(_ref3){var isInCreate=_ref3.isInCreate,onClick=_ref3.onClick,sortDir=_ref3.sortDir;return isInCreate?(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Short Title"}):(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{size:"xs",onClick,children:["Short Title",null!==sortDir?" "+sortDir:void 0]})},get:function get(data){return data.shortTitle},set:function set(record,value){record.shortTitle=""!==value?value:null},sort:function sort(x,y){return(0,maybeCompare.D)(x,y,(function(a,b){return a.localeCompare(b)}))},filterFn:function filterFn(rows,filterValue){return""===filterValue?rows.filter((function(row){var _row$shortTitle;return""===(null!==(_row$shortTitle=row.shortTitle)&&void 0!==_row$shortTitle?_row$shortTitle:"")})):rows.filter((function(row){var _row$shortTitle2;return!(null===(_row$shortTitle2=row.shortTitle)||void 0===_row$shortTitle2||!_row$shortTitle2.toLowerCase().includes(filterValue.toLowerCase()))}))},filterEl:CRUDComponents.Oe,cell:function ShortTitleCell(_ref4){var value=_ref4.value,_onChange2=_ref4.onChange,onBlur=_ref4.onBlur,ref=_ref4.ref;return(0,jsx_runtime.jsx)(chakra_ui_input_esm.II,{type:"text",value:null!=value?value:"",onChange:function onChange(ev){return null==_onChange2?void 0:_onChange2(ev.target.value)},onBlur,border:"1px solid",borderColor:"rgba(255, 255, 255, 0.16)",ref})}},{id:"typeName",header:function ShortTitleHeader(_ref5){var isInCreate=_ref5.isInCreate,onClick=_ref5.onClick,sortDir=_ref5.sortDir;return isInCreate?(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Label"}):(0,jsx_runtime.jsxs)(chakra_ui_button_esm.zx,{size:"xs",onClick,children:["Label",null!==sortDir?" "+sortDir:void 0]})},get:function get(data){return data.typeName},set:function set(record,value){record.typeName=value},sort:function sort(x,y){return(0,maybeCompare.D)(x,y,(function(a,b){return a.localeCompare(b)}))},filterFn:function filterFn(rows,filterValue){var vals=filterValue.map((function(x){return x.value}));return 0===vals.length?rows:rows.filter((function(row){return vals.includes(row.typeName)}))},filterEl:(0,CRUDComponents.VB)(typeOptions),cell:function TypeCell(_ref6){var value=_ref6.value,_onChange3=_ref6.onChange,onBlur=_ref6.onBlur,ref=_ref6.ref;return(0,jsx_runtime.jsx)(chakra_ui_select_esm.Ph,{value:null!=value?value:"",onChange:function onChange(ev){return null==_onChange3?void 0:_onChange3(ev.target.value)},onBlur,ref,maxW:400,children:typeOptions.map((function(opt){return(0,jsx_runtime.jsx)("option",{value:opt.value,children:opt.label},opt.value)}))})}},{id:"itemTags",header:function ItemTagsHeader(_ref7){return _ref7.isInCreate?(0,jsx_runtime.jsx)(chakra_ui_form_control_esm.lX,{children:"Tags"}):(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xv,{fontSize:"xs",p:1,textAlign:"center",textTransform:"none",fontWeight:"normal",children:"Tags"})},get:function get(data){var _data$itemTags$map,_data$itemTags;return null!==(_data$itemTags$map=null===(_data$itemTags=data.itemTags)||void 0===_data$itemTags?void 0:_data$itemTags.map((function(itemTag){var _tagOptions$find;return null!==(_tagOptions$find=tagOptions.find((function(opt){return opt.value===itemTag.tagId})))&&void 0!==_tagOptions$find?_tagOptions$find:{label:"<Unknown tag>",value:itemTag.tagId}})))&&void 0!==_data$itemTags$map?_data$itemTags$map:[]},set:function set(record,value){record.itemTags=value.map((function(x){return{itemId:record.id,tagId:x.value,id:void 0}}))},filterFn:function filterFn(rows,filterValue){return 0===filterValue.length?rows:rows.filter((function(row){return row.itemTags.some((function(x){return filterValue.some((function(y){return y.value===x.tagId}))}))}))},filterEl:(0,CRUDComponents.VB)(tagOptions),cell:function ContentCell(_ref8){var value=_ref8.value,_onChange4=_ref8.onChange,onBlur=_ref8.onBlur;return(0,jsx_runtime.jsx)(MultiSelect.ZP,{name:"tags",options:tagOptions,value:null!=value?value:[],placeholder:"Select one or more tags",onChange:function onChange(ev){return null==_onChange4?void 0:_onChange4(ev)},onBlur,styles:{container:function container(base){return Object.assign({},base,{maxWidth:450})}}})}}];return result}),[tagOptions,typeOptions]),_useDisclosure=(0,chakra_ui_hooks_esm.qY)(),isSecondaryPanelOpen=_useDisclosure.isOpen,onSecondaryPanelOpen=_useDisclosure.onOpen,onSecondaryPanelClose=_useDisclosure.onClose,_useState2=ManageContent_slicedToArray((0,react.useState)(null),2),editingId=_useState2[0],setEditingId=_useState2[1],_useState4=ManageContent_slicedToArray((0,react.useState)(null),2),editingTitle=_useState4[0],setEditingTitle=_useState4[1],_useState6=ManageContent_slicedToArray((0,react.useState)(null),2),editingItemType=_useState6[0],setEditingItemType=_useState6[1],edit=(0,react.useMemo)((function(){return{open:function open(key){if(setEditingId(key),data&&key){var item=data.find((function(x){return x.id===key}));item?(setEditingTitle(item.title),setEditingItemType(item.typeName)):(setEditingTitle(null),setEditingItemType(null))}else setEditingTitle(null),setEditingItemType(null);null!==key?onSecondaryPanelOpen():onSecondaryPanelClose()}}}),[data,onSecondaryPanelClose,onSecondaryPanelOpen]),_useManageContent_Ins2=ManageContent_slicedToArray((0,graphql.izg)(),2),insertItemResponse=_useManageContent_Ins2[0],insertItem=_useManageContent_Ins2[1],insert=(0,react.useMemo)((function(){return{ongoing:insertItemResponse.fetching,generateDefaults:function generateDefaults(){return{id:(0,v4.Z)(),conferenceId:conference.id,subconferenceId,itemTags:[],title:"",typeName:graphql.gqi.Paper}},makeWhole:function makeWhole(d){return d},start:function start(record){var _headers;insertItem({item:{conferenceId:record.conferenceId,subconferenceId,id:record.id,title:record.title,shortTitle:record.shortTitle,typeName:record.typeName},itemTags:record.itemTags},{fetchOptions:{headers:(_headers={},_headers[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers)},additionalTypenames:["content_Item"]})}}}),[conference.id,insertItem,insertItemResponse.fetching,subconferenceId]),_useManageContent_Upd2=ManageContent_slicedToArray((0,graphql.$Pu)(),2),updateItemResponse=_useManageContent_Upd2[0],updateItem=_useManageContent_Upd2[1],update=(0,react.useMemo)((function(){return{ongoing:updateItemResponse.fetching,start:function start(record){var _headers2,itemUpdateInput={title:record.title,shortTitle:record.shortTitle,typeName:record.typeName};updateItem({id:record.id,item:itemUpdateInput,tags:record.itemTags.map((function(x){return{itemId:x.itemId,tagId:x.tagId}})),tagIds:record.itemTags.map((function(x){return x.tagId}))},{fetchOptions:{headers:(_headers2={},_headers2[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers2)},additionalTypenames:["content_Item"]})}}}),[subconferenceId,updateItem,updateItemResponse.fetching]),_useManageContent_Del2=ManageContent_slicedToArray((0,graphql.ZEH)(),2),deleteItemsResponse=_useManageContent_Del2[0],deleteItems=_useManageContent_Del2[1],deleteProps=(0,react.useMemo)((function(){return{ongoing:deleteItemsResponse.fetching,start:function start(keys){var _headers3;deleteItems({ids:keys},{fetchOptions:{headers:(_headers3={},_headers3[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers3)},additionalTypenames:["content_Item"]})}}}),[deleteItems,deleteItemsResponse.fetching,subconferenceId]),forceReloadRef=(0,react.useRef)((function(){})),_useDisclosure2=(0,chakra_ui_hooks_esm.qY)(),sendSubmissionRequests_IsOpen=_useDisclosure2.isOpen,sendSubmissionRequests_OnOpen=_useDisclosure2.onOpen,sendSubmissionRequests_OnClose=_useDisclosure2.onClose,_useDisclosure3=(0,chakra_ui_hooks_esm.qY)(),submissionsReview_IsOpen=_useDisclosure3.isOpen,submissionsReview_OnOpen=_useDisclosure3.onOpen,submissionsReview_OnClose=_useDisclosure3.onClose,_useState8=ManageContent_slicedToArray((0,react.useState)([]),2),sendSubmissionRequests_ItemIds=_useState8[0],setSendSubmissionRequests_ItemIds=_useState8[1],_useState10=ManageContent_slicedToArray((0,react.useState)(null),2),sendSubmissionRequests_PersonIds=_useState10[0],setSendSubmissionRequests_PersonIds=_useState10[1],_useState12=ManageContent_slicedToArray((0,react.useState)([]),2),submissionsReview_ItemIds=_useState12[0],setSubmissionsReview_ItemIds=_useState12[1],openSendSubmissionRequests=(0,react.useCallback)((function(itemId,personIds){setSendSubmissionRequests_ItemIds([itemId]),setSendSubmissionRequests_PersonIds(personIds),sendSubmissionRequests_OnOpen()}),[setSendSubmissionRequests_ItemIds,sendSubmissionRequests_OnOpen,setSendSubmissionRequests_PersonIds]),client=(0,urql_es.m8)(),buttons=(0,react.useMemo)((function(){return[{render:function ImportButton(_selectedData){return(0,jsx_runtime.jsx)(LinkButton.Qj,{colorScheme:"purple",to:conferencePath+"/manage/import/program",children:"Import"},"import-button")}},{render:function render(_ref9){var selectedData=_ref9.selectedData;function doContentExport(_x){return _doContentExport.apply(this,arguments)}function _doContentExport(){return(_doContentExport=ManageContent_asyncToGenerator(regeneratorRuntime.mark((function _callee(dataToExport){var _headers4,contentForExport,_csvURL3,_columns,_data,csvText,csvData,csvURL,now,fileName,tempLink;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,client.query(graphql.Zwb,{itemIds:dataToExport.map((function(x){return x.id}))},{fetchOptions:{headers:(_headers4={},_headers4[auth.k.Role]=subconferenceId?auth.Z.SubconferenceOrganizer:auth.Z.ConferenceOrganizer,_headers4)}}).toPromise();case 2:(contentForExport=_context.sent).data&&(_columns=new Set(["Conference Id","Subconference Id","Content Id","Externally Sourced Data Id","Title","Short Title","Type","Tag Ids","Exhibitions","Discussion Room Ids","Chat Id","People"]),_data=contentForExport.data.content_Item.map((function(item){for(var _item$shortTitle,_item$room$id,_item$room,_item$chatId,result={"Conference Id":item.conferenceId,"Subconference Id":item.subconferenceId,"Content Id":item.id,Title:item.title,"Short Title":null!==(_item$shortTitle=item.shortTitle)&&void 0!==_item$shortTitle?_item$shortTitle:"",Type:item.typeName,"Tag Ids":item.itemTags.map((function(itemTag){return itemTag.tagId})),Exhibitions:item.itemExhibitions.map((function(itemExh){var _itemExh$priority;return(null!==(_itemExh$priority=itemExh.priority)&&void 0!==_itemExh$priority?_itemExh$priority:"N")+": "+itemExh.exhibitionId})),"Discussion Room Id":null!==(_item$room$id=null===(_item$room=item.room)||void 0===_item$room?void 0:_item$room.id)&&void 0!==_item$room$id?_item$room$id:"","Chat Id":null!==(_item$chatId=item.chatId)&&void 0!==_item$chatId?_item$chatId:"",People:item.itemPeople.map((function(itemPerson){var _itemPerson$priority,_itemPerson$person,_itemPerson$person2,_itemPerson$person$af,_itemPerson$person3,_itemPerson$person$em,_itemPerson$person4;return(null!==(_itemPerson$priority=itemPerson.priority)&&void 0!==_itemPerson$priority?_itemPerson$priority:"N")+": "+(null===(_itemPerson$person=itemPerson.person)||void 0===_itemPerson$person?void 0:_itemPerson$person.id)+" ("+itemPerson.roleName+") ["+(null===(_itemPerson$person2=itemPerson.person)||void 0===_itemPerson$person2?void 0:_itemPerson$person2.name)+" ("+(null!==(_itemPerson$person$af=null===(_itemPerson$person3=itemPerson.person)||void 0===_itemPerson$person3?void 0:_itemPerson$person3.affiliation)&&void 0!==_itemPerson$person$af?_itemPerson$person$af:"No affiliation")+") <"+(null!==(_itemPerson$person$em=null===(_itemPerson$person4=itemPerson.person)||void 0===_itemPerson$person4?void 0:_itemPerson$person4.email)&&void 0!==_itemPerson$person$em?_itemPerson$person$em:"No email")+">]"}))},idx=0;idx<item.elements.length;idx++){var _element$uploadsRemai,baseName="Element "+idx,element=item.elements[idx];result[baseName+": Id"]=element.id,result[baseName+": Name"]=element.name,result[baseName+": Type"]=element.typeName,result[baseName+": Data"]=element.data&&element.data instanceof Array?JSON.stringify(element.data[element.data.length-1]):null,result[baseName+": Layout"]=element.layoutData?JSON.stringify(element.layoutData):null,result[baseName+": Uploads Remaining"]=null!==(_element$uploadsRemai=element.uploadsRemaining)&&void 0!==_element$uploadsRemai?_element$uploadsRemai:"Unlimited",result[baseName+": Hidden"]=element.isHidden?"Yes":"No",result[baseName+": Updated At"]=element.updatedAt,_columns.add(baseName+": Id"),_columns.add(baseName+": Name"),_columns.add(baseName+": Type"),_columns.add(baseName+": Data"),_columns.add(baseName+": Layout"),_columns.add(baseName+": Uploads Remaining"),_columns.add(baseName+": Hidden"),_columns.add(baseName+": Updated At")}return result})),csvText=papaparse_min_default().unparse(_data,{columns:ManageContent_toConsumableArray(_columns)}),csvData=new Blob([csvText],{type:"text/csv;charset=utf-8;"}),null,now=new Date,fileName=now.getFullYear()+"-"+(now.getMonth()+1).toString().padStart(2,"0")+"-"+now.getDate().toString().padStart(2,"0")+"T"+now.getHours().toString().padStart(2,"0")+"-"+now.getMinutes().toString().padStart(2,"0")+" - Midspace Content.csv",csvURL=window.URL.createObjectURL(csvData),(tempLink=document.createElement("a")).href=null!==(_csvURL3=csvURL)&&void 0!==_csvURL3?_csvURL3:"",tempLink.setAttribute("download",fileName),tempLink.click());case 4:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}var tooltip=function tooltip(filler){return"Exports "+filler+"."};return 0===selectedData.length?(0,jsx_runtime.jsxs)(chakra_ui_menu_esm.v2,{children:[(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:tooltip("all content, tags or exhibitions"),children:(0,jsx_runtime.jsx)(chakra_ui_menu_esm.j2,{as:chakra_ui_button_esm.zx,colorScheme:"purple",rightIcon:(0,jsx_runtime.jsx)(chakra_ui_icons_esm.ChevronDownIcon,{}),children:"Export"})}),(0,jsx_runtime.jsxs)(chakra_ui_menu_esm.qy,{maxH:"400px",overflowY:"auto",children:[(0,jsx_runtime.jsx)(chakra_ui_menu_esm.sN,{onClick:function onClick(){null!=allTags&&allTags.collection_Tag&&function doTagsExport(dataToExport){var _csvURL,csvURL,csvText=papaparse_min_default().unparse(dataToExport.map((function(tag){return{"Conference Id":tag.conferenceId,"Subconference Id":tag.subconferenceId,"Tag Id":tag.id,Name:tag.name,Priority:tag.priority,Colour:tag.colour}})),{columns:["Conference Id","Subconference Id","Tag Id","Name","Priority","Colour"]}),csvData=new Blob([csvText],{type:"text/csv;charset=utf-8;"}),now=new Date,fileName=now.getFullYear()+"-"+(now.getMonth()+1).toString().padStart(2,"0")+"-"+now.getDate().toString().padStart(2,"0")+"T"+now.getHours().toString().padStart(2,"0")+"-"+now.getMinutes().toString().padStart(2,"0")+" - Midspace Tags.csv";csvURL=window.URL.createObjectURL(csvData);var tempLink=document.createElement("a");tempLink.href=null!==(_csvURL=csvURL)&&void 0!==_csvURL?_csvURL:"",tempLink.setAttribute("download",fileName),tempLink.click()}(allTags.collection_Tag)},children:"Tags"}),(0,jsx_runtime.jsx)(chakra_ui_menu_esm.sN,{onClick:function onClick(){null!=allExhibitions&&allExhibitions.collection_Exhibition&&function doExhibitionsExport(dataToExport){var _csvURL2,csvURL,csvText=papaparse_min_default().unparse(dataToExport.map((function(exhibition){return{"Conference Id":exhibition.conferenceId,"Subconference Id":exhibition.subconferenceId,"Exhibition Id":exhibition.id,Name:exhibition.name,Priority:exhibition.priority,Colour:exhibition.colour,Hidden:exhibition.isHidden?"Yes":"No"}})),{columns:["Conference Id","Subconference Id","Exhibition Id","Name","Priority","Colour","Hidden"]}),csvData=new Blob([csvText],{type:"text/csv;charset=utf-8;"}),now=new Date,fileName=now.getFullYear()+"-"+(now.getMonth()+1).toString().padStart(2,"0")+"-"+now.getDate().toString().padStart(2,"0")+"T"+now.getHours().toString().padStart(2,"0")+"-"+now.getMinutes().toString().padStart(2,"0")+" - Midspace Exhibitions.csv";csvURL=window.URL.createObjectURL(csvData);var tempLink=document.createElement("a");tempLink.href=null!==(_csvURL2=csvURL)&&void 0!==_csvURL2?_csvURL2:"",tempLink.setAttribute("download",fileName),tempLink.click()}(allExhibitions.collection_Exhibition)},children:"Exhibitions"}),(0,jsx_runtime.jsx)(chakra_ui_menu_esm.sN,{onClick:function onClick(){null!=allItems&&allItems.content_Item&&doContentExport(allItems.content_Item)},children:"Content"}),(0,jsx_runtime.jsx)(chakra_ui_menu_esm.kS,{title:"Content with tag",children:null==allTags?void 0:allTags.collection_Tag.map((function(tag){return(0,jsx_runtime.jsx)(chakra_ui_menu_esm.sN,{onClick:function onClick(){null!=allItems&&allItems.content_Item&&doContentExport(null==allItems?void 0:allItems.content_Item.filter((function(item){return item.itemTags.some((function(itemTag){return itemTag.tagId===tag.id}))})))},children:tag.name},tag.id)}))}),(0,jsx_runtime.jsx)(chakra_ui_menu_esm.kS,{title:"Content in exhibtion",children:null==allExhibitions?void 0:allExhibitions.collection_Exhibition.map((function(exh){return(0,jsx_runtime.jsx)(chakra_ui_menu_esm.sN,{onClick:function onClick(){null!=allItems&&allItems.content_Item&&doContentExport(null==allItems?void 0:allItems.content_Item.filter((function(item){return exh.items.some((function(exhItm){return exhItm.itemId===item.id}))})))},children:exh.name},exh.id)}))})]})]}):(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:tooltip("selected content"),children:(0,jsx_runtime.jsx)(chakra_ui_layout_esm.xu,{children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{colorScheme:"purple",isDisabled:0===selectedData.length,onClick:function onClick(){return doContentExport(selectedData)},children:"Export"})})})}},{render:function SendSubmissionRequests(_ref10){var items=_ref10.selectedData,key=_ref10.key;return items.length>0?(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Send submission request emails to selected items (first requests, reminders or repeats).",children:(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:function onClick(){setSendSubmissionRequests_ItemIds(items.map((function(x){return x.id}))),setSendSubmissionRequests_PersonIds(null),sendSubmissionRequests_OnOpen()},children:"Send submission requests"})},key):(0,jsx_runtime.jsxs)(chakra_ui_menu_esm.v2,{children:[(0,jsx_runtime.jsx)(chakra_ui_tooltip_esm.u,{label:"Send submission requests (first requests, reminders or repeats).",children:(0,jsx_runtime.jsx)(chakra_ui_menu_esm.j2,{as:chakra_ui_button_esm.zx,rightIcon:(0,jsx_runtime.jsx)(chakra_ui_icons_esm.ChevronDownIcon,{}),children:"Send submission requests"})}),(0,jsx_runtime.jsxs)(chakra_ui_menu_esm.qy,{overflow:"auto",maxH:"30vh",children:[(0,jsx_runtime.jsx)(chakra_ui_menu_esm.sN,{onClick:function onClick(){null!=allItems&&allItems.content_Item&&(setSendSubmissionRequests_ItemIds(allItems.content_Item.map((function(x){return x.id}))),setSendSubmissionRequests_PersonIds(null),sendSubmissionRequests_OnOpen())},children:"All content"},"all-items"),(0,jsx_runtime.jsx)(chakra_ui_menu_esm.kS,{title:"Content with tag",children:null!=allTags&&allTags.collection_Tag?es.MRu((function(x){return x.name}),allTags.collection_Tag).map((function(tag){return(0,jsx_runtime.jsx)(chakra_ui_menu_esm.sN,{onClick:function onClick(){null!=allItems&&allItems.content_Item&&(setSendSubmissionRequests_ItemIds(allItems.content_Item.filter((function(item){return item.itemTags.some((function(itemTag){return itemTag.tagId===tag.id}))})).map((function(x){return x.id}))),setSendSubmissionRequests_PersonIds(null),sendSubmissionRequests_OnOpen())},children:tag.name},tag.id)})):void 0})]})]},key)}},{render:function SubmissionReviews(_ref11){var items=_ref11.selectedData,key=_ref11.key;return items.length>0?(0,jsx_runtime.jsx)(chakra_ui_button_esm.zx,{onClick:function onClick(){setSubmissionsReview_ItemIds(items.map((function(x){return x.id}))),submissionsReview_OnOpen()},children:"Review submissions"},key):(0,jsx_runtime.jsxs)(chakra_ui_menu_esm.v2,{children:[(0,jsx_runtime.jsx)(chakra_ui_menu_esm.j2,{as:chakra_ui_button_esm.zx,rightIcon:(0,jsx_runtime.jsx)(chakra_ui_icons_esm.ChevronDownIcon,{}),children:"Review submissions"}),(0,jsx_runtime.jsxs)(chakra_ui_menu_esm.qy,{overflow:"auto",maxH:"30vh",children:[(0,jsx_runtime.jsx)(chakra_ui_menu_esm.sN,{onClick:function onClick(){null!=allItems&&allItems.content_Item&&(setSubmissionsReview_ItemIds(allItems.content_Item.map((function(x){return x.id}))),submissionsReview_OnOpen())},children:"All content"},"all-items"),(0,jsx_runtime.jsx)(chakra_ui_menu_esm.kS,{title:"Content with tag",children:null!=allTags&&allTags.collection_Tag?es.MRu((function(x){return x.name}),allTags.collection_Tag).map((function(tag){return(0,jsx_runtime.jsx)(chakra_ui_menu_esm.sN,{onClick:function onClick(){null!=allItems&&allItems.content_Item&&(setSubmissionsReview_ItemIds(allItems.content_Item.filter((function(item){return item.itemTags.some((function(itemTag){return itemTag.tagId===tag.id}))})).map((function(x){return x.id}))),submissionsReview_OnOpen())},children:tag.name},tag.id)})):void 0})]})]},key)}},{render:function RenderBulkOperationMenu(_ref12){var _allItems$content_Ite2,_allTags$collection_T2,selectedData=_ref12.selectedData,key=_ref12.key;return(0,jsx_runtime.jsx)(BulkOperationMenu,{selectedData,allItems:null!==(_allItems$content_Ite2=null==allItems?void 0:allItems.content_Item)&&void 0!==_allItems$content_Ite2?_allItems$content_Ite2:[],allTags:null!==(_allTags$collection_T2=null==allTags?void 0:allTags.collection_Tag)&&void 0!==_allTags$collection_T2?_allTags$collection_T2:[]},key)}}]}),[conferencePath,client,subconferenceId,null==allTags?void 0:allTags.collection_Tag,null==allExhibitions?void 0:allExhibitions.collection_Exhibition,null==allItems?void 0:allItems.content_Item,sendSubmissionRequests_OnOpen,submissionsReview_OnOpen]),alert=(0,react.useMemo)((function(){var _extractActualError,_ref13,_insertItemResponse$e;return insertItemResponse.error||updateItemResponse.error||deleteItemsResponse.error?{status:"error",title:"Error saving changes",description:null!==(_extractActualError=(0,ExtractActualError.Z)(null!==(_ref13=null!==(_insertItemResponse$e=insertItemResponse.error)&&void 0!==_insertItemResponse$e?_insertItemResponse$e:updateItemResponse.error)&&void 0!==_ref13?_ref13:deleteItemsResponse.error))&&void 0!==_extractActualError?_extractActualError:"Unknown error"}:void 0}),[deleteItemsResponse.error,insertItemResponse.error,updateItemResponse.error]);return(0,jsx_runtime.jsxs)(DashboardPage.Y,{title:"Content",children:[loadingAllTags&&!allTags||loadingAllExhibitions&&!allExhibitions||loadingAllItems&&(null==allItems||!allItems.content_Item)?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}):errorAllTags||errorAllExhibitions||errorAllItems?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"An error occurred loading in data - please see further information in notifications."}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{}),(0,jsx_runtime.jsxs)(chakra_ui_layout_esm.Ug,{w:"100%",spacing:2,mx:"auto",justifyContent:"flex-start",children:[(0,jsx_runtime.jsx)(ManageTagsModal,{onClose:ManageContent_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=2,Promise.all([refetchAllItems(),refetchAllTags()]);case 2:forceReloadRef.current();case 3:case"end":return _context2.stop()}}),_callee2)})))}),(0,jsx_runtime.jsx)(ManageExhibitionsModal,{onClose:ManageContent_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:forceReloadRef.current();case 1:case"end":return _context3.stop()}}),_callee3)})))})]}),(0,jsx_runtime.jsx)(CRUDTable2.Z,{columns,row,data:!loadingAllTags&&!loadingAllExhibitions&&!loadingAllItems&&(null!=allTags&&allTags.collection_Tag&&null!=allExhibitions&&allExhibitions.collection_Exhibition&&null!=allItems&&allItems.content_Item?data:null),tableUniqueName:"ManageConferenceRegistrants",alert,edit,insert,update,delete:deleteProps,buttons,forceReload:forceReloadRef}),(0,jsx_runtime.jsx)(SecondaryEditor_SecondaryEditor,{itemId:editingId,itemTitle:editingTitle,itemType:null!=editingItemType?editingItemType:graphql.gqi.Other,onClose:onSecondaryPanelClose,isOpen:isSecondaryPanelOpen,openSendSubmissionRequests}),(0,jsx_runtime.jsx)(SubmissionRequestsModal.cq,{isOpen:sendSubmissionRequests_IsOpen,onClose:sendSubmissionRequests_OnClose,itemIds:sendSubmissionRequests_ItemIds,personIds:sendSubmissionRequests_PersonIds}),(0,jsx_runtime.jsx)(SubmissionsReviewModal,{isOpen:submissionsReview_IsOpen,onClose:submissionsReview_OnClose,itemIds:submissionsReview_ItemIds})]})}(0,urql_core.Ps)(ManageContent_templateObject||(ManageContent_templateObject=function ManageContent_taggedTemplateLiteralLoose(strings,raw){return raw||(raw=strings.slice(0)),strings.raw=raw,strings}(["\n    ## Items\n\n    fragment ManageContent_ItemTag on content_ItemTag {\n        id\n        itemId\n        tagId\n    }\n\n    fragment ManageContent_ItemExhibition on content_ItemExhibition {\n        id\n        itemId\n        item {\n            id\n            title\n        }\n        exhibitionId\n        priority\n        layout\n    }\n\n    fragment ManageContent_ItemScalars on content_Item {\n        id\n        conferenceId\n        subconferenceId\n        title\n        shortTitle\n        typeName\n    }\n\n    fragment ManageContent_Item on content_Item {\n        ...ManageContent_ItemScalars\n        itemTags {\n            ...ManageContent_ItemTag\n        }\n    }\n\n    fragment ManageContent_Room on room_Room {\n        id\n        name\n        conferenceId\n        subconferenceId\n    }\n\n    fragment ManageContent_Element on content_Element {\n        id\n        itemId\n        name\n        typeName\n        data\n        layoutData\n        uploadsRemaining\n        isHidden\n        updatedAt\n        conferenceId\n        subconferenceId\n    }\n\n    fragment ManageContent_ProgramPerson on collection_ProgramPerson {\n        id\n        name\n        affiliation\n        email\n        registrantId\n        conferenceId\n        subconferenceId\n    }\n\n    fragment ManageContent_ItemProgramPerson on content_ItemProgramPerson {\n        id\n        itemId\n        priority\n        roleName\n        personId\n        person {\n            ...ManageContent_ProgramPerson\n        }\n    }\n\n    fragment ManageContent_ItemSecondary on content_Item {\n        typeName\n        room {\n            ...ManageContent_Room\n        }\n        chatId\n    }\n\n    fragment ManageContent_ItemForExport on content_Item {\n        id\n        conferenceId\n        subconferenceId\n        title\n        shortTitle\n        typeName\n        itemTags {\n            id\n            tagId\n            itemId\n        }\n        itemExhibitions {\n            id\n            itemId\n            exhibitionId\n            priority\n        }\n        room {\n            id\n            conferenceId\n        }\n        chatId\n        itemPeople {\n            ...ManageContent_ItemProgramPerson\n        }\n        elements {\n            ...ManageContent_Element\n        }\n    }\n\n    query ManageContent_SelectAllItems($conferenceId: uuid!, $subconferenceCond: uuid_comparison_exp!) {\n        content_Item(where: { conferenceId: { _eq: $conferenceId }, subconferenceId: $subconferenceCond }) {\n            ...ManageContent_Item\n        }\n    }\n\n    query ManageContent_SelectItemsForExport($itemIds: [uuid!]!) {\n        content_Item(where: { id: { _in: $itemIds } }) {\n            ...ManageContent_ItemForExport\n        }\n    }\n\n    query ManageContent_SelectItem($itemId: uuid!) {\n        content_Item_by_pk(id: $itemId) {\n            ...ManageContent_ItemSecondary\n        }\n        content_Element(where: { itemId: { _eq: $itemId } }) {\n            ...ManageContent_Element\n        }\n    }\n\n    query ManageContent_SelectItemPeople($itemId: uuid!) {\n        content_ItemProgramPerson(where: { itemId: { _eq: $itemId } }) {\n            ...ManageContent_ItemProgramPerson\n        }\n    }\n\n    mutation ManageContent_InsertItem($item: content_Item_insert_input!, $itemTags: [content_ItemTag_insert_input!]!) {\n        insert_content_Item_one(object: $item) {\n            ...ManageContent_Item\n        }\n        insert_content_ItemTag(objects: $itemTags) {\n            returning {\n                id\n            }\n        }\n    }\n\n    mutation ManageContent_UpdateItem(\n        $id: uuid!\n        $item: content_Item_set_input!\n        $tags: [content_ItemTag_insert_input!]!\n        $tagIds: [uuid!]!\n    ) {\n        insert_content_ItemTag(\n            objects: $tags\n            on_conflict: { constraint: ItemTag_itemId_tagId_key, update_columns: [] }\n        ) {\n            returning {\n                ...ManageContent_ItemTag\n            }\n        }\n        delete_content_ItemTag(where: { tagId: { _nin: $tagIds }, itemId: { _eq: $id } }) {\n            returning {\n                id\n            }\n        }\n        update_content_Item_by_pk(pk_columns: { id: $id }, _set: $item) {\n            ...ManageContent_ItemScalars\n        }\n    }\n\n    mutation ManageContent_DeleteItems($ids: [uuid!]!) {\n        delete_content_Item(where: { id: { _in: $ids } }) {\n            returning {\n                id\n            }\n        }\n    }\n\n    ## Tags\n\n    fragment ManageContent_Tag on collection_Tag {\n        id\n        conferenceId\n        subconferenceId\n        name\n        colour\n        priority\n    }\n\n    query ManageContent_SelectAllTags($conferenceId: uuid!, $subconferenceCond: uuid_comparison_exp!) {\n        collection_Tag(where: { conferenceId: { _eq: $conferenceId }, subconferenceId: $subconferenceCond }) {\n            ...ManageContent_Tag\n        }\n    }\n\n    ## Exhibitions\n\n    fragment ManageContent_Exhibition on collection_Exhibition {\n        id\n        conferenceId\n        subconferenceId\n        name\n        colour\n        priority\n        isHidden\n        descriptiveItemId\n        items {\n            id\n            itemId\n        }\n    }\n\n    query ManageContent_SelectAllExhibitions($conferenceId: uuid!, $subconferenceCond: uuid_comparison_exp!) {\n        collection_Exhibition(where: { conferenceId: { _eq: $conferenceId }, subconferenceId: $subconferenceCond }) {\n            ...ManageContent_Exhibition\n        }\n    }\n"]))),ManageContentV2.displayName="ManageContentV2"},"./src/aspects/LeavingPageWarnings/UnsavedChangesWarning.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>UnsavedChangesWarning});var react=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),react_router=__webpack_require__("../node_modules/.pnpm/react-router@5.2.1_react@17.0.2/node_modules/react-router/esm/react-router.js"),jsx_runtime=__webpack_require__("../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js");function LeavePageWarning(_ref){var message=_ref.message,hasUnsavedChanges=_ref.hasUnsavedChanges;return(0,react.useEffect)((function(){var unloadHandler=function(){if(hasUnsavedChanges){var _unloadHandler=function _unloadHandler(ev){return ev.preventDefault(),ev.returnValue=message,!0};return window.addEventListener("beforeunload",_unloadHandler),_unloadHandler}return null}();return function(){unloadHandler&&window.removeEventListener("beforeunload",unloadHandler)}}),[hasUnsavedChanges,message]),(0,jsx_runtime.jsx)(react_router.NL,{when:hasUnsavedChanges,message})}LeavePageWarning.displayName="LeavePageWarning";try{LeavePageWarning.displayName="LeavePageWarning",LeavePageWarning.__docgenInfo={description:"",displayName:"LeavePageWarning",props:{hasUnsavedChanges:{defaultValue:null,description:"",name:"hasUnsavedChanges",required:!0,type:{name:"boolean"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/LeavingPageWarnings/LeavePageWarning.tsx#LeavePageWarning"]={docgenInfo:LeavePageWarning.__docgenInfo,name:"LeavePageWarning",path:"src/aspects/LeavingPageWarnings/LeavePageWarning.tsx#LeavePageWarning"})}catch(__react_docgen_typescript_loader_error){}function UnsavedChangesWarning(_ref){var hasUnsavedChanges=_ref.hasUnsavedChanges;return(0,jsx_runtime.jsx)(LeavePageWarning,{hasUnsavedChanges,message:"You have unsaved changes, are you sure you wish to leave the page?"})}UnsavedChangesWarning.displayName="UnsavedChangesWarning";try{UnsavedChangesWarning.displayName="UnsavedChangesWarning",UnsavedChangesWarning.__docgenInfo={description:"",displayName:"UnsavedChangesWarning",props:{hasUnsavedChanges:{defaultValue:null,description:"",name:"hasUnsavedChanges",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/aspects/LeavingPageWarnings/UnsavedChangesWarning.tsx#UnsavedChangesWarning"]={docgenInfo:UnsavedChangesWarning.__docgenInfo,name:"UnsavedChangesWarning",path:"src/aspects/LeavingPageWarnings/UnsavedChangesWarning.tsx#UnsavedChangesWarning"})}catch(__react_docgen_typescript_loader_error){}},"../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/modules/es.string.trim-start.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var $=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/export.js"),$trimStart=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/string-trim.js").start,FORCED=__webpack_require__("../node_modules/.pnpm/core-js@3.21.0/node_modules/core-js/internals/string-trim-forced.js")("trimStart"),trimStart=FORCED?function trimStart(){return $trimStart(this)}:"".trimStart;$({target:"String",proto:!0,name:"trimStart",forced:FORCED},{trimStart,trimLeft:trimStart})}}]);